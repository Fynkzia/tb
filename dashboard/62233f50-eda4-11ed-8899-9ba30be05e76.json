{
  "entityType" : "DASHBOARD",
  "entity" : {
    "assignedCustomers" : null,
    "configuration" : {
      "widgets" : {
        "b790fdaa-727a-2572-b2a2-c72a55444cbc" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "entities_table",
          "type" : "latest",
          "title" : "New widget",
          "sizeX" : 12,
          "sizeY" : 4,
          "config" : {
            "timewindow" : {
              "displayValue" : "",
              "selectedTab" : 0,
              "realtime" : {
                "realtimeType" : 1,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "quickInterval" : "CURRENT_DAY"
              },
              "history" : {
                "historyType" : 0,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "fixedTimewindow" : {
                  "startTimeMs" : 1684409450985,
                  "endTimeMs" : 1684495850985
                },
                "quickInterval" : "CURRENT_DAY"
              },
              "aggregation" : {
                "type" : "NONE",
                "limit" : 200
              }
            },
            "showTitle" : true,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "4px",
            "settings" : {
              "entitiesTitle" : "Об'єкти",
              "enableSearch" : true,
              "enableSelectColumnDisplay" : true,
              "enableStickyHeader" : true,
              "enableStickyAction" : true,
              "reserveSpaceForHiddenAction" : "true",
              "displayEntityName" : true,
              "entityNameColumnTitle" : "Serial Number",
              "displayEntityLabel" : false,
              "displayEntityType" : false,
              "displayPagination" : false,
              "defaultSortOrder" : "entityName",
              "useRowStyleFunction" : false
            },
            "title" : "Об'єкти",
            "dropShadow" : false,
            "enableFullscreen" : true,
            "titleStyle" : {
              "fontSize" : "18px",
              "fontWeight" : 600,
              "padding" : "5px 10px 5px 5px"
            },
            "useDashboardTimewindow" : false,
            "showLegend" : false,
            "datasources" : [ {
              "type" : "entity",
              "name" : null,
              "entityAliasId" : "f7bed459-ea25-5a39-bfc1-a3bb8c941d8d",
              "filterId" : null,
              "dataKeys" : [ {
                "name" : "pulseCounter",
                "type" : "timeseries",
                "label" : "Latest reading",
                "color" : "#2196f3",
                "settings" : {
                  "columnWidth" : "0px",
                  "useCellStyleFunction" : false,
                  "useCellContentFunction" : false
                },
                "_hash" : 0.6622074305397865,
                "units" : "m³",
                "decimals" : 2,
                "postFuncBody" : "return value || 0;",
                "usePostProcessing" : true,
                "funcBody" : null
              }, {
                "name" : "active",
                "type" : "attribute",
                "label" : "Status",
                "color" : "#ffc107",
                "settings" : {
                  "columnWidth" : "0px",
                  "useCellStyleFunction" : false,
                  "useCellContentFunction" : false
                },
                "_hash" : 0.9076421001622259,
                "postFuncBody" : "if (value === 'true') {\n    return 'Active';\n} else {\n    return 'Inactive';\n}"
              }, {
                "name" : "battery",
                "type" : "timeseries",
                "label" : "Battery level",
                "color" : "#ffc107",
                "settings" : {
                  "columnWidth" : "0px",
                  "useCellStyleFunction" : false,
                  "useCellContentFunction" : false
                },
                "_hash" : 0.0013008241290599631,
                "units" : "%",
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : null,
                "postFuncBody" : null
              } ]
            } ],
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableDataExport" : false,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "displayTimewindow" : true,
            "actions" : {
              "headerButton" : [ ],
              "rowClick" : [ {
                "name" : "asset_details",
                "icon" : "more_horiz",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "openDashboardState",
                "targetDashboardStateId" : "asset_details",
                "setEntityId" : true,
                "stateEntityParamName" : null,
                "openRightLayout" : null,
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "ccdbb8cb-7173-340c-663a-be72ceb9c340"
              } ]
            },
            "widgetCss" : "",
            "pageSize" : 1024,
            "noDataDisplayMessage" : ""
          },
          "id" : "b790fdaa-727a-2572-b2a2-c72a55444cbc"
        },
        "ccc94584-ce53-cdfc-ea3b-ecd21fa19abf" : {
          "isSystemType" : true,
          "bundleAlias" : "charts",
          "typeAlias" : "basic_timeseries",
          "type" : "timeseries",
          "title" : "New widget",
          "sizeX" : 24,
          "sizeY" : 13,
          "config" : {
            "datasources" : [ {
              "type" : "entity",
              "name" : "Sensors",
              "entityAliasId" : "9da9bd9c-a7cc-244f-16ac-3e2045cff5b1",
              "filterId" : null,
              "dataKeys" : [ {
                "name" : "dailyConsumption",
                "type" : "timeseries",
                "label" : "Consumption",
                "color" : "#2196f3",
                "settings" : {
                  "showLines" : true,
                  "fillLines" : false,
                  "showPoints" : false,
                  "showPointsRadius" : 3,
                  "showSeparateAxis" : false,
                  "axisPosition" : "left",
                  "showPointShape" : "circle",
                  "pointShapeFormatter" : "var size = radius * Math.sqrt(Math.PI) / 2;\nctx.moveTo(x - size, y - size);\nctx.lineTo(x + size, y + size);\nctx.moveTo(x - size, y + size);\nctx.lineTo(x + size, y - size);",
                  "showPointsLineWidth" : 5,
                  "comparisonSettings" : {
                    "showValuesForComparison" : true,
                    "color" : "#a5d6a7"
                  }
                },
                "_hash" : 0.04598716421616311,
                "units" : "m³",
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : null,
                "postFuncBody" : null
              } ]
            } ],
            "timewindow" : {
              "hideInterval" : false,
              "hideAggregation" : false,
              "hideAggInterval" : false,
              "hideTimezone" : false,
              "selectedTab" : 1,
              "history" : {
                "historyType" : 2,
                "timewindowMs" : 60000,
                "interval" : 1800000,
                "fixedTimewindow" : {
                  "startTimeMs" : 1616088611969,
                  "endTimeMs" : 1616175011969
                },
                "quickInterval" : "CURRENT_WEEK_ISO"
              },
              "aggregation" : {
                "type" : "NONE",
                "limit" : 2500
              },
              "timezone" : "UTC"
            },
            "showTitle" : true,
            "backgroundColor" : "#fff",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "8px",
            "settings" : {
              "shadowSize" : 4,
              "fontColor" : "#545454",
              "fontSize" : 10,
              "xaxis" : {
                "showLabels" : true,
                "color" : "#545454"
              },
              "yaxis" : {
                "showLabels" : true,
                "color" : "#545454",
                "tickDecimals" : 1
              },
              "grid" : {
                "color" : "#ffffff",
                "tickColor" : "#DDDDDD",
                "verticalLines" : false,
                "horizontalLines" : true,
                "outlineWidth" : 1
              },
              "stack" : false,
              "tooltipIndividual" : false,
              "smoothLines" : true,
              "timeForComparison" : "previousInterval",
              "xaxisSecond" : {
                "axisPosition" : "top",
                "showLabels" : true
              },
              "comparisonEnabled" : true,
              "customLegendEnabled" : false,
              "dataKeysListForLabels" : [ ]
            },
            "title" : "Water Consumption",
            "dropShadow" : false,
            "enableFullscreen" : false,
            "titleStyle" : {
              "fontSize" : "18px",
              "fontWeight" : 600,
              "padding" : "5px 10px 5px 5px"
            },
            "mobileHeight" : null,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableDataExport" : false,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "useDashboardTimewindow" : false,
            "displayTimewindow" : true,
            "showLegend" : true,
            "legendConfig" : {
              "direction" : "row",
              "position" : "bottom",
              "sortDataKeys" : null,
              "showMin" : false,
              "showMax" : true,
              "showAvg" : true,
              "showTotal" : true
            },
            "actions" : { },
            "decimals" : 2
          },
          "id" : "ccc94584-ce53-cdfc-ea3b-ecd21fa19abf"
        },
        "ee542aaf-7305-9baa-3022-34a9da7b45ed" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n    opacity: 0.5;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"analytics\">\n        <div class='description' id=\"analytics\">\n            Analytics\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Analytics",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "analytics",
                "icon" : "more_horiz",
                "type" : "updateDashboardState",
                "targetDashboardStateId" : "analytics",
                "setEntityId" : false
              } ]
            }
          },
          "id" : "ee542aaf-7305-9baa-3022-34a9da7b45ed"
        },
        "d3ea68cf-4dd0-a261-a04f-7008b3d2eed4" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"devices\">\n        <div class='description' id=\"devices\">\n            Devices\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Devices",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "devices",
                "icon" : "more_horiz",
                "type" : "updateDashboardState",
                "targetDashboardStateId" : "devices",
                "setEntityId" : false
              } ]
            }
          },
          "id" : "d3ea68cf-4dd0-a261-a04f-7008b3d2eed4"
        },
        "117490c6-fa7f-34cf-1de9-dfbc6068bbdb" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"alarms\">\n        <div class='description' id=\"alarms\">\n            Alarms\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Alarms",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "alarms",
                "icon" : "more_horiz",
                "type" : "updateDashboardState",
                "targetDashboardStateId" : "alarms",
                "setEntityId" : false
              } ]
            }
          },
          "id" : "117490c6-fa7f-34cf-1de9-dfbc6068bbdb"
        },
        "66e7a232-0011-b462-e359-c5d99a2a9c56" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"settings\">\n        <div class='description' id=\"settings\">\n            Settings\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Settings",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "settings",
                "icon" : "more_horiz",
                "type" : "updateDashboardState",
                "targetDashboardStateId" : "settings",
                "setEntityId" : false
              } ]
            }
          },
          "id" : "66e7a232-0011-b462-e359-c5d99a2a9c56"
        },
        "1b2ee163-50d8-ae49-46ba-9b616bc63631" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"analytics\">\n        <div class='description' id=\"analytics\">\n            Analytics\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Analytics",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "analytics",
                "icon" : "more_horiz",
                "type" : "custom",
                "customFunction" : "openDashboardState('analytics');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}"
              } ]
            }
          },
          "id" : "1b2ee163-50d8-ae49-46ba-9b616bc63631"
        },
        "18a3998c-c567-1d8a-c4fe-07446dfe110a" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"analytics\">\n        <div class='description' id=\"analytics\">\n            Analytics\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Analytics",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "analytics",
                "icon" : "more_horiz",
                "type" : "custom",
                "customFunction" : "openDashboardState('analytics');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}"
              } ]
            }
          },
          "id" : "18a3998c-c567-1d8a-c4fe-07446dfe110a"
        },
        "efc2c22c-ece5-bcfe-d5f1-1b15125b7f01" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"analytics\">\n        <div class='description' id=\"analytics\">\n            Analytics\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Analytics",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "analytics",
                "icon" : "more_horiz",
                "type" : "custom",
                "customFunction" : "openDashboardState('analytics');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}"
              } ]
            }
          },
          "id" : "efc2c22c-ece5-bcfe-d5f1-1b15125b7f01"
        },
        "6c91bf1f-bdf6-6af7-de49-079b89bee211" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"analytics\">\n        <div class='description' id=\"analytics\">\n            Analytics\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Analytics",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "analytics",
                "icon" : "more_horiz",
                "type" : "custom",
                "customFunction" : "openDashboardState('analytics');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}"
              } ]
            }
          },
          "id" : "6c91bf1f-bdf6-6af7-de49-079b89bee211"
        },
        "7bf92548-b95f-2874-92c4-6675571878ad" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n    opacity: 0.5;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"devices\">\n        <div class='description' id=\"devices\">\n            Devices\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Devices",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ ]
            }
          },
          "id" : "7bf92548-b95f-2874-92c4-6675571878ad"
        },
        "dd79b0d6-e583-1efc-6d26-07ce088e5f14" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"devices\">\n        <div class='description' id=\"devices\">\n            Devices\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Devices",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "devices",
                "icon" : "more_horiz",
                "type" : "updateDashboardState",
                "targetDashboardStateId" : "devices",
                "setEntityId" : false
              } ]
            }
          },
          "id" : "dd79b0d6-e583-1efc-6d26-07ce088e5f14"
        },
        "5a352e8c-34bd-d93b-2fb3-c41905cf9e3a" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"devices\">\n        <div class='description' id=\"devices\">\n            Devices\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Devices",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "devices",
                "icon" : "more_horiz",
                "type" : "updateDashboardState",
                "targetDashboardStateId" : "devices",
                "setEntityId" : false
              } ]
            }
          },
          "id" : "5a352e8c-34bd-d93b-2fb3-c41905cf9e3a"
        },
        "05cb8c19-3d4f-b147-a377-8ab72aa3057d" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"devices\">\n        <div class='description' id=\"devices\">\n            Devices\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Devices",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "devices",
                "icon" : "more_horiz",
                "type" : "updateDashboardState",
                "targetDashboardStateId" : "devices",
                "setEntityId" : false
              } ]
            }
          },
          "id" : "05cb8c19-3d4f-b147-a377-8ab72aa3057d"
        },
        "3131e211-a6bb-212b-b75e-2051aecdc686" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n    opacity: 0.5;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"users\">\n        <div class='description' id=\"users\">\n            Users\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Users",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ ]
            }
          },
          "id" : "3131e211-a6bb-212b-b75e-2051aecdc686"
        },
        "4ab2e7c3-dbe0-dc48-7ecb-0df1f16916d4" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id='users'>\n        <div class='description' id='users'>\n            Users\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Users",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "users",
                "icon" : "more_horiz",
                "type" : "updateDashboardState",
                "targetDashboardStateId" : "users",
                "setEntityId" : false
              } ]
            }
          },
          "id" : "4ab2e7c3-dbe0-dc48-7ecb-0df1f16916d4"
        },
        "9545737b-2035-0a32-b682-0e7bc61ea940" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id='users'>\n        <div class='description' id='users'>\n            Users\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Users",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "users",
                "icon" : "more_horiz",
                "type" : "updateDashboardState",
                "targetDashboardStateId" : "users",
                "setEntityId" : false
              } ]
            }
          },
          "id" : "9545737b-2035-0a32-b682-0e7bc61ea940"
        },
        "ecd0367e-5d49-f736-545c-f32ea25a4728" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id='users'>\n        <div class='description' id='users'>\n            Users\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Users",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "users",
                "icon" : "more_horiz",
                "type" : "updateDashboardState",
                "targetDashboardStateId" : "users",
                "setEntityId" : false
              } ]
            }
          },
          "id" : "ecd0367e-5d49-f736-545c-f32ea25a4728"
        },
        "e91e4167-68c3-5d5d-efc5-a19ec8fb999c" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"alarms\">\n        <div class='description' id=\"alarms\">\n            Alarms\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Alarms",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "alarms",
                "icon" : "more_horiz",
                "type" : "updateDashboardState",
                "targetDashboardStateId" : "alarms",
                "setEntityId" : false
              } ]
            }
          },
          "id" : "e91e4167-68c3-5d5d-efc5-a19ec8fb999c"
        },
        "10ac8f78-44fe-f83c-2a4c-193a9d749a86" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"alarms\">\n        <div class='description' id=\"alarms\">\n            Alarms\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Alarms",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "alarms",
                "icon" : "more_horiz",
                "type" : "updateDashboardState",
                "targetDashboardStateId" : "alarms",
                "setEntityId" : false
              } ]
            }
          },
          "id" : "10ac8f78-44fe-f83c-2a4c-193a9d749a86"
        },
        "6727afe1-7b86-7c58-5873-a9700a83edec" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n    opacity: 0.5;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content'>\n        <div class='description'>\n            Alarms\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Alarms",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ ]
            }
          },
          "id" : "6727afe1-7b86-7c58-5873-a9700a83edec"
        },
        "70b3ca21-cc98-46ea-1676-16d3edea2a65" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"alarms\">\n        <div class='description' id=\"alarms\">\n            Alarms\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Alarms",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "alarms",
                "icon" : "more_horiz",
                "type" : "updateDashboardState",
                "targetDashboardStateId" : "alarms",
                "setEntityId" : false
              } ]
            }
          },
          "id" : "70b3ca21-cc98-46ea-1676-16d3edea2a65"
        },
        "be3eb9bd-21f7-250c-ccf5-1d2dd67b73e2" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"settings\">\n        <div class='description' id=\"settings\">\n            Settings\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Settings",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "settings",
                "icon" : "more_horiz",
                "type" : "updateDashboardState",
                "targetDashboardStateId" : "settings",
                "setEntityId" : false
              } ]
            }
          },
          "id" : "be3eb9bd-21f7-250c-ccf5-1d2dd67b73e2"
        },
        "aeed3b02-dbcd-32d5-b503-1f878e389cfb" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"settings\">\n        <div class='description' id=\"settings\">\n            Settings\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Settings",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "settings",
                "icon" : "more_horiz",
                "type" : "updateDashboardState",
                "targetDashboardStateId" : "settings",
                "setEntityId" : false
              } ]
            }
          },
          "id" : "aeed3b02-dbcd-32d5-b503-1f878e389cfb"
        },
        "9ac96f6f-ed61-67b2-5695-3fe61064b7f8" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"settings\">\n        <div class='description' id=\"settings\">\n            Settings\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Settings",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "settings",
                "icon" : "more_horiz",
                "type" : "updateDashboardState",
                "targetDashboardStateId" : "settings",
                "setEntityId" : false
              } ]
            }
          },
          "id" : "9ac96f6f-ed61-67b2-5695-3fe61064b7f8"
        },
        "936cf52c-f762-628e-00e8-363b53e1af4f" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n    opacity: 0.5\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content'>\n        <div class='description'>\n            Settings\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Settings",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ ]
            }
          },
          "id" : "936cf52c-f762-628e-00e8-363b53e1af4f"
        },
        "291ab4b2-f371-9897-6856-385e5745f430" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "entities_table",
          "type" : "latest",
          "title" : "New widget",
          "sizeX" : 24,
          "sizeY" : 16,
          "config" : {
            "timewindow" : {
              "displayValue" : "",
              "selectedTab" : 0,
              "realtime" : {
                "realtimeType" : 1,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "quickInterval" : "CURRENT_DAY"
              },
              "history" : {
                "historyType" : 0,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "fixedTimewindow" : {
                  "startTimeMs" : 1684409450985,
                  "endTimeMs" : 1684495850985
                },
                "quickInterval" : "CURRENT_DAY"
              },
              "aggregation" : {
                "type" : "NONE",
                "limit" : 200
              }
            },
            "showTitle" : true,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "4px",
            "settings" : {
              "enableSearch" : true,
              "displayPagination" : false,
              "defaultPageSize" : 10,
              "displayEntityName" : true,
              "displayEntityType" : false,
              "defaultSortOrder" : "entityName",
              "entitiesTitle" : "Water Meters",
              "displayEntityLabel" : true,
              "enableSelectColumnDisplay" : true,
              "entityNameColumnTitle" : "Serial Number",
              "entityLabelColumnTitle" : "Label"
            },
            "title" : "Water Meters",
            "dropShadow" : false,
            "enableFullscreen" : true,
            "titleStyle" : {
              "fontSize" : "18px",
              "fontWeight" : 600,
              "padding" : "5px 10px 5px 5px"
            },
            "useDashboardTimewindow" : false,
            "showLegend" : false,
            "datasources" : [ {
              "type" : "entity",
              "name" : null,
              "entityAliasId" : "e47a3fcd-231c-662a-6126-f09fd8064eb2",
              "filterId" : null,
              "dataKeys" : [ {
                "name" : "pulseCounter",
                "type" : "timeseries",
                "label" : "Latest reading",
                "color" : "#2196f3",
                "settings" : {
                  "columnWidth" : "0px",
                  "useCellStyleFunction" : false,
                  "useCellContentFunction" : false
                },
                "_hash" : 0.6622074305397865,
                "units" : "m³",
                "decimals" : 2,
                "postFuncBody" : "return value || 0;",
                "usePostProcessing" : true,
                "funcBody" : null
              }, {
                "name" : "active",
                "type" : "attribute",
                "label" : "Status",
                "color" : "#ffc107",
                "settings" : {
                  "columnWidth" : "0px",
                  "useCellStyleFunction" : false,
                  "useCellContentFunction" : false
                },
                "_hash" : 0.9076421001622259,
                "postFuncBody" : "if (value === 'true') {\n    return 'Active';\n} else {\n    return 'Inactive';\n}"
              }, {
                "name" : "leakage",
                "type" : "timeseries",
                "label" : "Leakage",
                "color" : "#8bc34a",
                "settings" : {
                  "columnWidth" : "0px",
                  "useCellStyleFunction" : true,
                  "useCellContentFunction" : true,
                  "cellStyleFunction" : "var color;\nif (value == 'true') {\n    color = '#EB5757';\n} else {\n    color = '#27AE60';\n}\nreturn {\n    color: color,\n    fontSize: '18px'\n};",
                  "cellContentFunction" : "value = '&#11044;';\nreturn value;"
                },
                "_hash" : 0.9508568110027811,
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : null,
                "postFuncBody" : null
              } ]
            } ],
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableDataExport" : false,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "displayTimewindow" : true,
            "actions" : {
              "headerButton" : [ {
                "name" : "Add device",
                "icon" : "add",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "customPretty",
                "customHtml" : "<form #addDeviceForm=\"ngForm\" [formGroup]=\"addDeviceFormGroup\" class=\"add-device-form\" (ngSubmit)=\"save()\">\n    <mat-toolbar class=\"add-device-form-toolbar\" fxLayout=\"row\">\n            <h2>Add Device</h2>\n            <span fxFlex></span>\n            <button mat-icon-button (click)=\"cancel()\" type=\"button\">\n                <mat-icon class=\"material-icons\">close</mat-icon>\n            </button>\n    </mat-toolbar>\n    <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\"></mat-progress-bar>\n    <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\n    <div mat-dialog-content fxLayout=\"column\">\n        <fieldset [disabled]=\"(isLoading$ | async) || loading\">\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Serial Number</mat-label>\n                    <input matInput formControlName=\"deviceName\" required>\n                    <mat-error *ngIf=\"addDeviceFormGroup.get('deviceName').hasError('required')\">\n                        Serial Number is required.\n                    </mat-error>\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Label</mat-label>\n                    <input matInput formControlName=\"deviceLabel\" >\n                </mat-form-field>\n            </div>\n            <div formGroupName=\"attributes\" fxLayout=\"column\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Address</mat-label>\n                    <input matInput formControlName=\"address\">\n                </mat-form-field>\n            </div>\n            <tb-owner-autocomplete\n                    formControlName=\"targetOwnerId\"\n                    [excludeOwnerIds]=\"excludeOwnerIds\"\n                    required\n                    placeholderText=\"Select device owner\"\n                    notFoundText=\"No owners matching specified filter were found.\"\n                    requiredText=\"Target owner is required.\">\n            </tb-owner-autocomplete>\n        </fieldset>\n    </div>\n    <div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\" class=\"add-device-form-actions\">\n        <button mat-button color=\"primary\"\n                type=\"button\"\n                (click)=\"cancel()\" cdkFocusInitial>\n            Cancel\n        </button>\n        <button mat-button color=\"primary\"\n                type=\"submit\"\n                [disabled]=\"(isLoading$ | async) || loading || addDeviceForm.invalid || !addDeviceForm.dirty\">\n            Create\n        </button>\n    </div>\n</form>",
                "customCss" : ".add-device-form mat-toolbar.add-device-form-toolbar {\n    background-color: #ffffff;\n    color: #333333;\n}\n.add-device-form .add-device-form-actions button[mat-button][color=\"primary\"] {\n    border: 1px solid #E0E0E0;\n}",
                "customFunction" : "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog')),\n    deviceService = $injector.get(widgetContext.servicesMap.get('deviceService')),\n    attributeService = $injector.get(widgetContext.servicesMap.get('attributeService')),\n    entityRelationService = $injector.get(widgetContext.servicesMap.get('entityRelationService')),\n    entityGroupService = $injector.get(widgetContext.servicesMap.get('entityGroupService'));\n    // userPermissionsService = $injector.get(widgetContext.servicesMap.get('userPermissionsService'));\n// let setted;\n//     entityRelationService.findByTo(entityId).subscribe(function(data){\n//     setted = !!data.length;\n// });\n\nopenAddDeviceDialog();\n\nfunction openAddDeviceDialog() {\n    customDialog.customDialog(htmlTemplate, AddDeviceDialogController).subscribe();\n}\n\nfunction AddDeviceDialogController(instance) {\n    let vm = instance;\n\n    vm.deviceType = 'Water Meter';\n\n    // vm.ownerId = userPermissionsService.getUserOwnerId();\n    // vm.excludeOwnerIds = [vm.ownerId.id];\n\n    vm.currentUserOwner = widgetContext.currentUser.tenantId; // For Tenant Only\n    vm.excludeOwnerIds = [ vm.currentUserOwner ];\n\n    vm.addDeviceFormGroup = vm.fb.group({\n        deviceName: ['', [vm.validators.required]],\n        deviceLabel: [null],\n        attributes: vm.fb.group({\n            address: [null],\n        }),\n        targetOwnerId: [null, [vm.validators.required]]\n    });\n\n    vm.cancel = function() {\n        vm.dialogRef.close(null);\n    };\n\n    vm.save = () => {\n        vm.loading = true;\n        vm.addDeviceFormGroup.markAsPristine();\n        const formValues = vm.addDeviceFormGroup.value;\n        let device = {\n            name: formValues.deviceName,\n            type: vm.deviceType,\n            label: formValues.deviceLabel\n        };\n        deviceService.saveDevice(device).subscribe(\n            (device) => {\n                widgetContext.rxjs.forkJoin([\n                    entityGroupService.changeEntityOwner(formValues.targetOwnerId, device.id, true),\n                    saveAttributes(device.id),\n                    addRelation(device.id, formValues.targetOwnerId)\n                ]).subscribe(\n                    () => {\n                        vm.loading = false;\n                        widgetContext.updateAliases();\n                        vm.dialogRef.close(null);\n                    },\n                    () => {\n                        vm.loading = false;\n                    }\n                );\n            },\n            () => {\n                vm.loading = false;\n            }\n        );\n    };\n\n    function saveAttributes(entityId) {\n        let attributes = vm.addDeviceFormGroup.get('attributes').value;\n        attributes.inactivityTimeout = 7200000;\n        // attributes.setted = setted;\n        let attributesArray = [];\n        for (let key in attributes) {\n            if (attributes[key] !== null) {\n                attributesArray.push({key: key, value: attributes[key]});\n            }\n        }\n        if (attributesArray.length > 0) {\n            return attributeService.saveEntityAttributes(entityId, \"SERVER_SCOPE\", attributesArray);\n        } else {\n            return widgetContext.rxjs.of([]);\n        }\n    }\n    \n    function addRelation(deviceId, customerId) {\n        let relation = {\n            type: 'Owns',\n            typeGroup: 'COMMON',\n            from: customerId,\n            to: deviceId\n        };\n\n        return entityRelationService.saveRelation(relation);\n    }\n\n}",
                "customResources" : [ ],
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "1044aeb8-0967-9f56-cee1-cf700dc861ca"
              } ],
              "rowClick" : [ {
                "name" : "Device Details",
                "icon" : "more_horiz",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "custom",
                "customFunction" : "var entitySubType;\r\nvar $injector = widgetContext.$scope.$injector;\r\n$injector.get(widgetContext.servicesMap.get('entityService')).getEntity(entityId.entityType, entityId.id)\r\n  .subscribe(function(data) {\r\n    entitySubType = data.type;\r\n    if (entitySubType == 'typeSecond') {\r\n      openDashboardStates('device_typeSecond');\r\n    } else {\r\n      openDashboardStates('device_typeOne');\r\n    }\r\n  });\r\n\r\nfunction openDashboardStates(statedId) {\r\n  var params = {\r\n    entityId: entityId,\r\n    entityName: entityName\r\n  };\r\n\r\n  widgetContext.stateController.openState(statedId, params, false);\r\n}\r\n",
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "81dffda7-f420-5b50-05ff-fa08077b9eb9"
              } ],
              "actionCellButton" : [ {
                "name" : "Edit Info",
                "icon" : "edit",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "customPretty",
                "customHtml" : "<form #editDeviceForm=\"ngForm\" [formGroup]=\"editDeviceFormGroup\" class=\"edit-device-form\" (ngSubmit)=\"save()\">\n    <mat-toolbar class=\"edit-device-form-toolbar\" fxLayout=\"row\">\n        <h2>Edit Device</h2>\n        <span fxFlex></span>\n        <button mat-icon-button (click)=\"cancel()\" type=\"button\">\n            <mat-icon class=\"material-icons\">close</mat-icon>\n        </button>\n    </mat-toolbar>\n    <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\"></mat-progress-bar>\n    <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\n    <div mat-dialog-content fxLayout=\"column\">\n        <fieldset [disabled]=\"(isLoading$ | async) || loading\">\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Serial Number</mat-label>\n                    <input matInput formControlName=\"deviceName\" required>\n                    <mat-error *ngIf=\"editDeviceFormGroup.get('deviceName').hasError('required')\">\n                        Serial Number is required.\n                    </mat-error>\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Label</mat-label>\n                    <input matInput formControlName=\"deviceLabel\" >\n                </mat-form-field>\n            </div>\n            <tb-owner-autocomplete\n                    formControlName=\"deviceOwnerId\"\n                    [excludeOwnerIds]=\"excludeOwnerIds\"\n                    required\n                    placeholderText=\"Select device owner\"\n                    notFoundText=\"No owners matching specified filter were found.\"\n                    requiredText=\"Target owner is required.\">\n            </tb-owner-autocomplete>\n        </fieldset>\n    </div>\n    <div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\" class=\"edit-device-form-actions\">\n        <button mat-button color=\"primary\"\n                type=\"button\"\n                (click)=\"cancel()\" cdkFocusInitial>\n            Cancel\n        </button>\n        <button mat-button color=\"primary\"\n                type=\"submit\"\n                [disabled]=\"(isLoading$ | async) || loading || editDeviceForm.invalid || !editDeviceForm.dirty\">\n            Save\n        </button>\n    </div>\n</form>",
                "customCss" : ".edit-device-form mat-toolbar.edit-device-form-toolbar {\n    background-color: #ffffff;\n    color: #333333;\n}\n.edit-device-form .edit-device-form-actions button[mat-button][color=\"primary\"] {\n    border: 1px solid #E0E0E0;\n}",
                "customFunction" : "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog')),\n    deviceService = $injector.get(widgetContext.servicesMap.get('deviceService')),\n    entityRelationService = $injector.get(widgetContext.servicesMap.get('entityRelationService')),\n    entityGroupService = $injector.get(widgetContext.servicesMap.get('entityGroupService'));\n// userPermissionsService = $injector.get(widgetContext.servicesMap.get('userPermissionsService'));\n// let setted;\n// entityRelationService.findByTo(entityId).subscribe(function(data){\n//     setted = !!data.length;\n// });\n\nopenEditDeviceDialog();\n\nfunction openEditDeviceDialog() {\n    customDialog.customDialog(htmlTemplate, EditDeviceDialogController).subscribe();\n}\n\nfunction EditDeviceDialogController(instance) {\n    let vm = instance;\n\n    // vm.ownerId = userPermissionsService.getUserOwnerId();\n    // vm.excludeOwnerIds = [vm.ownerId.id];\n\n    vm.currentUserOwner = widgetContext.currentUser.tenantId; // For Tenant Only\n    vm.excludeOwnerIds = [ vm.currentUserOwner ];\n\n    vm.device = {};\n\n    vm.editDeviceFormGroup = vm.fb.group({\n        deviceName: ['', [vm.validators.required]],\n        deviceLabel: [null],\n        deviceOwnerId: [null, [vm.validators.required]]\n    });\n\n    getEntityInfo();\n\n    vm.cancel = function() {\n        vm.dialogRef.close(null);\n    };\n\n    vm.save = () => {\n        vm.loading = true;\n        vm.editDeviceFormGroup.markAsPristine();\n        saveDevice().subscribe(\n            (/*device*/) => {\n                changeDeviceOwner().subscribe(\n                    () => {\n                        vm.loading = false;\n                        widgetContext.updateAliases();\n                        vm.dialogRef.close(null);\n                    },\n                    () => {\n                        vm.loading = false;\n                    }\n                );\n            },\n            () => {\n                vm.loading = false;\n            }\n        );\n    };\n\n    function getEntityInfo() {\n        vm.loading = true;\n        deviceService.getDevice(entityId.id).subscribe(\n            (device) => {\n                vm.device = device;\n                vm.excludeOwnerIds.push(vm.device.ownerId);\n                vm.editDeviceFormGroup.patchValue({\n                    deviceName: vm.device.name,\n                    deviceLabel: vm.device.label,\n                    deviceOwnerId: vm.device.ownerId\n                }, {emitEvent: false});\n                vm.loading = false;\n            }\n        );\n    }\n\n    function saveDevice() {\n        const formValues = vm.editDeviceFormGroup.value;\n        if (vm.device.name !== formValues.deviceName || (vm.device.label !== formValues.deviceLabel)) {\n            vm.device.name = formValues.deviceName;\n            vm.device.label = formValues.deviceLabel;\n            return deviceService.saveDevice(vm.device);\n        }\n        return widgetContext.rxjs.of([]);\n    }\n\n    function changeDeviceOwner() {\n        let newOwnerId = vm.editDeviceFormGroup.get('deviceOwnerId').value;\n        if (newOwnerId.id !== vm.device.ownerId.id) {\n            return widgetContext.rxjs.forkJoin([\n                entityGroupService.changeEntityOwner(newOwnerId, vm.device.id, true),\n                saveRelations(vm.device.id, vm.device.ownerId, newOwnerId)\n            ]);\n        }\n        return widgetContext.rxjs.of([]);\n    }\n\n    function saveRelations(deviceId, currentOwnerId, newOwnerId) {\n        let tasks = [\n            deleteRelation(deviceId, currentOwnerId),\n            addRelation(deviceId, newOwnerId)\n        ];\n        return widgetContext.rxjs.forkJoin(tasks);\n    }\n\n    function addRelation(deviceId, customerId) {\n        let relation = {\n            type: 'Owns',\n            typeGroup: 'COMMON',\n            from: customerId,\n            to: deviceId\n        };\n\n        return entityRelationService.saveRelation(relation);\n    }\n\n    function deleteRelation(deviceId, customerId) {\n        let relation = {\n            type: 'Owns',\n            from: customerId,\n            to: deviceId\n        };\n\n        return entityRelationService.deleteRelation(relation.from, relation.type, relation.to);\n    }\n}",
                "customResources" : [ ],
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "702a8de4-6902-3545-223d-be481a8a29f5"
              }, {
                "name" : "Set Alarm Thresholds",
                "icon" : "notifications",
                "type" : "customPretty",
                "customHtml" : "<form #editDeviceForm=\"ngForm\" [formGroup]=\"editDeviceFormGroup\" class=\"edit-device-form\" (ngSubmit)=\"save()\">\n    <mat-toolbar class=\"edit-device-form-toolbar\" fxLayout=\"row\">\n        <h2>Thresholds Configuration</h2>\n        <span fxFlex></span>\n        <button mat-icon-button (click)=\"cancel()\" type=\"button\">\n            <mat-icon class=\"material-icons\">close</mat-icon>\n        </button>\n    </mat-toolbar>\n    <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\"></mat-progress-bar>\n    <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\n    <div mat-dialog-content fxLayout=\"column\">\n        <fieldset [disabled]=\"(isLoading$ | async) || loading\">\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Daily Consumption Threshold</mat-label>\n                    <input matInput type=\"number\" step=\"any\" formControlName=\"dailyConsumptionThreshold\">\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Weekly Consumption Threshold</mat-label>\n                    <input matInput type=\"number\" step=\"any\" formControlName=\"weeklyConsumptionThreshold\" >\n                </mat-form-field>\n            </div>\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Low Battery Threshold (%)</mat-label>\n                    <input matInput type=\"number\" step=\"any\" formControlName=\"lowBattThreshold\">\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Low Temperature Threshold</mat-label>\n                    <input matInput type=\"number\" step=\"any\" formControlName=\"lowTempThreshold\" >\n                </mat-form-field>\n            </div>\n            <mat-form-field fxFlex class=\"mat-block\">\n                <mat-label>Inactivity Timeout (ms)</mat-label>\n                <input matInput type=\"number\" step=\"1\" formControlName=\"inactivityTimeout\">\n                <mat-error *ngIf=\"editDeviceFormGroup.get('inactivityTimeout').hasError('pattern')\">\n                    Invalid value\n                </mat-error>\n            </mat-form-field>\n        </fieldset>\n    </div>\n    <div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\" class=\"edit-device-form-actions\">\n        <button mat-button color=\"primary\"\n                type=\"button\"\n                (click)=\"cancel()\" cdkFocusInitial>\n            Cancel\n        </button>\n        <button mat-button color=\"primary\"\n                type=\"submit\"\n                [disabled]=\"(isLoading$ | async) || loading || editDeviceForm.invalid || !editDeviceForm.dirty\">\n            Save\n        </button>\n    </div>\n</form>",
                "customCss" : ".edit-device-form mat-toolbar.edit-device-form-toolbar {\n    background-color: #ffffff;\n    color: #333333;\n}\n.edit-device-form .edit-device-form-actions button[mat-button][color=\"primary\"] {\n    border: 1px solid #E0E0E0;\n}",
                "customFunction" : "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog')),\n    attributeService = $injector.get(widgetContext.servicesMap.get('attributeService'));\n\nopenEditDeviceDialog();\n\nfunction openEditDeviceDialog() {\n    customDialog.customDialog(htmlTemplate, EditDeviceDialogController).subscribe();\n}\n\nfunction EditDeviceDialogController(instance) {\n    let vm = instance;\n\n    vm.attributes = {};\n    let attributesKeys = ['dailyConsumptionThreshold', 'weeklyConsumptionThreshold',\n        'lowBattThreshold', 'lowTempThreshold', 'inactivityTimeout'];\n\n    vm.editDeviceFormGroup = vm.fb.group({\n        dailyConsumptionThreshold: [null],\n        weeklyConsumptionThreshold: [null],\n        lowBattThreshold: [null],\n        lowTempThreshold: [null],\n        inactivityTimeout: [null, [vm.validators.pattern(/^-?[0-9]+$/)]]\n    });\n\n    getEntityInfo(attributesKeys);\n\n    vm.cancel = function() {\n        vm.dialogRef.close(null);\n    };\n\n    vm.save = () => {\n        vm.loading = true;\n        vm.editDeviceFormGroup.markAsPristine();\n        saveAttributes(entityId).subscribe(\n            () => {\n                vm.loading = false;\n                vm.dialogRef.close(null);\n            },\n            () => {\n                vm.loading = false;\n            }\n        );\n    };\n\n    function getEntityInfo(attributesKeys) {\n        vm.loading = true;\n        attributeService.getEntityAttributes(entityId, 'SERVER_SCOPE', attributesKeys).subscribe(\n            (data) => {\n                if (data.length) {\n                    getEntityAttributes(data);\n                    vm.editDeviceFormGroup.patchValue(vm.attributes, {emitEvent: false});\n                }\n                vm.loading = false;\n            }\n        );\n    }\n\n    function getEntityAttributes(attributes) {\n        for (let i = 0; i < attributes.length; i++) {\n            vm.attributes[attributes[i].key] = attributes[i].value;\n        }\n    }\n\n    function saveAttributes(entityId) {\n        let attributes = vm.editDeviceFormGroup.value;\n        let attributesArray = [];\n        for (let key in attributes) {\n            if (attributes[key] !== vm.attributes[key]) {\n                attributesArray.push({key: key, value: attributes[key]});\n            }\n        }\n        if (attributesArray.length > 0) {\n            return attributeService.saveEntityAttributes(entityId, \"SERVER_SCOPE\", attributesArray);\n        }\n        return widgetContext.rxjs.of([]);\n    }\n}",
                "customResources" : [ ],
                "id" : "f0ff3379-9600-c51d-fbe4-911a7d0d5af4"
              } ]
            }
          },
          "id" : "291ab4b2-f371-9897-6856-385e5745f430"
        },
        "c33ce26b-a96e-4de0-ae3b-7ddf92cf6555" : {
          "isSystemType" : true,
          "bundleAlias" : "alarm_widgets",
          "typeAlias" : "alarms_table",
          "type" : "alarm",
          "title" : "New widget",
          "sizeX" : 8,
          "sizeY" : 16,
          "config" : {
            "timewindow" : {
              "realtime" : {
                "interval" : 1000,
                "timewindowMs" : 2592000000
              },
              "aggregation" : {
                "type" : "NONE",
                "limit" : 200
              }
            },
            "showTitle" : true,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "4px",
            "settings" : {
              "enableSelection" : true,
              "enableSearch" : true,
              "displayDetails" : false,
              "allowAcknowledgment" : false,
              "allowClear" : true,
              "displayPagination" : false,
              "defaultPageSize" : 10,
              "defaultSortOrder" : "-createdTime",
              "alarmsTitle" : "Active Alarms",
              "enableSelectColumnDisplay" : true,
              "enableFilter" : true
            },
            "title" : "Active Alarms",
            "dropShadow" : false,
            "enableFullscreen" : false,
            "titleStyle" : {
              "fontSize" : "18px",
              "fontWeight" : 600,
              "padding" : "5px 10px 5px 5px"
            },
            "useDashboardTimewindow" : true,
            "showLegend" : false,
            "alarmSource" : {
              "type" : "entity",
              "name" : "alarms",
              "entityAliasId" : "f7bed459-ea25-5a39-bfc1-a3bb8c941d8d",
              "filterId" : null,
              "dataKeys" : [ {
                "name" : "createdTime",
                "type" : "alarm",
                "label" : "Created time",
                "color" : "#2196f3",
                "settings" : { },
                "_hash" : 0.8381664834025695
              }, {
                "name" : "originator",
                "type" : "alarm",
                "label" : "Originator",
                "color" : "#4caf50",
                "settings" : { },
                "_hash" : 0.2921772271979377
              }, {
                "name" : "type",
                "type" : "alarm",
                "label" : "Type",
                "color" : "#f44336",
                "settings" : {
                  "columnWidth" : "0px",
                  "useCellStyleFunction" : false,
                  "cellStyleFunction" : "",
                  "useCellContentFunction" : false,
                  "cellContentFunction" : ""
                },
                "_hash" : 0.5983551827511795
              } ]
            },
            "alarmSearchStatus" : "ACTIVE",
            "alarmsPollingInterval" : 5,
            "datasources" : [ ],
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableDataExport" : false,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "displayTimewindow" : false,
            "actions" : {
              "headerButton" : [ {
                "id" : "1f58fb76-87bf-235a-4ce8-e3b67bf3c834",
                "name" : "Alarms Details",
                "icon" : "fullscreen",
                "type" : "updateDashboardState",
                "targetDashboardStateId" : "alarms",
                "setEntityId" : false
              } ]
            },
            "alarmsMaxCountLoad" : 0,
            "alarmsFetchSize" : 100,
            "alarmStatusList" : [ "ACTIVE" ],
            "alarmSeverityList" : [ ],
            "alarmTypeList" : [ "Daily Consumption Threshold Exceeded", "Weekly Consumption Threshold Exceeded", "Low Battery", "Low Temperature", "Device Inactive", "Leakage Detected" ],
            "searchPropagatedAlarms" : true
          },
          "id" : "c33ce26b-a96e-4de0-ae3b-7ddf92cf6555"
        },
        "c2bdcb20-9d23-3ef4-34fd-950d8e322152" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "entities_table",
          "type" : "latest",
          "title" : "New widget",
          "sizeX" : 8,
          "sizeY" : 16,
          "config" : {
            "timewindow" : {
              "displayValue" : "",
              "selectedTab" : 0,
              "realtime" : {
                "realtimeType" : 1,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "quickInterval" : "CURRENT_DAY"
              },
              "history" : {
                "historyType" : 0,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "fixedTimewindow" : {
                  "startTimeMs" : 1684409450985,
                  "endTimeMs" : 1684495850985
                },
                "quickInterval" : "CURRENT_DAY"
              },
              "aggregation" : {
                "type" : "NONE",
                "limit" : 200
              }
            },
            "showTitle" : true,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "4px",
            "settings" : {
              "enableSearch" : true,
              "displayPagination" : false,
              "defaultPageSize" : 10,
              "displayEntityName" : true,
              "displayEntityType" : false,
              "defaultSortOrder" : "entityName",
              "entitiesTitle" : "Water Meters",
              "enableSelectColumnDisplay" : true,
              "entityNameColumnTitle" : "Serial Number"
            },
            "title" : "Water Meters",
            "dropShadow" : false,
            "enableFullscreen" : true,
            "titleStyle" : {
              "fontSize" : "18px",
              "fontWeight" : 600,
              "padding" : "5px 10px 5px 5px"
            },
            "useDashboardTimewindow" : false,
            "showLegend" : false,
            "datasources" : [ {
              "type" : "entity",
              "dataKeys" : [ {
                "name" : "meterReading",
                "type" : "timeseries",
                "label" : "Consumed",
                "color" : "#2196f3",
                "settings" : {
                  "columnWidth" : "0px",
                  "useCellStyleFunction" : false,
                  "useCellContentFunction" : false
                },
                "_hash" : 0.6622074305397865,
                "units" : "m³",
                "decimals" : 2,
                "postFuncBody" : "return value || 0;"
              }, {
                "name" : "active",
                "type" : "attribute",
                "label" : "Status",
                "color" : "#ffc107",
                "settings" : {
                  "columnWidth" : "0px",
                  "useCellStyleFunction" : false,
                  "useCellContentFunction" : false
                },
                "_hash" : 0.9076421001622259,
                "postFuncBody" : "if (value === 'true') {\n    return 'Active';\n} else {\n    return 'Inactive';\n}"
              } ],
              "entityAliasId" : "f7bed459-ea25-5a39-bfc1-a3bb8c941d8d"
            } ],
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableDataExport" : false,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "displayTimewindow" : true,
            "actions" : {
              "rowClick" : [ {
                "id" : "7f27dc96-fe24-d16d-91ce-9e11c875febb",
                "name" : "Device Details",
                "icon" : "more_horiz",
                "type" : "openDashboardState",
                "targetDashboardStateId" : "device_details",
                "setEntityId" : true
              } ],
              "headerButton" : [ ]
            }
          },
          "id" : "c2bdcb20-9d23-3ef4-34fd-950d8e322152"
        },
        "db53f985-2418-e36d-6b5d-c51eb80c6264" : {
          "isSystemType" : true,
          "bundleAlias" : "alarm_widgets",
          "typeAlias" : "alarms_table",
          "type" : "alarm",
          "title" : "New widget",
          "sizeX" : 24,
          "sizeY" : 16,
          "config" : {
            "timewindow" : {
              "realtime" : {
                "interval" : 1000,
                "timewindowMs" : 2592000000
              },
              "aggregation" : {
                "type" : "NONE",
                "limit" : 200
              }
            },
            "showTitle" : true,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "4px",
            "settings" : {
              "enableSelection" : true,
              "enableSearch" : true,
              "displayDetails" : true,
              "allowAcknowledgment" : true,
              "allowClear" : true,
              "displayPagination" : true,
              "defaultPageSize" : 10,
              "defaultSortOrder" : "-createdTime",
              "alarmsTitle" : "Alarms",
              "enableSelectColumnDisplay" : true,
              "enableFilter" : true
            },
            "title" : "Alarms",
            "dropShadow" : false,
            "enableFullscreen" : false,
            "titleStyle" : {
              "fontSize" : "18px",
              "fontWeight" : 600,
              "padding" : "5px 10px 5px 5px"
            },
            "useDashboardTimewindow" : true,
            "showLegend" : false,
            "alarmSource" : {
              "type" : "entity",
              "name" : "alarms",
              "entityAliasId" : "f7bed459-ea25-5a39-bfc1-a3bb8c941d8d",
              "filterId" : null,
              "dataKeys" : [ {
                "name" : "createdTime",
                "type" : "alarm",
                "label" : "Created time",
                "color" : "#2196f3",
                "settings" : { },
                "_hash" : 0.8381664834025695
              }, {
                "name" : "originator",
                "type" : "alarm",
                "label" : "Originator",
                "color" : "#4caf50",
                "settings" : { },
                "_hash" : 0.2921772271979377
              }, {
                "name" : "type",
                "type" : "alarm",
                "label" : "Type",
                "color" : "#f44336",
                "settings" : { },
                "_hash" : 0.3769001942764416
              }, {
                "name" : "severity",
                "type" : "alarm",
                "label" : "Severity",
                "color" : "#ffc107",
                "settings" : { },
                "_hash" : 0.45046333683628226
              }, {
                "name" : "status",
                "type" : "alarm",
                "label" : "Status",
                "color" : "#607d8b",
                "settings" : { },
                "_hash" : 0.7071153699227859
              } ]
            },
            "alarmSearchStatus" : "ANY",
            "alarmsPollingInterval" : 5,
            "datasources" : [ ],
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableDataExport" : false,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "displayTimewindow" : false,
            "actions" : { },
            "alarmsMaxCountLoad" : 0,
            "alarmsFetchSize" : 100,
            "alarmStatusList" : [ ],
            "alarmSeverityList" : [ ],
            "alarmTypeList" : [ "Daily Consumption Threshold Exceeded", "Weekly Consumption Threshold Exceeded", "Low Battery", "Low Temperature", "Device Inactive", "Leakage Detected" ],
            "searchPropagatedAlarms" : true
          },
          "id" : "db53f985-2418-e36d-6b5d-c51eb80c6264"
        },
        "6f23568a-5ed0-db6d-ce47-bf6ba1683e6c" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"total\">\n        <div class='description' id=\"total\">\n            Total\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation: Total",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "1d64528e-686d-0ba7-6e3a-8124e612a0f1",
                "name" : "total",
                "icon" : "more_horiz",
                "type" : "custom",
                "customFunction" : "var stateIndex = widgetContext.stateController\n        .getStateIndex();\nwhile (stateIndex > 0) {\n    stateIndex -= 1;\n    backToPrevState(stateIndex);\n}\n\nopenDashboardState('default');\n\nfunction backToPrevState(stateIndex) {\n    widgetContext.stateController.navigatePrevState(\n        stateIndex);\n}\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}"
              } ]
            }
          },
          "id" : "6f23568a-5ed0-db6d-ce47-bf6ba1683e6c"
        },
        "391e3afb-9cd1-6d1c-e6e6-ddc788d6bef2" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"analytics\">\n        <div class='description' id=\"analytics\">\n            Analytics\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Analytics",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "analytics",
                "icon" : "more_horiz",
                "type" : "custom",
                "customFunction" : "var stateIndex = widgetContext.stateController\n        .getStateIndex();\nwhile (stateIndex > 0) {\n    stateIndex -= 1;\n    backToPrevState(stateIndex);\n}\nopenDashboardState('analytics');\n\nfunction backToPrevState(stateIndex) {\n    widgetContext.stateController.navigatePrevState(\n        stateIndex);\n}\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}"
              } ]
            }
          },
          "id" : "391e3afb-9cd1-6d1c-e6e6-ddc788d6bef2"
        },
        "8838c3d4-e8d7-05b9-f97f-a79ff9a03d3b" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"devices\">\n        <div class='description' id=\"devices\">\n            Devices\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Devices",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "devices",
                "icon" : "more_horiz",
                "type" : "custom",
                "customFunction" : "var stateIndex = widgetContext.stateController\n        .getStateIndex();\nwhile (stateIndex > 0) {\n    stateIndex -= 1;\n    backToPrevState(stateIndex);\n}\nopenDashboardState('devices');\n\nfunction backToPrevState(stateIndex) {\n    widgetContext.stateController.navigatePrevState(\n        stateIndex);\n}\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}"
              } ]
            }
          },
          "id" : "8838c3d4-e8d7-05b9-f97f-a79ff9a03d3b"
        },
        "74a4f4ed-d830-538b-9ee0-27ffd4c4b66c" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id='users'>\n        <div class='description' id='users'>\n            Users\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Users",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "users",
                "icon" : "more_horiz",
                "type" : "custom",
                "customFunction" : "var stateIndex = widgetContext.stateController\n        .getStateIndex();\nwhile (stateIndex > 0) {\n    stateIndex -= 1;\n    backToPrevState(stateIndex);\n}\nopenDashboardState('users');\n\nfunction backToPrevState(stateIndex) {\n    widgetContext.stateController.navigatePrevState(\n        stateIndex);\n}\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}"
              } ]
            }
          },
          "id" : "74a4f4ed-d830-538b-9ee0-27ffd4c4b66c"
        },
        "04a5ced4-7ce0-ec3a-fb79-a6a8e47e0d7e" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"alarms\">\n        <div class='description' id=\"alarms\">\n            Alarms\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Alarms",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "alarms",
                "icon" : "more_horiz",
                "type" : "custom",
                "customFunction" : "var stateIndex = widgetContext.stateController\n        .getStateIndex();\nwhile (stateIndex > 0) {\n    stateIndex -= 1;\n    backToPrevState(stateIndex);\n}\nopenDashboardState('alarms');\n\nfunction backToPrevState(stateIndex) {\n    widgetContext.stateController.navigatePrevState(\n        stateIndex);\n}\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}"
              } ]
            }
          },
          "id" : "04a5ced4-7ce0-ec3a-fb79-a6a8e47e0d7e"
        },
        "2dc142e5-6fa4-263c-0f42-1e67db568682" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"settings\">\n        <div class='description' id=\"settings\">\n            Settings\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Settings",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "settings",
                "icon" : "more_horiz",
                "type" : "custom",
                "customFunction" : "var stateIndex = widgetContext.stateController\n        .getStateIndex();\nwhile (stateIndex > 0) {\n    stateIndex -= 1;\n    backToPrevState(stateIndex);\n}\nopenDashboardState('settings');\n\nfunction backToPrevState(stateIndex) {\n    widgetContext.stateController.navigatePrevState(\n        stateIndex);\n}\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}"
              } ]
            }
          },
          "id" : "2dc142e5-6fa4-263c-0f42-1e67db568682"
        },
        "1bfaeb7d-8b3c-d7cb-20bb-3cb9bcca4b7c" : {
          "isSystemType" : true,
          "bundleAlias" : "alarm_widgets",
          "typeAlias" : "alarms_table",
          "type" : "alarm",
          "title" : "New widget",
          "sizeX" : 8,
          "sizeY" : 12,
          "config" : {
            "timewindow" : {
              "realtime" : {
                "interval" : 1000,
                "timewindowMs" : 2592000000
              },
              "aggregation" : {
                "type" : "NONE",
                "limit" : 200
              }
            },
            "showTitle" : true,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "4px",
            "settings" : {
              "enableSelection" : true,
              "enableSearch" : true,
              "displayDetails" : false,
              "allowAcknowledgment" : false,
              "allowClear" : true,
              "displayPagination" : false,
              "defaultPageSize" : 10,
              "defaultSortOrder" : "-createdTime",
              "alarmsTitle" : "Active Alarms",
              "enableSelectColumnDisplay" : true,
              "enableFilter" : true,
              "enableStickyHeader" : true
            },
            "title" : "Active Alarms",
            "dropShadow" : false,
            "enableFullscreen" : false,
            "titleStyle" : {
              "fontSize" : "18px",
              "fontWeight" : 600,
              "padding" : "5px 10px 5px 5px"
            },
            "useDashboardTimewindow" : true,
            "showLegend" : false,
            "alarmSource" : {
              "type" : "entity",
              "name" : "alarms",
              "entityAliasId" : "2754dd92-28a3-a689-d65c-ab9001a86f73",
              "filterId" : null,
              "dataKeys" : [ {
                "name" : "createdTime",
                "type" : "alarm",
                "label" : "Created time",
                "color" : "#2196f3",
                "settings" : { },
                "_hash" : 0.8381664834025695
              }, {
                "name" : "type",
                "type" : "alarm",
                "label" : "Type",
                "color" : "#f44336",
                "settings" : {
                  "columnWidth" : "0px",
                  "useCellStyleFunction" : false,
                  "cellStyleFunction" : "",
                  "useCellContentFunction" : false,
                  "cellContentFunction" : ""
                },
                "_hash" : 0.6632477787428679
              } ]
            },
            "alarmSearchStatus" : "ACTIVE",
            "alarmsPollingInterval" : 5,
            "datasources" : [ ],
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableDataExport" : false,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "displayTimewindow" : false,
            "actions" : {
              "headerButton" : [ {
                "id" : "1f58fb76-87bf-235a-4ce8-e3b67bf3c834",
                "name" : "Alarms Details",
                "icon" : "fullscreen",
                "type" : "openDashboardState",
                "targetDashboardStateId" : "device_alarms",
                "setEntityId" : false
              } ]
            },
            "alarmsMaxCountLoad" : 0,
            "alarmsFetchSize" : 100,
            "alarmTypeList" : [ "Daily Consumption Threshold Exceeded", "Weekly Consumption Threshold Exceeded", "Low Battery", "Low Temperature", "Device Inactive", "Leakage Detected" ]
          },
          "id" : "1bfaeb7d-8b3c-d7cb-20bb-3cb9bcca4b7c"
        },
        "6fb621cb-94da-2f0e-1561-83699315ee3e" : {
          "isSystemType" : true,
          "bundleAlias" : "charts",
          "typeAlias" : "timeseries_bars_flot",
          "type" : "timeseries",
          "title" : "New widget",
          "sizeX" : 24,
          "sizeY" : 11,
          "config" : {
            "datasources" : [ {
              "type" : "entity",
              "name" : null,
              "entityAliasId" : "2754dd92-28a3-a689-d65c-ab9001a86f73",
              "filterId" : null,
              "dataKeys" : [ {
                "name" : "meterReadingDelta",
                "type" : "timeseries",
                "label" : "Consumption",
                "color" : "#2196f3",
                "settings" : {
                  "showLines" : false,
                  "fillLines" : false,
                  "showPoints" : false,
                  "showPointsRadius" : 3,
                  "showSeparateAxis" : false,
                  "axisPosition" : "left",
                  "showPointShape" : "circle",
                  "pointShapeFormatter" : "var size = radius * Math.sqrt(Math.PI) / 2;\nctx.moveTo(x - size, y - size);\nctx.lineTo(x + size, y + size);\nctx.moveTo(x - size, y + size);\nctx.lineTo(x + size, y - size);",
                  "showPointsLineWidth" : 5,
                  "comparisonSettings" : {
                    "showValuesForComparison" : true
                  }
                },
                "_hash" : 0.5140945609133167,
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : null,
                "postFuncBody" : null
              } ]
            } ],
            "timewindow" : {
              "realtime" : {
                "interval" : 3600000,
                "timewindowMs" : 604800000
              },
              "aggregation" : {
                "type" : "SUM",
                "limit" : 200
              }
            },
            "showTitle" : true,
            "backgroundColor" : "#fff",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "8px",
            "settings" : {
              "shadowSize" : 4,
              "fontColor" : "#545454",
              "fontSize" : 10,
              "xaxis" : {
                "showLabels" : true,
                "color" : "#545454"
              },
              "yaxis" : {
                "showLabels" : true,
                "color" : "#545454",
                "tickDecimals" : 1
              },
              "grid" : {
                "color" : "#ffffff",
                "tickColor" : "#DDDDDD",
                "verticalLines" : false,
                "horizontalLines" : true,
                "outlineWidth" : 1
              },
              "stack" : true,
              "tooltipIndividual" : false,
              "defaultBarWidth" : 1800000,
              "timeForComparison" : "months",
              "xaxisSecond" : {
                "axisPosition" : "top",
                "showLabels" : true
              },
              "barAlignment" : "center"
            },
            "title" : "Water Consumption",
            "dropShadow" : false,
            "enableFullscreen" : false,
            "titleStyle" : {
              "fontSize" : "18px",
              "fontWeight" : 600,
              "padding" : "5px 10px 5px 5px"
            },
            "mobileHeight" : null,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "useDashboardTimewindow" : true,
            "showLegend" : true,
            "actions" : { },
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableDataExport" : false,
            "units" : "m³",
            "decimals" : 2,
            "displayTimewindow" : false,
            "legendConfig" : {
              "direction" : "column",
              "position" : "bottom",
              "sortDataKeys" : false,
              "showMin" : false,
              "showMax" : false,
              "showAvg" : false,
              "showTotal" : true
            }
          },
          "id" : "6fb621cb-94da-2f0e-1561-83699315ee3e"
        },
        "fd0cad3c-cb76-a2c5-446a-4bc280adfee1" : {
          "isSystemType" : true,
          "bundleAlias" : "alarm_widgets",
          "typeAlias" : "alarms_table",
          "type" : "alarm",
          "title" : "New widget",
          "sizeX" : 32,
          "sizeY" : 14,
          "config" : {
            "timewindow" : {
              "realtime" : {
                "interval" : 1000,
                "timewindowMs" : 2592000000
              },
              "aggregation" : {
                "type" : "NONE",
                "limit" : 200
              }
            },
            "showTitle" : true,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "4px",
            "settings" : {
              "enableSelection" : true,
              "enableSearch" : true,
              "displayDetails" : true,
              "allowAcknowledgment" : true,
              "allowClear" : true,
              "displayPagination" : true,
              "defaultPageSize" : 10,
              "defaultSortOrder" : "-createdTime",
              "alarmsTitle" : "Alarms"
            },
            "title" : "Alarms",
            "dropShadow" : false,
            "enableFullscreen" : false,
            "titleStyle" : {
              "fontSize" : "18px",
              "fontWeight" : 600,
              "padding" : "5px 10px 5px 5px"
            },
            "useDashboardTimewindow" : false,
            "showLegend" : false,
            "alarmSource" : {
              "type" : "entity",
              "dataKeys" : [ {
                "name" : "createdTime",
                "type" : "alarm",
                "label" : "Created time",
                "color" : "#2196f3",
                "settings" : { },
                "_hash" : 0.32271162435866696
              }, {
                "name" : "originator",
                "type" : "alarm",
                "label" : "Originator",
                "color" : "#4caf50",
                "settings" : { },
                "_hash" : 0.5289265043998732
              }, {
                "name" : "details.meterId",
                "type" : "alarm",
                "label" : "Serial Number",
                "color" : "#9c27b0",
                "settings" : {
                  "columnWidth" : "0px",
                  "useCellStyleFunction" : false,
                  "useCellContentFunction" : false
                },
                "_hash" : 0.9148549754772513
              }, {
                "name" : "type",
                "type" : "alarm",
                "label" : "Type",
                "color" : "#f44336",
                "settings" : { },
                "_hash" : 0.6799953560962899
              }, {
                "name" : "severity",
                "type" : "alarm",
                "label" : "Severity",
                "color" : "#ffc107",
                "settings" : { },
                "_hash" : 0.18391967117871633
              }, {
                "name" : "status",
                "type" : "alarm",
                "label" : "Status",
                "color" : "#607d8b",
                "settings" : { },
                "_hash" : 0.004003465189153399
              } ],
              "entityAliasId" : "2754dd92-28a3-a689-d65c-ab9001a86f73",
              "name" : "alarms"
            },
            "alarmSearchStatus" : "ANY",
            "alarmTypeList" : [ "Daily Consumption Threshold Exceeded", "Weekly Consumption Threshold Exceeded", "Low Battery", "Low Temperature", "Device Inactive", "Leakage Detected" ],
            "alarmsPollingInterval" : 5,
            "datasources" : [ ],
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableDataExport" : false,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "displayTimewindow" : false,
            "actions" : { }
          },
          "id" : "fd0cad3c-cb76-a2c5-446a-4bc280adfee1"
        },
        "51f6f10f-c491-9e27-04d5-a235ca4fc16c" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_value_card",
          "type" : "latest",
          "title" : "New widget",
          "sizeX" : 8,
          "sizeY" : 6,
          "config" : {
            "datasources" : [ {
              "type" : "entity",
              "name" : null,
              "entityAliasId" : "2754dd92-28a3-a689-d65c-ab9001a86f73",
              "filterId" : null,
              "dataKeys" : [ {
                "name" : "address",
                "type" : "attribute",
                "label" : "address",
                "color" : "#2196f3",
                "settings" : { },
                "_hash" : 0.3720490623582047
              }, {
                "name" : "city",
                "type" : "attribute",
                "label" : "city",
                "color" : "#4caf50",
                "settings" : { },
                "_hash" : 0.25278625786131736
              }, {
                "name" : "region",
                "type" : "attribute",
                "label" : "region",
                "color" : "#f44336",
                "settings" : { },
                "_hash" : 0.406715359974553
              }, {
                "name" : "comment",
                "type" : "attribute",
                "label" : "comment",
                "color" : "#ffc107",
                "settings" : { },
                "_hash" : 0.4865582381169573
              }, {
                "name" : "installationDate",
                "type" : "attribute",
                "label" : "installationDate",
                "color" : "#607d8b",
                "settings" : { },
                "_hash" : 0.5991750424489664
              }, {
                "name" : "responsibleFullName",
                "type" : "attribute",
                "label" : "responsibleFullName",
                "color" : "#9c27b0",
                "settings" : { },
                "_hash" : 0.9025807394125946
              }, {
                "name" : "name",
                "type" : "entityField",
                "label" : "Name",
                "color" : "#8bc34a",
                "settings" : { },
                "_hash" : 0.1909754642110395
              } ]
            } ],
            "timewindow" : {
              "displayValue" : "",
              "selectedTab" : 0,
              "realtime" : {
                "realtimeType" : 1,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "quickInterval" : "CURRENT_DAY"
              },
              "history" : {
                "historyType" : 0,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "fixedTimewindow" : {
                  "startTimeMs" : 1684409450985,
                  "endTimeMs" : 1684495850985
                },
                "quickInterval" : "CURRENT_DAY"
              },
              "aggregation" : {
                "type" : "AVG",
                "limit" : 25000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "#fff",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0px",
            "settings" : {
              "cardHtml" : "<script type=\"text/javascript\" charset=\"utf-8\">\n    var inner = document.getElementById(\"attr\");\n    var isInner = (new Boolean(inner.innerText)).toString();\n    if(isInner == \"false\") {\n        document.getElementById(\"install\").style.display = \"none\";\n        document.getElementById(\"address\").style.display = \"none\";\n    }\n</script>\n<div class='card'>\n    <div class=\"header\">\n        <span>Інформація</span>\n    </div>\n    <div class='content'>\n        <div class=\"row\">\n            <span class='description'>Назва:</span>\n            <span class='value'>${entityName:0}</span> \n        </div>\n        <div class=\"row\" id=\"address\">\n            <span class='description'>Адреса:</span>\n            <span class='value'>${address}, ${city}, ${region}</span> \n        </div>\n        <div class=\"row\" id=\"install\">\n            <span class='description'>Дата встановлення:</span>\n            <span class='value' id=\"attr\">${installationDate}</span> \n        </div>\n        <div class=\"row\">\n            <span class='description'>Відповідальний:</span>\n            <span class='value'>${responsibleFullName}</span> \n        </div>\n        <div class=\"divider\"></div>\n        <div class=\"row\">\n            <span class='description'>Коментар:</span>\n            <span class='value'>${comment}</span> \n        </div>\n    </div>\n</div>",
              "cardCss" : ".card {\n    width: 100%;\n    height: 100%;\n    border-top: 1px solid #E0E0E0;\n    box-sizing: border-box;\n    display: flex;\n    flex-direction: column;\n}\n\n.card .header {\n  font-size: 1.15em;\n  font-weight: 600;\n  padding: 10px 10px 5px 10px;\n  border-bottom: 1px solid #E0E0E0\n}\n\n.card .content {\n   padding: 0 12px 10px 12px;\n   display: flex;\n   flex-direction: column;\n   /*align-items: stretch;*/\n   justify-content: flex-start;\n   height: 100%;\n   overflow-y: auto;\n   box-sizing: border-box;\n}\n\n.card .row {\n    display: flex;\n    align-items: flex-end;\n    justify-content: space-between;\n    padding: 5px 5px 5px 0;\n}\n\n.card .divider {\n    border: 1px solid #F2F2F2;\n    margin: 5px -5px;\n}\n\n.card .value {\n    font-size: 1em;\n    line-height: 1.5;\n    color: #333333;\n    text-align: right;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    text-transform: uppercase;\n    color: #333333;\n}\n\n@media (min-width: 960px) and (max-width: 1200px) {\n    .card .header {\n        font-size: 0.9em;\n    }\n    .card .value {\n        font-size: 0.7em;\n        line-height: 1;\n    }\n    .card .description {\n        font-size: 0.6em;\n        line-height: 1;\n    }\n}"
            },
            "title" : "Info",
            "dropShadow" : false,
            "enableFullscreen" : false,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "18px",
              "fontWeight" : 600,
              "padding" : "5px 10px 5px 5px"
            },
            "useDashboardTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "headerButton" : [ {
                "name" : "Edit Info",
                "icon" : "edit",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "customPretty",
                "customHtml" : "<form #editEntityForm=\"ngForm\" [formGroup]=\"editEntityFormGroup\"\r\n      (ngSubmit)=\"save()\"  class=\"edit-entity-form\">\r\n    <mat-toolbar fxLayout=\"row\" color=\"primary\">\r\n        <h2>Редагувати об'єкт</h2>\r\n        <span fxFlex></span>\r\n        <button mat-icon-button (click)=\"cancel()\" type=\"button\">\r\n            <mat-icon class=\"material-icons\">close</mat-icon>\r\n        </button>\r\n    </mat-toolbar>\r\n    <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\">\r\n    </mat-progress-bar>\r\n    <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\r\n    <div mat-dialog-content fxLayout=\"column\">\r\n        <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\"  fxLayoutGap.xs=\"0\">\r\n            <mat-form-field fxFlex class=\"mat-block\">\r\n                <mat-label>Назва</mat-label>\r\n                <input matInput formControlName=\"entityName\" required readonly=\"\">\r\n            </mat-form-field>\r\n            <mat-form-field fxFlex class=\"mat-block\">\r\n                <mat-label>Тип</mat-label>\r\n                <input matInput formControlName=\"type\" readonly=\"\">\r\n            </mat-form-field>\r\n        </div>\r\n\r\n        <div formGroupName=\"attributes\" fxLayout=\"column\">\r\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\"  fxLayoutGap.xs=\"0\">\r\n                <tb-entity-autocomplete\r\n                  formControlName=\"responsibleId\"\r\n                  [entityType]=\"'USER'\">\r\n                </tb-entity-autocomplete>\r\n                \r\n                <mat-form-field fxFlex=\"50\" class=\"mat-block\">\r\n                    <mat-label>Коментар</mat-label>\r\n                    <input matInput formControlName=\"comment\">\r\n                </mat-form-field>\r\n            </div>\r\n        </div>\r\n        <div class=\"relations-list old-relations\">\r\n            <div class=\"mat-body-1\" style=\"padding-bottom: 10px; color: rgba(0,0,0,0.57);\">Relations</div>\r\n            <div class=\"body\" [fxShow]=\"oldRelations().length\">\r\n                <div class=\"row\" fxLayout=\"row\" fxLayoutAlign=\"start center\" formArrayName=\"oldRelations\" \r\n                     *ngFor=\"let relation of oldRelations().controls; let i = index;\">\r\n                    <div [formGroupName]=\"i\" class=\"mat-elevation-z2\" fxFlex fxLayout=\"row\" style=\"padding: 5px 0 5px 5px;\">\r\n                        <div fxFlex fxLayout=\"column\">\r\n                            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\"  fxLayoutGap.xs=\"0\">\r\n                                <mat-form-field class=\"mat-block\" style=\"min-width: 100px;\">\r\n                                    <mat-label>Direction</mat-label>\r\n                                    <mat-select formControlName=\"direction\" name=\"direction\">\r\n                                        <mat-option *ngFor=\"let direction of entitySearchDirection | keyvalue\" [value]=\"direction.value\">\r\n                                            <span>{{direction.value}}</span>\r\n                                        </mat-option>\r\n                                    </mat-select>\r\n                                    <mat-error *ngIf=\"relation.get('direction').hasError('required')\">\r\n                                        Relation direction is required.\r\n                                    </mat-error>\r\n                                </mat-form-field>\r\n                                <tb-relation-type-autocomplete\r\n                                        fxFlex class=\"mat-block\"\r\n                                        formControlName=\"relationType\"\r\n                                        required=\"true\">\r\n                                </tb-relation-type-autocomplete>\r\n                            </div>\r\n                            <div fxLayout=\"row\" fxLayout.xs=\"column\">\r\n                                <tb-entity-select\r\n                                        fxFlex class=\"mat-block\"\r\n                                        required=\"true\"\r\n                                        formControlName=\"relatedEntity\">\r\n                                </tb-entity-select>\r\n                            </div>\r\n                        </div>\r\n                        <div fxLayout=\"column\" fxLayoutAlign=\"center center\">\r\n                            <button mat-icon-button color=\"primary\"\r\n                                    aria-label=\"Remove\"\r\n                                    type=\"button\"\r\n                                    (click)=\"removeOldRelation(i)\"\r\n                                    matTooltip=\"Remove relation\"\r\n                                    matTooltipPosition=\"above\">\r\n                                <mat-icon>close</mat-icon>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"relations-list\">\r\n            <div class=\"mat-body-1\" style=\"padding-bottom: 10px; color: rgba(0,0,0,0.57);\">New Relations</div>\r\n            <div class=\"body\" [fxShow]=\"relations().length\">\r\n                <div class=\"row\" fxLayout=\"row\" fxLayoutAlign=\"start center\" formArrayName=\"relations\" *ngFor=\"let relation of relations().controls; let i = index;\">\r\n                    <div [formGroupName]=\"i\" class=\"mat-elevation-z2\" fxFlex fxLayout=\"row\" style=\"padding: 5px 0 5px 5px;\">\r\n                        <div fxFlex fxLayout=\"column\">\r\n                            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\"  fxLayoutGap.xs=\"0\">\r\n                                <mat-form-field class=\"mat-block\" style=\"min-width: 100px;\">\r\n                                    <mat-label>Direction</mat-label>\r\n                                    <mat-select formControlName=\"direction\" name=\"direction\">\r\n                                        <mat-option *ngFor=\"let direction of entitySearchDirection | keyvalue\" [value]=\"direction.value\">\r\n                                            <span>{{direction.value}}</span>\r\n                                        </mat-option>\r\n                                    </mat-select>\r\n                                    <mat-error *ngIf=\"relation.get('direction').hasError('required')\">\r\n                                        Relation direction is required.\r\n                                    </mat-error>\r\n                                </mat-form-field>\r\n                                <tb-relation-type-autocomplete\r\n                                        fxFlex class=\"mat-block\"\r\n                                        formControlName=\"relationType\"\r\n                                        [required]=\"true\">\r\n                                </tb-relation-type-autocomplete>\r\n                            </div>\r\n                            <div fxLayout=\"row\" fxLayout.xs=\"column\">\r\n                                <tb-entity-select\r\n                                        fxFlex class=\"mat-block\"\r\n                                        [required]=\"true\"\r\n                                        formControlName=\"relatedEntity\">\r\n                                </tb-entity-select>\r\n                            </div>\r\n                        </div>\r\n                        <div fxLayout=\"column\" fxLayoutAlign=\"center center\">\r\n                            <button mat-icon-button color=\"primary\"\r\n                                    aria-label=\"Remove\"\r\n                                    type=\"button\"\r\n                                    (click)=\"removeRelation(i)\"\r\n                                    matTooltip=\"Remove relation\"\r\n                                    matTooltipPosition=\"above\">\r\n                                <mat-icon>close</mat-icon>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div>\r\n                <button mat-raised-button color=\"primary\"\r\n                        type=\"button\"\r\n                        (click)=\"addRelation()\"\r\n                        matTooltip=\"Add Relation\"\r\n                        matTooltipPosition=\"above\">\r\n                    Додати\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\">\r\n        <button mat-button color=\"primary\"\r\n                type=\"button\"\r\n                [disabled]=\"(isLoading$ | async)\"\r\n                (click)=\"cancel()\" cdkFocusInitial>\r\n            Закрити\r\n        </button>\r\n        <button mat-button mat-raised-button color=\"primary\"\r\n                type=\"submit\"\r\n                [disabled]=\"(isLoading$ | async) || editEntityForm.invalid || !editEntityForm.dirty\">\r\n            Оновити\r\n        </button>\r\n    </div>\r\n</form>",
                "customCss" : ".edit-device-form mat-toolbar.edit-device-form-toolbar {\n    background-color: #ffffff;\n    color: #333333;\n}\n.edit-device-form .edit-device-form-actions button[mat-button][color=\"primary\"] {\n    border: 1px solid #E0E0E0;\n}",
                "customFunction" : "let $injector = widgetContext.$scope.$injector;\r\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog'));\r\nlet entityService = $injector.get(widgetContext.servicesMap.get('entityService'));\r\nlet assetService = $injector.get(widgetContext.servicesMap.get('assetService'));\r\nlet deviceService = $injector.get(widgetContext.servicesMap.get('deviceService'));\r\nlet attributeService = $injector.get(widgetContext.servicesMap.get('attributeService'));\r\nlet entityRelationService = $injector.get(widgetContext.servicesMap.get('entityRelationService'));\r\n\r\nopenEditEntityDialog();\r\n\r\nfunction openEditEntityDialog() {\r\ncustomDialog.customDialog(htmlTemplate, EditEntityDialogController).subscribe();\r\n}\r\n\r\nfunction EditEntityDialogController(instance) {\r\nlet vm = instance;\r\n\r\n    vm.entityName = entityName;\r\n    vm.entityType = entityId.entityType;\r\n    vm.entitySearchDirection = {\r\n        from: \"FROM\",\r\n        to: \"TO\"\r\n    };\r\n    vm.attributes = {};\r\n    vm.oldRelationsData = [];\r\n    vm.relationsToDelete = [];\r\n    vm.entity = {};\r\n\r\n    vm.editEntityFormGroup = vm.fb.group({\r\n        entityName: ['', [vm.validators.required]],\r\n        entityType: [null],\r\n        entityLabel: [null],\r\n        type: ['', [vm.validators.required]],\r\n        attributes: vm.fb.group({\r\n          address: [null, [vm.validators.required]],\r\n          city:[null, [vm.validators.required]],\r\n          region: [null, [vm.validators.required]],\r\n          responsibleId: [null],\r\n          responsibleFullName: [null],\r\n          responsibleEmail: [null],\r\n          comment: [null]\r\n        }),\r\n        oldRelations: vm.fb.array([]),\r\n        relations: vm.fb.array([])\r\n    });\r\n\r\n    getEntityInfo();\r\n\r\n    vm.cancel = function() {\r\n        vm.dialogRef.close(null);\r\n    };\r\n\r\n    vm.relations = function() {\r\n        return vm.editEntityFormGroup.get('relations');\r\n    };\r\n\r\n    vm.oldRelations = function() {\r\n        return vm.editEntityFormGroup.get('oldRelations');\r\n    };\r\n\r\n    vm.addRelation = function() {\r\n        vm.relations().push(vm.fb.group({\r\n            relatedEntity: [null, [vm.validators.required]],\r\n            relationType: [\"Contains\", [vm.validators.required]],\r\n            direction: [\"FROM\", [vm.validators.required]]\r\n        }));\r\n    };\r\n\r\n    function addOldRelation() {\r\n        vm.oldRelations().push(vm.fb.group({\r\n            relatedEntity: [{value: null, disabled: true}, [vm.validators.required]],\r\n            relationType: [{value: null, disabled: true}, [vm.validators.required]],\r\n            direction: [{value: null, disabled: true}, [vm.validators.required]]\r\n        }));\r\n    }\r\n\r\n    vm.removeRelation = function(index) {\r\n        vm.relations().removeAt(index);\r\n        vm.relations().markAsDirty();\r\n    };\r\n\r\n    vm.removeOldRelation = function(index) {\r\n        vm.oldRelations().removeAt(index);\r\n        vm.relationsToDelete.push(vm.oldRelationsData[index]);\r\n        vm.oldRelations().markAsDirty();\r\n    };\r\n\r\n    vm.save = function() {\r\n        vm.editEntityFormGroup.markAsPristine();\r\n        let respId = vm.editEntityFormGroup.get('attributes').value.responsibleId;\r\n        let userObservable = widgetContext.userService.getUser(respId);\r\n        userObservable.toPromise().then(function(userResponse) {\r\n            vm.editEntityFormGroup.get('attributes').value.responsibleEmail = userResponse.email;\r\n            vm.editEntityFormGroup.get('attributes').value.responsibleFullName = userResponse.firstName +' '+ userResponse.lastName;\r\n        })\r\n        .catch(function(e){\r\n            console.log(e);\r\n        });\r\n        widgetContext.rxjs.forkJoin([\r\n            saveAttributes(entityId),\r\n            saveRelations(entityId),\r\n            saveEntity()\r\n        ]).subscribe(\r\n            function () {\r\n                widgetContext.updateAliases();\r\n                vm.dialogRef.close(null);\r\n            }\r\n        );\r\n    };\r\n\r\n    function getEntityAttributes(attributes) {\r\n        for (var i = 0; i < attributes.length; i++) {\r\n            vm.attributes[attributes[i].key] = attributes[i].value;\r\n        }\r\n    }\r\n\r\n    function getEntityRelations(relations) {\r\n        let relationsFrom = relations[0];\r\n        let relationsTo = relations[1];\r\n        for (let i=0; i < relationsFrom.length; i++) {\r\n            let relation = {\r\n                direction: 'FROM',\r\n                relationType: relationsFrom[i].type,\r\n                relatedEntity: relationsFrom[i].to\r\n            };\r\n            vm.oldRelationsData.push(relation);\r\n            addOldRelation();\r\n        }\r\n        for (let i=0; i < relationsTo.length; i++) {\r\n            let relation = {\r\n                direction: 'TO',\r\n                relationType: relationsTo[i].type,\r\n                relatedEntity: relationsTo[i].from\r\n            };\r\n            vm.oldRelationsData.push(relation);\r\n            addOldRelation();\r\n        }\r\n    }\r\n\r\n    function getEntityInfo() {\r\n        widgetContext.rxjs.forkJoin([\r\n            entityRelationService.findInfoByFrom(entityId),\r\n            entityRelationService.findInfoByTo(entityId),\r\n            attributeService.getEntityAttributes(entityId, 'SERVER_SCOPE'),\r\n            entityService.getEntity(entityId.entityType, entityId.id)\r\n        ]).subscribe(\r\n            function (data) {\r\n                getEntityRelations(data.slice(0,2));\r\n                getEntityAttributes(data[2]);\r\n                vm.entity = data[3];\r\n                vm.editEntityFormGroup.patchValue({\r\n                    entityName: vm.entity.name,\r\n                    entityType: vm.entityType,\r\n                    entityLabel: vm.entity.label,\r\n                    type: vm.entity.type,\r\n                    attributes: vm.attributes,\r\n                    oldRelations: vm.oldRelationsData\r\n                }, {emitEvent: false});\r\n            }\r\n        );\r\n    }\r\n\r\n    function saveEntity() {\r\n        const formValues = vm.editEntityFormGroup.value;\r\n        if (vm.entity.label !== formValues.entityLabel){\r\n            vm.entity.label = formValues.entityLabel;\r\n            if (formValues.entityType == 'ASSET') {\r\n                return assetService.saveAsset(vm.entity);\r\n            } else if (formValues.entityType == 'DEVICE') {\r\n                return deviceService.saveDevice(vm.entity);\r\n            }\r\n        }\r\n        return widgetContext.rxjs.of([]);\r\n    }\r\n\r\n    function saveAttributes(entityId) {\r\n        let attributes = vm.editEntityFormGroup.get('attributes').value;\r\n        let attributesArray = [];\r\n        for (let key in attributes) {\r\n            if (attributes[key] !== vm.attributes[key]) {\r\n                attributesArray.push({key: key, value: attributes[key]});\r\n            }\r\n        }\r\n        if (attributesArray.length > 0) {\r\n            return attributeService.saveEntityAttributes(entityId, \"SERVER_SCOPE\", attributesArray);\r\n        }\r\n        return widgetContext.rxjs.of([]);\r\n    }\r\n\r\n    function saveRelations(entityId) {\r\n        let relations = vm.editEntityFormGroup.get('relations').value;\r\n        let tasks = [];\r\n        for(let i=0; i < relations.length; i++) {\r\n            let relation = {\r\n                type: relations[i].relationType,\r\n                typeGroup: 'COMMON'\r\n            };\r\n            if (relations[i].direction == 'FROM') {\r\n                relation.to = relations[i].relatedEntity;\r\n                relation.from = entityId;\r\n            } else {\r\n                relation.to = entityId;\r\n                relation.from = relations[i].relatedEntity;\r\n            }\r\n            tasks.push(entityRelationService.saveRelation(relation));\r\n        }\r\n        for (let i=0; i < vm.relationsToDelete.length; i++) {\r\n            let relation = {\r\n                type: vm.relationsToDelete[i].relationType\r\n            };\r\n            if (vm.relationsToDelete[i].direction == 'FROM') {\r\n                relation.to = vm.relationsToDelete[i].relatedEntity;\r\n                relation.from = entityId;\r\n            } else {\r\n                relation.to = entityId;\r\n                relation.from = vm.relationsToDelete[i].relatedEntity;\r\n            }\r\n            tasks.push(entityRelationService.deleteRelation(relation.from, relation.type, relation.to));\r\n        }\r\n        if (tasks.length > 0) {\r\n            return widgetContext.rxjs.forkJoin(tasks);\r\n        }\r\n        return widgetContext.rxjs.of([]);\r\n    }\r\n}",
                "customResources" : [ ],
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "eae3f520-d7a8-e886-e8ae-ec42f497286e"
              } ]
            },
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableDataExport" : false,
            "displayTimewindow" : true,
            "widgetCss" : "",
            "pageSize" : 1024,
            "noDataDisplayMessage" : ""
          },
          "id" : "51f6f10f-c491-9e27-04d5-a235ca4fc16c"
        },
        "82c48e08-7015-1a8f-0091-d396abd59009" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "entities_table",
          "type" : "latest",
          "title" : "New widget",
          "sizeX" : 32,
          "sizeY" : 16,
          "config" : {
            "timewindow" : {
              "displayValue" : "",
              "selectedTab" : 0,
              "realtime" : {
                "realtimeType" : 1,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "quickInterval" : "CURRENT_DAY"
              },
              "history" : {
                "historyType" : 0,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "fixedTimewindow" : {
                  "startTimeMs" : 1684409450985,
                  "endTimeMs" : 1684495850985
                },
                "quickInterval" : "CURRENT_DAY"
              },
              "aggregation" : {
                "type" : "NONE",
                "limit" : 200
              }
            },
            "showTitle" : true,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "4px",
            "settings" : {
              "entitiesTitle" : "Users",
              "enableSearch" : true,
              "enableSelectColumnDisplay" : true,
              "enableStickyHeader" : true,
              "enableStickyAction" : true,
              "reserveSpaceForHiddenAction" : "true",
              "displayEntityName" : true,
              "entityNameColumnTitle" : "Email",
              "displayEntityLabel" : false,
              "displayEntityType" : false,
              "displayPagination" : true,
              "defaultPageSize" : 10,
              "defaultSortOrder" : "entityName",
              "useRowStyleFunction" : false
            },
            "title" : "Users",
            "dropShadow" : false,
            "enableFullscreen" : false,
            "titleStyle" : {
              "fontSize" : "18px",
              "fontWeight" : 600,
              "padding" : "5px 10px 5px 5px"
            },
            "useDashboardTimewindow" : false,
            "showLegend" : false,
            "datasources" : [ {
              "type" : "entity",
              "name" : null,
              "entityAliasId" : "ff71fe5d-722e-fe0f-bf06-080b2b55cfae",
              "filterId" : null,
              "dataKeys" : [ {
                "name" : "firstName",
                "type" : "entityField",
                "label" : "First name",
                "color" : "#9c27b0",
                "settings" : {
                  "columnWidth" : "0px",
                  "useCellStyleFunction" : false,
                  "useCellContentFunction" : false
                },
                "_hash" : 0.3042526503424541
              }, {
                "name" : "lastName",
                "type" : "entityField",
                "label" : "Last name",
                "color" : "#8bc34a",
                "settings" : {
                  "columnWidth" : "0px",
                  "useCellStyleFunction" : false,
                  "useCellContentFunction" : false
                },
                "_hash" : 0.21908380917698933
              } ]
            } ],
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableDataExport" : false,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "displayTimewindow" : true,
            "actions" : {
              "headerButton" : [ {
                "name" : "Add User",
                "icon" : "add",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "customPretty",
                "customHtml" : "<form #addEntityForm=\"ngForm\" [formGroup]=\"addUserFormGroup\"\r\n      (ngSubmit)=\"save()\" class=\"add-entity-form\" style=\"width: 600px;\">\r\n  <mat-toolbar fxLayout=\"row\" color=\"primary\">\r\n    <h2>Add User</h2>\r\n    <span fxFlex></span>\r\n    <button mat-icon-button (click)=\"cancel()\" type=\"button\">\r\n      <mat-icon class=\"material-icons\">close</mat-icon>\r\n    </button>\r\n  </mat-toolbar>\r\n  <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\">\r\n  </mat-progress-bar>\r\n  <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\r\n  <div mat-dialog-content fxLayout=\"column\">\r\n    <mat-form-field fxFlex class=\"mat-block\">\r\n        <mat-label>Email</mat-label>\r\n        <input matInput formControlName=\"email\" type=\"email\" required>\r\n        <mat-error *ngIf=\"addUserFormGroup.get('email').hasError('required')\">\r\n            Email is required\r\n        </mat-error>\r\n        <mat-error *ngIf=\"addUserFormGroup.get('email').hasError('pattern')\">\r\n            Invalid value format\r\n        </mat-error>\r\n    </mat-form-field>\r\n    <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\r\n        <mat-form-field fxFlex class=\"mat-block\">\r\n            <mat-label>First Name</mat-label>\r\n            <input matInput formControlName=\"firstName\">\r\n        </mat-form-field>\r\n        <mat-form-field fxFlex class=\"mat-block\">\r\n            <mat-label>Last Name</mat-label>\r\n            <input matInput formControlName=\"lastName\" >\r\n        </mat-form-field>\r\n    </div>\r\n    <mat-form-field fxFlex class=\"mat-block\">\r\n        <mat-label>Activation method</mat-label>\r\n        <mat-select formControlName=\"userActivationMethod\">\r\n            <mat-option *ngFor=\"let method of activationMethods\" [value]=\"method.value\">\r\n                {{ method.name }}\r\n            </mat-option>\r\n        </mat-select>\r\n    </mat-form-field>\r\n  </div>\r\n  <div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\">\r\n    <button mat-button color=\"primary\"\r\n            type=\"button\"\r\n            [disabled]=\"(isLoading$ | async)\"\r\n            (click)=\"cancel()\" cdkFocusInitial>\r\n      Cancel\r\n    </button>\r\n    <button mat-button mat-raised-button color=\"primary\"\r\n            type=\"submit\"\r\n            [disabled]=\"(isLoading$ | async) || addUserFormGroup.invalid || !addUserFormGroup.dirty\">\r\n      Add user\r\n    </button>\r\n  </div>\r\n</form>",
                "customCss" : ".add-tenant-user-form mat-toolbar.add-tenant-user-form-toolbar {\n    background-color: #ffffff;\n    color: #333333;\n}\n.add-tenant-user-form .add-tenant-user-form-actions button[mat-button][color=\"primary\"] {\n    border: 1px solid #E0E0E0;\n}",
                "customFunction" : "let $injector = widgetContext.$scope.$injector;\r\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog'));\r\nlet userService = $injector.get(widgetContext.servicesMap.get('userService'));\r\nlet entityGroupService = $injector.get(widgetContext.servicesMap.get('entityGroupService'));\r\nlet dashboardService = $injector.get(widgetContext.servicesMap.get('dashboardService'));\r\n\r\nopenAddUserDialog();\r\n\r\nfunction openAddUserDialog() {\r\n  customDialog.customDialog(htmlTemplate, AddUserDialogController).subscribe();\r\n}\r\n\r\nfunction AddUserDialogController(instance) {\r\n  let vm = instance;\r\n  \r\n  vm.activationMethods = [\r\n        {\r\n            value: 'displayActivationLink',\r\n            name: 'Display activation link'\r\n        },\r\n        {\r\n            value: 'sendActivationMail',\r\n            name: 'Send activation email'\r\n        }\r\n  ];\r\n\r\n  vm.addUserFormGroup = vm.fb.group({\r\n    email: ['', [vm.validators.required, vm.validators.pattern(/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\_\\-0-9]+\\.)+[a-zA-Z]{2,}))$/)]],\r\n    firstName: [null],\r\n    lastName: [null],\r\n    userActivationMethod: ['displayActivationLink']\r\n  });\r\n  \r\n  vm.cancel = function () {\r\n    vm.dialogRef.close(null);\r\n  };\r\n  \r\n  vm.save = function () {\r\n    var customerId;\r\n    if (widgetContext.currentUser.authority === 'TENANT_ADMIN') {\r\n        customerId = widgetContext.stateController.getStateParams().entityId;\r\n    } else {\r\n        customerId = { id: widgetContext.currentUser.customerId, entityType: 'CUSTOMER'};\r\n    }\r\n    vm.addUserFormGroup.markAsPristine();\r\n    \r\n    const formValues = vm.addUserFormGroup.value;\r\n    let user = {\r\n      email: formValues.email,\r\n      firstName: formValues.firstName,\r\n      lastName: formValues.lastName,\r\n      authority: 'CUSTOMER_USER',\r\n      customerId: customerId\r\n    };\r\n    const sendActivationMail = (formValues.userActivationMethod === 'sendActivationMail');\r\n    \r\n    widgetContext.rxjs.forkJoin([\r\n        getTargetUserGroup(customerId), \r\n        getDashboardById('cdb0f970-e4e3-11ed-a55d-8deb5036ab7e')\r\n    ]).pipe(\r\n        widgetContext.rxjs.switchMap((data) => {\r\n            var userGroup = data[0];\r\n            var defaultDashboard = data[1];\r\n            if (defaultDashboard) {\r\n                user.additionalInfo = {\r\n                    defaultDashboardId: defaultDashboard.id.id,\r\n                    defaultDashboardFullscreen: true\r\n                };\r\n            }\r\n            return saveUserObservable(userGroup, user, sendActivationMail);\r\n        })\r\n    ).subscribe((user) => {\r\n        widgetContext.updateAliases();\r\n        if (formValues.userActivationMethod === 'displayActivationLink') {\r\n            userService.getActivationLink(user.id.id).subscribe(\r\n                (activationLink) => {\r\n                    displayActivationLink(activationLink).subscribe(\r\n                        () => {\r\n                            vm.dialogRef.close(null);\r\n                        }\r\n                    );\r\n                }\r\n            );\r\n        } else {\r\n            vm.dialogRef.close(null);\r\n        }\r\n    });\r\n  };\r\n  \r\n  function saveUserObservable(userGroup, user, sendActivationMail) {\r\n      return userService.saveUser(user, sendActivationMail, userGroup.id.id);\r\n  }\r\n  \r\n  function getTargetUserGroup(customerId) {\r\n      return entityGroupService.getEntityGroupsByOwnerId(customerId.entityType, customerId.id, 'USER').pipe(\r\n          widgetContext.rxjs.switchMap((groups) => {\r\n              return getOrCreateUserGroup(groups, 'Customer Users', customerId);\r\n          })\r\n      );\r\n  }\r\n  \r\n  function getOrCreateUserGroup(groups, groupName, customerId) {\r\n      var usersGroup = groups.find(group => group.name === groupName);\r\n      if (usersGroup) {\r\n          return widgetContext.rxjs.of(usersGroup);\r\n      } else {\r\n          usersGroup = {\r\n              type: 'USER',\r\n              name: groupName,\r\n              ownerId: customerId\r\n          };\r\n          return entityGroupService.saveEntityGroup(usersGroup);\r\n      }\r\n  }\r\n  \r\n  function getDashboardById(dashboardId) {\r\n      return dashboardService.getDashboardInfo(dashboardId, {ignoreLoading: true}).pipe(\r\n          widgetContext.rxjs.map((data) => {\r\n            if (data !== null) {\r\n                return data;\r\n            } else {\r\n                return null;\r\n            }\r\n          })\r\n      );\r\n  }\r\n  \r\n    function displayActivationLink(activationLink) {\r\n        const template = '<form style=\"min-width: 400px;\">\\n' +\r\n            '  <mat-toolbar color=\"primary\">\\n' +\r\n            '    <h2 translate>user.activation-link</h2>\\n' +\r\n            '    <span fxFlex></span>\\n' +\r\n            '    <button mat-button mat-icon-button\\n' +\r\n            '            (click)=\"close()\"\\n' +\r\n            '            type=\"button\">\\n' +\r\n            '      <mat-icon class=\"material-icons\">close</mat-icon>\\n' +\r\n            '    </button>\\n' +\r\n            '  </mat-toolbar>\\n' +\r\n            '  <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\">\\n' +\r\n            '  </mat-progress-bar>\\n' +\r\n            '  <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\\n' +\r\n            '  <div mat-dialog-content tb-toast toastTarget=\"activationLinkDialogContent\">\\n' +\r\n            '    <div class=\"mat-content\" fxLayout=\"column\">\\n' +\r\n            '      <span [innerHTML]=\"\\'user.activation-link-text\\' | translate: {activationLink: activationLink}\"></span>\\n' +\r\n            '      <div fxLayout=\"row\" fxLayoutAlign=\"start center\">\\n' +\r\n            '        <pre class=\"tb-highlight\" fxFlex><code>{{ activationLink }}</code></pre>\\n' +\r\n            '        <button mat-icon-button\\n' +\r\n            '                color=\"primary\"\\n' +\r\n            '                ngxClipboard\\n' +\r\n            '                cbContent=\"{{ activationLink }}\"\\n' +\r\n            '                (cbOnSuccess)=\"onActivationLinkCopied()\"\\n' +\r\n            '                matTooltip=\"{{ \\'user.copy-activation-link\\' | translate }}\"\\n' +\r\n            '                matTooltipPosition=\"above\">\\n' +\r\n            '          <mat-icon svgIcon=\"mdi:clipboard-arrow-left\"></mat-icon>\\n' +\r\n            '        </button>\\n' +\r\n            '      </div>\\n' +\r\n            '    </div>\\n' +\r\n            '  </div>\\n' +\r\n            '  <div mat-dialog-actions fxLayoutAlign=\"end center\">\\n' +\r\n            '    <button mat-button color=\"primary\"\\n' +\r\n            '            type=\"button\"\\n' +\r\n            '            cdkFocusInitial\\n' +\r\n            '            [disabled]=\"(isLoading$ | async)\"\\n' +\r\n            '            (click)=\"close()\">\\n' +\r\n            '      {{ \\'action.ok\\' | translate }}\\n' +\r\n            '    </button>\\n' +\r\n            '  </div>\\n' +\r\n            '</form>';\r\n        return customDialog.customDialog(template, ActivationLinkDialogController, {activationLink: activationLink});\r\n    }\r\n\r\n    function ActivationLinkDialogController(instance) {\r\n        var vm = instance;\r\n\r\n        vm.activationLink = instance.data.activationLink;\r\n\r\n        vm.onActivationLinkCopied = onActivationLinkCopied;\r\n        vm.close = close;\r\n\r\n        function onActivationLinkCopied(){\r\n            widgetContext.showSuccessToast(translate.instant('user.activation-link-copied-message'), 1000, 'bottom', 'left', 'activationLinkDialogContent');\r\n        }\r\n\r\n        function close() {\r\n            vm.dialogRef.close(null);\r\n        }\r\n    }\r\n  \r\n}\r\n",
                "customResources" : [ ],
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "9bafcc47-2446-4ccf-1ded-31b5ea5f259f"
              } ],
              "actionCellButton" : [ {
                "name" : "Edit User Info",
                "icon" : "edit",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "customPretty",
                "customHtml" : "<form #editUserForm=\"ngForm\" [formGroup]=\"editUserFormGroup\" class=\"edit-user-form\" (ngSubmit)=\"save()\">\n    <mat-toolbar class=\"edit-user-form-toolbar\" fxLayout=\"row\">\n        <h2>Edit User Details</h2>\n        <span fxFlex></span>\n        <button mat-icon-button (click)=\"cancel()\" type=\"button\">\n            <mat-icon class=\"material-icons\">close</mat-icon>\n        </button>\n    </mat-toolbar>\n    <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\"></mat-progress-bar>\n    <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\n    <div mat-dialog-content fxLayout=\"column\">\n        <fieldset [disabled]=\"(isLoading$ | async) || loading\">\n            <mat-form-field fxFlex class=\"mat-block\">\n                <mat-label>Email</mat-label>\n                <input matInput formControlName=\"email\" type=\"email\" required>\n                <mat-error *ngIf=\"editUserFormGroup.get('email').hasError('required')\">\n                    Email is required\n                </mat-error>\n                <mat-error *ngIf=\"editUserFormGroup.get('email').hasError('pattern')\">\n                    Invalid value format\n                </mat-error>\n            </mat-form-field>\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>First Name</mat-label>\n                    <input matInput formControlName=\"firstName\">\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Last Name</mat-label>\n                    <input matInput formControlName=\"lastName\" >\n                </mat-form-field>\n            </div>\n        </fieldset>\n    </div>\n    <div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\" class=\"edit-user-form-actions\">\n        <button mat-button color=\"primary\"\n                type=\"button\"\n                (click)=\"cancel()\" cdkFocusInitial>\n            Cancel\n        </button>\n        <button mat-button color=\"primary\"\n                type=\"submit\"\n                [disabled]=\"(isLoading$ | async) || loading || editUserForm.invalid || !editUserForm.dirty\">\n            Save\n        </button>\n    </div>\n</form>",
                "customCss" : ".edit-tenant-user-form mat-toolbar.edit-tenant-user-form-toolbar {\n    background-color: #ffffff;\n    color: #333333;\n}\n.edit-tenant-user-form .edit-tenant-user-form-actions button[mat-button][color=\"primary\"] {\n    border: 1px solid #E0E0E0;\n}",
                "customFunction" : "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog')),\n    userService = $injector.get(widgetContext.servicesMap.get('userService')),\n    attributeService = $injector.get(widgetContext.servicesMap.get('attributeService')),\n    translate = $injector.get(widgetContext.servicesMap.get('translate'));\n\nopenEditUserDialog();\n\nfunction openEditUserDialog() {\n    customDialog.customDialog(htmlTemplate, EditUserDialogController).subscribe();\n}\n\nfunction EditUserDialogController(instance) {\n    let vm = instance;\n\n    let currentUser = widgetContext.currentUser;\n    vm.hideGroupSelection = (currentUser.userId === entityId.id);\n\n    vm.user = {};\n    vm.attributes = {};\n\n    vm.editUserFormGroup = vm.fb.group({\n        email: ['', [vm.validators.required, vm.validators.pattern(/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\_\\-0-9]+\\.)+[a-zA-Z]{2,}))$/)]],\n        firstName: [null],\n        lastName: [null],\n    });\n\n    getUserInfo();\n\n    vm.cancel = function() {\n        vm.dialogRef.close(null);\n    };\n\n    vm.save = () => {\n        vm.loading = true;\n        vm.editUserFormGroup.markAsPristine();\n        const formValues = vm.editUserFormGroup.value;\n\n        vm.user.email = formValues.email;\n        vm.user.firstName = formValues.firstName;\n        vm.user.lastName = formValues.lastName;\n\n        userService.saveUser(vm.user).subscribe(\n            (user) => {\n                saveAttributes(user.id).subscribe(\n                    () => {\n                        vm.user = user;\n                            vm.loading = false;\n                            widgetContext.updateAliases();\n                            vm.dialogRef.close(null);\n                    },\n                    () => {\n                        vm.loading = false;\n                    }\n                );\n            },\n            () => {\n                vm.loading = false;\n            }\n        );\n    };\n\n    function getUserInfo() {\n        vm.loading = true;\n        widgetContext.rxjs.forkJoin([\n            userService.getUser(entityId.id),\n        ]).subscribe((response) => {\n            vm.user = response[0];\n\n            vm.editUserFormGroup.patchValue({\n                email: vm.user.email,\n                firstName: vm.user.firstName,\n                lastName: vm.user.lastName,\n            }, {emitEvent: false});\n\n            vm.loading = false;\n        });\n    }\n\n    function saveAttributes(entityId) {\n        let attributesArray = [];\n        for (let key in vm.attributes) {\n            if (vm.attributes[key] !== null) {\n                attributesArray.push({key: key, value: vm.attributes[key]});\n            }\n        }\n        if (attributesArray.length > 0) {\n            return attributeService.saveEntityAttributes(entityId, \"SERVER_SCOPE\", attributesArray);\n        } else {\n            return widgetContext.rxjs.of([]);\n        }\n    }\n}",
                "customResources" : [ ],
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "67252d27-f678-8d8c-bef8-e343cd97ae90"
              } ]
            }
          },
          "id" : "82c48e08-7015-1a8f-0091-d396abd59009"
        },
        "1b26a5b1-61be-945c-b7a7-85edc3e219cf" : {
          "isSystemType" : true,
          "bundleAlias" : "input_widgets",
          "typeAlias" : "update_multiple_attributes",
          "type" : "latest",
          "title" : "New widget",
          "sizeX" : 10,
          "sizeY" : 16,
          "config" : {
            "datasources" : [ {
              "type" : "entity",
              "name" : null,
              "entityAliasId" : "9da9bd9c-a7cc-244f-16ac-3e2045cff5b1",
              "filterId" : null,
              "dataKeys" : [ {
                "name" : "lowBattAlarmEnabled",
                "type" : "attribute",
                "label" : "Low Battery Alarm",
                "color" : "#2196f3",
                "settings" : {
                  "dataKeyType" : "server",
                  "dataKeyValueType" : "booleanSwitch",
                  "required" : false,
                  "isEditable" : "editable",
                  "dataKeyHidden" : false,
                  "step" : 1
                },
                "_hash" : 0.6927732945431533,
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : null,
                "postFuncBody" : null
              }, {
                "name" : "lowBattThreshold",
                "type" : "attribute",
                "label" : "Low Battery Threshold",
                "color" : "#3f51b5",
                "settings" : {
                  "dataKeyType" : "server",
                  "dataKeyValueType" : "string",
                  "required" : false,
                  "isEditable" : "editable",
                  "dataKeyHidden" : false,
                  "step" : 1,
                  "disabledOnDataKey" : "lowBattAlarmEnabled"
                },
                "_hash" : 0.43810120489248616,
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : null,
                "postFuncBody" : null
              }, {
                "name" : "lowTempAlarmEnabled",
                "type" : "attribute",
                "label" : "Low Temperature Alarm",
                "color" : "#4caf50",
                "settings" : {
                  "dataKeyType" : "server",
                  "dataKeyValueType" : "booleanSwitch",
                  "required" : false,
                  "isEditable" : "editable",
                  "dataKeyHidden" : false,
                  "step" : 1
                },
                "_hash" : 0.7775367356739471
              }, {
                "name" : "lowTempThreshold",
                "type" : "attribute",
                "label" : "Low Temperature Threshold",
                "color" : "#e91e63",
                "settings" : {
                  "dataKeyType" : "server",
                  "dataKeyValueType" : "string",
                  "required" : false,
                  "isEditable" : "editable",
                  "dataKeyHidden" : false,
                  "step" : 1,
                  "disabledOnDataKey" : "lowTempAlarmEnabled"
                },
                "_hash" : 0.9590971916933051
              }, {
                "name" : "dailyConsumptionAlarmEnabled",
                "type" : "attribute",
                "label" : "Exceeding Daily Consumption Alarm",
                "color" : "#ffc107",
                "settings" : {
                  "dataKeyType" : "server",
                  "dataKeyValueType" : "booleanSwitch",
                  "required" : false,
                  "isEditable" : "editable",
                  "dataKeyHidden" : false,
                  "step" : 1
                },
                "_hash" : 0.07853020804094801
              }, {
                "name" : "dailyConsumptionThreshold",
                "type" : "attribute",
                "label" : "Daily Consumption Threshold",
                "color" : "#9c27b0",
                "settings" : {
                  "dataKeyType" : "server",
                  "dataKeyValueType" : "double",
                  "required" : false,
                  "isEditable" : "editable",
                  "dataKeyHidden" : false,
                  "step" : 1,
                  "disabledOnDataKey" : "dailyConsumptionAlarmEnabled"
                },
                "_hash" : 0.20555135495339383
              }, {
                "name" : "weeklyConsumptionAlarmEnabled",
                "type" : "attribute",
                "label" : "Exceeding Weekly Consumption Alarm",
                "color" : "#607d8b",
                "settings" : {
                  "dataKeyType" : "server",
                  "dataKeyValueType" : "booleanSwitch",
                  "required" : false,
                  "isEditable" : "editable",
                  "dataKeyHidden" : false,
                  "step" : 1
                },
                "_hash" : 0.3361600543780858
              }, {
                "name" : "weeklyConsumptionThreshold",
                "type" : "attribute",
                "label" : "Weekly Consumption Threshold",
                "color" : "#8bc34a",
                "settings" : {
                  "dataKeyType" : "server",
                  "dataKeyValueType" : "double",
                  "required" : false,
                  "isEditable" : "editable",
                  "dataKeyHidden" : false,
                  "step" : 1,
                  "disabledOnDataKey" : "weeklyConsumptionAlarmEnabled"
                },
                "_hash" : 0.9860115623092394
              }, {
                "name" : "inactivityAlarmEnabled",
                "type" : "attribute",
                "label" : "Inactivity Alarm",
                "color" : "#f44336",
                "settings" : {
                  "dataKeyType" : "server",
                  "dataKeyValueType" : "booleanSwitch",
                  "required" : false,
                  "isEditable" : "editable",
                  "dataKeyHidden" : false,
                  "step" : 1
                },
                "_hash" : 0.9480348252243465
              } ]
            } ],
            "timewindow" : {
              "displayValue" : "",
              "selectedTab" : 0,
              "realtime" : {
                "realtimeType" : 1,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "quickInterval" : "CURRENT_DAY"
              },
              "history" : {
                "historyType" : 0,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "fixedTimewindow" : {
                  "startTimeMs" : 1684409450985,
                  "endTimeMs" : 1684495850985
                },
                "quickInterval" : "CURRENT_DAY"
              },
              "aggregation" : {
                "type" : "AVG",
                "limit" : 25000
              }
            },
            "showTitle" : true,
            "backgroundColor" : "#fff",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "8px",
            "settings" : {
              "showActionButtons" : false,
              "showResultMessage" : true,
              "fieldsAlignment" : "column",
              "fieldsInRow" : 2,
              "widgetTitle" : "System Alarms",
              "groupTitle" : "${entityName}",
              "showGroupTitle" : false
            },
            "title" : "New Update Multiple Attributes",
            "dropShadow" : false,
            "enableFullscreen" : false,
            "enableDataExport" : false,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0",
              "fontSize" : "12px",
              "textTransform" : "uppercase"
            },
            "titleStyle" : {
              "fontSize" : "18px",
              "fontWeight" : 600,
              "padding" : "5px 10px 5px 5px",
              "textTransform" : "capitalize"
            },
            "useDashboardTimewindow" : true,
            "showLegend" : false,
            "actions" : { },
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "displayTimewindow" : true
          },
          "id" : "1b26a5b1-61be-945c-b7a7-85edc3e219cf"
        },
        "e5602f65-3248-dc60-799c-0d8b413e3604" : {
          "isSystemType" : true,
          "bundleAlias" : "input_widgets",
          "typeAlias" : "update_multiple_attributes",
          "type" : "latest",
          "title" : "New widget",
          "sizeX" : 11,
          "sizeY" : 16,
          "config" : {
            "datasources" : [ {
              "type" : "entity",
              "dataKeys" : [ {
                "name" : "lowBattSmsEnabled",
                "type" : "attribute",
                "label" : "Low Battery Alarm",
                "color" : "#2196f3",
                "settings" : {
                  "dataKeyType" : "server",
                  "dataKeyValueType" : "booleanSwitch",
                  "required" : false,
                  "isEditable" : "editable",
                  "dataKeyHidden" : false,
                  "step" : 1,
                  "disabledOnDataKey" : "lowBattAlarmEnabled"
                },
                "_hash" : 0.6927732945431533
              }, {
                "name" : "lowTempSmsEnabled",
                "type" : "attribute",
                "label" : "Low Temperature Alarm",
                "color" : "#4caf50",
                "settings" : {
                  "dataKeyType" : "server",
                  "dataKeyValueType" : "booleanSwitch",
                  "required" : false,
                  "isEditable" : "editable",
                  "dataKeyHidden" : false,
                  "step" : 1,
                  "disabledOnDataKey" : "lowTempAlarmEnabled"
                },
                "_hash" : 0.7775367356739471
              }, {
                "name" : "inactivitySmsEnabled",
                "type" : "attribute",
                "label" : "Inactivity Alarm",
                "color" : "#f44336",
                "settings" : {
                  "dataKeyType" : "server",
                  "dataKeyValueType" : "booleanSwitch",
                  "required" : false,
                  "isEditable" : "editable",
                  "dataKeyHidden" : false,
                  "step" : 1,
                  "disabledOnDataKey" : "inactivityAlarmEnabled"
                },
                "_hash" : 0.9480348252243465
              }, {
                "name" : "dailyConsumptionSmsEnabled",
                "type" : "attribute",
                "label" : "Exceeding Daily Consumption Alarm",
                "color" : "#ffc107",
                "settings" : {
                  "dataKeyType" : "server",
                  "dataKeyValueType" : "booleanSwitch",
                  "required" : false,
                  "isEditable" : "editable",
                  "dataKeyHidden" : false,
                  "step" : 1,
                  "disabledOnDataKey" : "dailyConsumptionAlarmEnabled"
                },
                "_hash" : 0.07853020804094801
              }, {
                "name" : "weeklyConsumptionSmsEnabled",
                "type" : "attribute",
                "label" : "Exceeding Weekly Consumption Alarm",
                "color" : "#607d8b",
                "settings" : {
                  "dataKeyType" : "server",
                  "dataKeyValueType" : "booleanSwitch",
                  "required" : false,
                  "isEditable" : "editable",
                  "dataKeyHidden" : false,
                  "step" : 1,
                  "disabledOnDataKey" : "weeklyConsumptionAlarmEnabled"
                },
                "_hash" : 0.1337452487876316
              }, {
                "name" : "lowBattAlarmEnabled",
                "type" : "attribute",
                "label" : "lowBattAlarmEnabled",
                "color" : "#9c27b0",
                "settings" : {
                  "dataKeyType" : "server",
                  "dataKeyValueType" : "string",
                  "required" : false,
                  "isEditable" : "editable",
                  "dataKeyHidden" : true,
                  "step" : 1
                },
                "_hash" : 0.9331619031893095
              }, {
                "name" : "lowTempAlarmEnabled",
                "type" : "attribute",
                "label" : "lowTempAlarmEnabled",
                "color" : "#8bc34a",
                "settings" : {
                  "dataKeyType" : "server",
                  "dataKeyValueType" : "string",
                  "required" : false,
                  "isEditable" : "editable",
                  "dataKeyHidden" : true,
                  "step" : 1
                },
                "_hash" : 0.10791951005981737
              }, {
                "name" : "inactivityAlarmEnabled",
                "type" : "attribute",
                "label" : "inactivityAlarmEnabled",
                "color" : "#3f51b5",
                "settings" : {
                  "dataKeyType" : "server",
                  "dataKeyValueType" : "string",
                  "required" : false,
                  "isEditable" : "editable",
                  "dataKeyHidden" : true,
                  "step" : 1
                },
                "_hash" : 0.201416227417764
              }, {
                "name" : "dailyConsumptionAlarmEnabled",
                "type" : "attribute",
                "label" : "dailyConsumptionAlarmEnabled",
                "color" : "#e91e63",
                "settings" : {
                  "dataKeyType" : "server",
                  "dataKeyValueType" : "string",
                  "required" : false,
                  "isEditable" : "editable",
                  "dataKeyHidden" : true,
                  "step" : 1
                },
                "_hash" : 0.6877141787041134
              }, {
                "name" : "weeklyConsumptionAlarmEnabled",
                "type" : "attribute",
                "label" : "weeklyConsumptionAlarmEnabled",
                "color" : "#ffeb3b",
                "settings" : {
                  "dataKeyType" : "server",
                  "dataKeyValueType" : "string",
                  "required" : false,
                  "isEditable" : "editable",
                  "dataKeyHidden" : true,
                  "step" : 1
                },
                "_hash" : 0.3514341740752789
              } ],
              "entityAliasId" : "9da9bd9c-a7cc-244f-16ac-3e2045cff5b1"
            } ],
            "timewindow" : {
              "displayValue" : "",
              "selectedTab" : 0,
              "realtime" : {
                "realtimeType" : 1,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "quickInterval" : "CURRENT_DAY"
              },
              "history" : {
                "historyType" : 0,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "fixedTimewindow" : {
                  "startTimeMs" : 1684409450985,
                  "endTimeMs" : 1684495850985
                },
                "quickInterval" : "CURRENT_DAY"
              },
              "aggregation" : {
                "type" : "AVG",
                "limit" : 25000
              }
            },
            "showTitle" : true,
            "backgroundColor" : "#fff",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "8px",
            "settings" : {
              "showActionButtons" : false,
              "showResultMessage" : true,
              "fieldsAlignment" : "column",
              "fieldsInRow" : 2,
              "widgetTitle" : "SMS Notifications",
              "groupTitle" : "${entityName}"
            },
            "title" : "SMS Notifications",
            "dropShadow" : false,
            "enableFullscreen" : false,
            "enableDataExport" : false,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0",
              "fontSize" : "12px",
              "textTransform" : "uppercase"
            },
            "titleStyle" : {
              "fontSize" : "18px",
              "fontWeight" : 600,
              "padding" : "5px 10px 5px 5px",
              "textTransform" : "capitalize"
            },
            "useDashboardTimewindow" : true,
            "showLegend" : false,
            "actions" : { },
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "displayTimewindow" : true
          },
          "id" : "e5602f65-3248-dc60-799c-0d8b413e3604"
        },
        "2b036a6f-052f-46fe-14c6-6dc59416704f" : {
          "isSystemType" : true,
          "bundleAlias" : "input_widgets",
          "typeAlias" : "update_multiple_attributes",
          "type" : "latest",
          "title" : "New widget",
          "sizeX" : 11,
          "sizeY" : 16,
          "config" : {
            "datasources" : [ {
              "type" : "entity",
              "dataKeys" : [ {
                "name" : "lowBattEmailEnabled",
                "type" : "attribute",
                "label" : "Low Battery Alarm",
                "color" : "#2196f3",
                "settings" : {
                  "dataKeyType" : "server",
                  "dataKeyValueType" : "booleanSwitch",
                  "required" : false,
                  "isEditable" : "editable",
                  "dataKeyHidden" : false,
                  "step" : 1,
                  "disabledOnDataKey" : "lowBattAlarmEnabled"
                },
                "_hash" : 0.6927732945431533
              }, {
                "name" : "lowTempEmailEnabled",
                "type" : "attribute",
                "label" : "Low Temperature Alarm",
                "color" : "#4caf50",
                "settings" : {
                  "dataKeyType" : "server",
                  "dataKeyValueType" : "booleanSwitch",
                  "required" : false,
                  "isEditable" : "editable",
                  "dataKeyHidden" : false,
                  "step" : 1,
                  "disabledOnDataKey" : "lowTempAlarmEnabled"
                },
                "_hash" : 0.7775367356739471
              }, {
                "name" : "inactivityEmailEnabled",
                "type" : "attribute",
                "label" : "Inactivity Alarm",
                "color" : "#f44336",
                "settings" : {
                  "dataKeyType" : "server",
                  "dataKeyValueType" : "booleanSwitch",
                  "required" : false,
                  "isEditable" : "editable",
                  "dataKeyHidden" : false,
                  "step" : 1,
                  "disabledOnDataKey" : "inactivityAlarmEnabled"
                },
                "_hash" : 0.9480348252243465
              }, {
                "name" : "dailyConsumptionEmailEnabled",
                "type" : "attribute",
                "label" : "Exceeding Daily Consumption Alarm",
                "color" : "#ffc107",
                "settings" : {
                  "dataKeyType" : "server",
                  "dataKeyValueType" : "booleanSwitch",
                  "required" : false,
                  "isEditable" : "editable",
                  "dataKeyHidden" : false,
                  "step" : 1,
                  "disabledOnDataKey" : "dailyConsumptionAlarmEnabled"
                },
                "_hash" : 0.07853020804094801
              }, {
                "name" : "weeklyConsumptionEmailEnabled",
                "type" : "attribute",
                "label" : "Exceeding Weekly Consumption Alarm",
                "color" : "#607d8b",
                "settings" : {
                  "dataKeyType" : "server",
                  "dataKeyValueType" : "booleanSwitch",
                  "required" : false,
                  "isEditable" : "editable",
                  "dataKeyHidden" : false,
                  "step" : 1,
                  "disabledOnDataKey" : "weeklyConsumptionAlarmEnabled"
                },
                "_hash" : 0.1337452487876316
              }, {
                "name" : "lowBattAlarmEnabled",
                "type" : "attribute",
                "label" : "lowBattAlarmEnabled",
                "color" : "#9c27b0",
                "settings" : {
                  "dataKeyType" : "server",
                  "dataKeyValueType" : "string",
                  "required" : false,
                  "isEditable" : "editable",
                  "dataKeyHidden" : true,
                  "step" : 1
                },
                "_hash" : 0.5094072453291982
              }, {
                "name" : "lowTempAlarmEnabled",
                "type" : "attribute",
                "label" : "lowTempAlarmEnabled",
                "color" : "#8bc34a",
                "settings" : {
                  "dataKeyType" : "server",
                  "dataKeyValueType" : "string",
                  "required" : false,
                  "isEditable" : "editable",
                  "dataKeyHidden" : true,
                  "step" : 1
                },
                "_hash" : 0.33533143393702325
              }, {
                "name" : "inactivityAlarmEnabled",
                "type" : "attribute",
                "label" : "inactivityAlarmEnabled",
                "color" : "#3f51b5",
                "settings" : {
                  "dataKeyType" : "server",
                  "dataKeyValueType" : "string",
                  "required" : false,
                  "isEditable" : "editable",
                  "dataKeyHidden" : true,
                  "step" : 1
                },
                "_hash" : 0.6498041417701894
              }, {
                "name" : "dailyConsumptionAlarmEnabled",
                "type" : "attribute",
                "label" : "dailyConsumptionAlarmEnabled",
                "color" : "#e91e63",
                "settings" : {
                  "dataKeyType" : "server",
                  "dataKeyValueType" : "string",
                  "required" : false,
                  "isEditable" : "editable",
                  "dataKeyHidden" : true,
                  "step" : 1
                },
                "_hash" : 0.8778621689054382
              }, {
                "name" : "weeklyConsumptionAlarmEnabled",
                "type" : "attribute",
                "label" : "weeklyConsumptionAlarmEnabled",
                "color" : "#ffeb3b",
                "settings" : {
                  "dataKeyType" : "server",
                  "dataKeyValueType" : "string",
                  "required" : false,
                  "isEditable" : "editable",
                  "dataKeyHidden" : true,
                  "step" : 1
                },
                "_hash" : 0.4706952279595922
              } ],
              "entityAliasId" : "9da9bd9c-a7cc-244f-16ac-3e2045cff5b1"
            } ],
            "timewindow" : {
              "displayValue" : "",
              "selectedTab" : 0,
              "realtime" : {
                "realtimeType" : 1,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "quickInterval" : "CURRENT_DAY"
              },
              "history" : {
                "historyType" : 0,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "fixedTimewindow" : {
                  "startTimeMs" : 1684409450985,
                  "endTimeMs" : 1684495850985
                },
                "quickInterval" : "CURRENT_DAY"
              },
              "aggregation" : {
                "type" : "AVG",
                "limit" : 25000
              }
            },
            "showTitle" : true,
            "backgroundColor" : "#fff",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "8px",
            "settings" : {
              "showActionButtons" : false,
              "showResultMessage" : true,
              "fieldsAlignment" : "column",
              "fieldsInRow" : 2,
              "widgetTitle" : "Email Notifications",
              "groupTitle" : "${entityName}"
            },
            "title" : "Email Notifications",
            "dropShadow" : false,
            "enableFullscreen" : false,
            "enableDataExport" : false,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0",
              "fontSize" : "12px",
              "textTransform" : "uppercase"
            },
            "titleStyle" : {
              "fontSize" : "18px",
              "fontWeight" : 600,
              "padding" : "5px 10px 5px 5px",
              "textTransform" : "capitalize"
            },
            "useDashboardTimewindow" : true,
            "showLegend" : false,
            "actions" : { },
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "displayTimewindow" : true
          },
          "id" : "2b036a6f-052f-46fe-14c6-6dc59416704f"
        },
        "629dcd1a-9569-ba67-0ffd-638051f4ea97" : {
          "isSystemType" : true,
          "bundleAlias" : "input_widgets",
          "typeAlias" : "markers_placement_openstreetmap",
          "type" : "latest",
          "title" : "New widget",
          "sizeX" : 16,
          "sizeY" : 12,
          "config" : {
            "datasources" : [ {
              "type" : "entity",
              "dataKeys" : [ {
                "name" : "latitude",
                "type" : "attribute",
                "label" : "latitude",
                "color" : "#2196f3",
                "settings" : { },
                "_hash" : 0.8866239226623536
              }, {
                "name" : "longitude",
                "type" : "attribute",
                "label" : "longitude",
                "color" : "#4caf50",
                "settings" : { },
                "_hash" : 0.29740195892595755
              }, {
                "name" : "dailyConsumptionThresholdExceeded",
                "type" : "attribute",
                "label" : "dailyConsumptionThresholdExceeded",
                "color" : "#f44336",
                "settings" : { },
                "_hash" : 0.6403512784014922
              }, {
                "name" : "weeklyConsumptionThresholdExceeded",
                "type" : "attribute",
                "label" : "weeklyConsumptionThresholdExceeded",
                "color" : "#ffc107",
                "settings" : { },
                "_hash" : 0.7011567596291408
              }, {
                "name" : "deviceInactive",
                "type" : "attribute",
                "label" : "deviceInactive",
                "color" : "#607d8b",
                "settings" : { },
                "_hash" : 0.1478100071106343
              }, {
                "name" : "lowBattery",
                "type" : "attribute",
                "label" : "lowBattery",
                "color" : "#9c27b0",
                "settings" : { },
                "_hash" : 0.0660701423190655
              }, {
                "name" : "temperatureUnderThreshold",
                "type" : "attribute",
                "label" : "temperatureUnderThreshold",
                "color" : "#8bc34a",
                "settings" : { },
                "_hash" : 0.17324389210027236
              } ],
              "entityAliasId" : "2754dd92-28a3-a689-d65c-ab9001a86f73"
            } ],
            "timewindow" : {
              "displayValue" : "",
              "selectedTab" : 0,
              "realtime" : {
                "realtimeType" : 1,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "quickInterval" : "CURRENT_DAY"
              },
              "history" : {
                "historyType" : 0,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "fixedTimewindow" : {
                  "startTimeMs" : 1684409450985,
                  "endTimeMs" : 1684495850985
                },
                "quickInterval" : "CURRENT_DAY"
              },
              "aggregation" : {
                "type" : "AVG",
                "limit" : 25000
              }
            },
            "showTitle" : true,
            "backgroundColor" : "#fff",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "8px",
            "settings" : {
              "fitMapBounds" : true,
              "latKeyName" : "latitude",
              "lngKeyName" : "longitude",
              "showLabel" : true,
              "label" : "${entityName}",
              "tooltipPattern" : "<b>${entityName}</b><br/><br/><b>Latitude:</b> ${latitude:7}<br/><b>Longitude:</b> ${longitude:7}<br/><br/><link-act name='delete'>Delete</link-act>",
              "markerImageSize" : 34,
              "useColorFunction" : false,
              "markerImages" : [ "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iMzciIHZpZXdCb3g9IjAgMCAzMCAzNyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTUgMzUuNTg4MkMxNSAzNS41ODgyIDI5IDI2LjAyNjEgMjkgMTVDMjkgNy4yNjgwMSAyMi43MzIgMSAxNSAxQzcuMjY4MDEgMSAxIDcuMjY4MDEgMSAxNUMxIDI2LjAyNjEgMTUgMzUuNTg4MiAxNSAzNS41ODgyWk0xNC44MzU0IDI0LjcxNzZDMjAuMTExMyAyNC43MTc2IDI0LjM4ODMgMjAuNDQwNiAyNC4zODgzIDE1LjE2NDdDMjQuMzg4MyA5Ljg4ODc2IDIwLjExMTMgNS42MTE3NiAxNC44MzU0IDUuNjExNzZDOS41NTk0MSA1LjYxMTc2IDUuMjgyNDEgOS44ODg3NiA1LjI4MjQxIDE1LjE2NDdDNS4yODI0MSAyMC40NDA2IDkuNTU5NDEgMjQuNzE3NiAxNC44MzU0IDI0LjcxNzZaIiBmaWxsPSJ3aGl0ZSIvPgogICAgPHBhdGggZD0iTTE1IDM1LjU4ODJMMTQuNzE4IDM2LjAwMTFMMTUgMzYuMTkzN0wxNS4yODIgMzYuMDAxMUwxNSAzNS41ODgyWk0yOC41IDE1QzI4LjUgMjAuMzE1MSAyNS4xMTM4IDI1LjM0MTIgMjEuNjMzNiAyOS4wODg3QzE5LjkwMzQgMzAuOTUxNyAxOC4xNzE2IDMyLjQ3NTggMTYuODcxOCAzMy41MzQxQzE2LjIyMjMgMzQuMDYzIDE1LjY4MTYgMzQuNDc0OCAxNS4zMDQzIDM0Ljc1MzhDMTUuMTE1NyAzNC44OTMyIDE0Ljk2OCAzNC45OTk0IDE0Ljg2OCAzNS4wNzAzQzE0LjgxOCAzNS4xMDU4IDE0Ljc3OTkgMzUuMTMyNCAxNC43NTQ2IDM1LjE1QzE0Ljc0MiAzNS4xNTg4IDE0LjczMjUgMzUuMTY1MyAxNC43MjY0IDM1LjE2OTZDMTQuNzIzMyAzNS4xNzE3IDE0LjcyMTEgMzUuMTczMiAxNC43MTk3IDM1LjE3NDJDMTQuNzE5IDM1LjE3NDcgMTQuNzE4NSAzNS4xNzUgMTQuNzE4MiAzNS4xNzUyQzE0LjcxODEgMzUuMTc1MyAxNC43MTggMzUuMTc1MyAxNC43MTc5IDM1LjE3NTRDMTQuNzE3OSAzNS4xNzU0IDE0LjcxOCAzNS4xNzU0IDE1IDM1LjU4ODJDMTUuMjgyIDM2LjAwMTEgMTUuMjgyMiAzNi4wMDEgMTUuMjgyNCAzNi4wMDA5QzE1LjI4MjUgMzYuMDAwOCAxNS4yODI4IDM2LjAwMDYgMTUuMjgzMSAzNi4wMDA0QzE1LjI4MzYgMzYgMTUuMjg0NCAzNS45OTk1IDE1LjI4NTQgMzUuOTk4OEMxNS4yODc0IDM1Ljk5NzQgMTUuMjkwMiAzNS45OTU1IDE1LjI5MzkgMzUuOTkyOUMxNS4zMDEyIDM1Ljk4NzkgMTUuMzExOSAzNS45ODA1IDE1LjMyNTcgMzUuOTcwOUMxNS4zNTM0IDM1Ljk1MTYgMTUuMzk0IDM1LjkyMzIgMTUuNDQ2NSAzNS44ODZDMTUuNTUxNiAzNS44MTE1IDE1LjcwNDYgMzUuNzAxNCAxNS44OTg4IDM1LjU1NzlDMTYuMjg3MSAzNS4yNzA4IDE2Ljg0MDIgMzQuODQ5NCAxNy41MDMyIDM0LjMwOTZDMTguODI4NCAzMy4yMzA1IDIwLjU5NjYgMzEuNjc0OSAyMi4zNjY0IDI5Ljc2OTJDMjUuODg2MiAyNS45NzkgMjkuNSAyMC43MTEgMjkuNSAxNUgyOC41Wk0xNSAxLjVDMjIuNDU1OCAxLjUgMjguNSA3LjU0NDE2IDI4LjUgMTVIMjkuNUMyOS41IDYuOTkxODcgMjMuMDA4MSAwLjUgMTUgMC41VjEuNVpNMS41IDE1QzEuNSA3LjU0NDE2IDcuNTQ0MTYgMS41IDE1IDEuNVYwLjVDNi45OTE4NyAwLjUgMC41IDYuOTkxODcgMC41IDE1SDEuNVpNMTUgMzUuNTg4MkMxNS4yODIgMzUuMTc1NCAxNS4yODIxIDM1LjE3NTQgMTUuMjgyMSAzNS4xNzU0QzE1LjI4MiAzNS4xNzUzIDE1LjI4MTkgMzUuMTc1MyAxNS4yODE4IDM1LjE3NTJDMTUuMjgxNSAzNS4xNzUgMTUuMjgxIDM1LjE3NDcgMTUuMjgwMyAzNS4xNzQyQzE1LjI3ODkgMzUuMTczMiAxNS4yNzY3IDM1LjE3MTcgMTUuMjczNiAzNS4xNjk2QzE1LjI2NzUgMzUuMTY1MyAxNS4yNTggMzUuMTU4OCAxNS4yNDU0IDM1LjE1QzE1LjIyMDEgMzUuMTMyNCAxNS4xODIgMzUuMTA1OCAxNS4xMzIgMzUuMDcwM0MxNS4wMzIgMzQuOTk5NCAxNC44ODQzIDM0Ljg5MzIgMTQuNjk1NyAzNC43NTM4QzE0LjMxODQgMzQuNDc0OCAxMy43Nzc3IDM0LjA2MyAxMy4xMjgyIDMzLjUzNDFDMTEuODI4NCAzMi40NzU4IDEwLjA5NjYgMzAuOTUxNyA4LjM2NjM4IDI5LjA4ODdDNC44ODYxOSAyNS4zNDEyIDEuNSAyMC4zMTUxIDEuNSAxNUgwLjVDMC41IDIwLjcxMSA0LjExMzgxIDI1Ljk3OSA3LjYzMzYyIDI5Ljc2OTJDOS40MDM0MiAzMS42NzQ5IDExLjE3MTYgMzMuMjMwNSAxMi40OTY4IDM0LjMwOTZDMTMuMTU5OCAzNC44NDk0IDEzLjcxMjkgMzUuMjcwOCAxNC4xMDEyIDM1LjU1NzlDMTQuMjk1NCAzNS43MDE0IDE0LjQ0ODQgMzUuODExNSAxNC41NTM1IDM1Ljg4NkMxNC42MDYgMzUuOTIzMiAxNC42NDY2IDM1Ljk1MTYgMTQuNjc0MyAzNS45NzA5QzE0LjY4ODEgMzUuOTgwNSAxNC42OTg4IDM1Ljk4NzkgMTQuNzA2MSAzNS45OTI5QzE0LjcwOTggMzUuOTk1NSAxNC43MTI2IDM1Ljk5NzQgMTQuNzE0NiAzNS45OTg4QzE0LjcxNTYgMzUuOTk5NSAxNC43MTY0IDM2IDE0LjcxNjkgMzYuMDAwNEMxNC43MTcyIDM2LjAwMDYgMTQuNzE3NSAzNi4wMDA4IDE0LjcxNzYgMzYuMDAwOUMxNC43MTc4IDM2LjAwMSAxNC43MTggMzYuMDAxMSAxNSAzNS41ODgyWk0yMy44ODgzIDE1LjE2NDdDMjMuODg4MyAyMC4xNjQ1IDE5LjgzNTIgMjQuMjE3NiAxNC44MzU0IDI0LjIxNzZWMjUuMjE3NkMyMC4zODc0IDI1LjIxNzYgMjQuODg4MyAyMC43MTY4IDI0Ljg4ODMgMTUuMTY0N0gyMy44ODgzWk0xNC44MzU0IDYuMTExNzZDMTkuODM1MiA2LjExMTc2IDIzLjg4ODMgMTAuMTY0OSAyMy44ODgzIDE1LjE2NDdIMjQuODg4M0MyNC44ODgzIDkuNjEyNjIgMjAuMzg3NCA1LjExMTc2IDE0LjgzNTQgNS4xMTE3NlY2LjExMTc2Wk01Ljc4MjQxIDE1LjE2NDdDNS43ODI0MSAxMC4xNjQ5IDkuODM1NTUgNi4xMTE3NiAxNC44MzU0IDYuMTExNzZWNS4xMTE3NkM5LjI4MzI2IDUuMTExNzYgNC43ODI0MSA5LjYxMjYyIDQuNzgyNDEgMTUuMTY0N0g1Ljc4MjQxWk0xNC44MzU0IDI0LjIxNzZDOS44MzU1NSAyNC4yMTc2IDUuNzgyNDEgMjAuMTY0NSA1Ljc4MjQxIDE1LjE2NDdINC43ODI0MUM0Ljc4MjQxIDIwLjcxNjggOS4yODMyNiAyNS4yMTc2IDE0LjgzNTQgMjUuMjE3NlYyNC4yMTc2WiIgZmlsbD0iI0UwRTBFMCIvPgogICAgPGNpcmNsZSBjeD0iMTUuMDAwMSIgY3k9IjE1LjAwMDEiIHI9IjYuMzM3MjEiIGZpbGw9IiM2RkNGOTciIHN0cm9rZT0iIzIxOTY1MyIvPgo8L3N2Zz4=", "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iMzciIHZpZXdCb3g9IjAgMCAzMCAzNyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTUgMzUuNTg4MkMxNSAzNS41ODgyIDI5IDI2LjAyNjEgMjkgMTVDMjkgNy4yNjgwMSAyMi43MzIgMSAxNSAxQzcuMjY4MDEgMSAxIDcuMjY4MDEgMSAxNUMxIDI2LjAyNjEgMTUgMzUuNTg4MiAxNSAzNS41ODgyWk0xNC44MzU0IDI0LjcxNzZDMjAuMTExMyAyNC43MTc2IDI0LjM4ODMgMjAuNDQwNiAyNC4zODgzIDE1LjE2NDdDMjQuMzg4MyA5Ljg4ODc2IDIwLjExMTMgNS42MTE3NiAxNC44MzU0IDUuNjExNzZDOS41NTk0MSA1LjYxMTc2IDUuMjgyNDEgOS44ODg3NiA1LjI4MjQxIDE1LjE2NDdDNS4yODI0MSAyMC40NDA2IDkuNTU5NDEgMjQuNzE3NiAxNC44MzU0IDI0LjcxNzZaIiBmaWxsPSJ3aGl0ZSIvPgogICAgPHBhdGggZD0iTTE1IDM1LjU4ODJMMTQuNzE4IDM2LjAwMTFMMTUgMzYuMTkzN0wxNS4yODIgMzYuMDAxMUwxNSAzNS41ODgyWk0yOC41IDE1QzI4LjUgMjAuMzE1MSAyNS4xMTM4IDI1LjM0MTIgMjEuNjMzNiAyOS4wODg3QzE5LjkwMzQgMzAuOTUxNyAxOC4xNzE2IDMyLjQ3NTggMTYuODcxOCAzMy41MzQxQzE2LjIyMjMgMzQuMDYzIDE1LjY4MTYgMzQuNDc0OCAxNS4zMDQzIDM0Ljc1MzhDMTUuMTE1NyAzNC44OTMyIDE0Ljk2OCAzNC45OTk0IDE0Ljg2OCAzNS4wNzAzQzE0LjgxOCAzNS4xMDU4IDE0Ljc3OTkgMzUuMTMyNCAxNC43NTQ2IDM1LjE1QzE0Ljc0MiAzNS4xNTg4IDE0LjczMjUgMzUuMTY1MyAxNC43MjY0IDM1LjE2OTZDMTQuNzIzMyAzNS4xNzE3IDE0LjcyMTEgMzUuMTczMiAxNC43MTk3IDM1LjE3NDJDMTQuNzE5IDM1LjE3NDcgMTQuNzE4NSAzNS4xNzUgMTQuNzE4MiAzNS4xNzUyQzE0LjcxODEgMzUuMTc1MyAxNC43MTggMzUuMTc1MyAxNC43MTc5IDM1LjE3NTRDMTQuNzE3OSAzNS4xNzU0IDE0LjcxOCAzNS4xNzU0IDE1IDM1LjU4ODJDMTUuMjgyIDM2LjAwMTEgMTUuMjgyMiAzNi4wMDEgMTUuMjgyNCAzNi4wMDA5QzE1LjI4MjUgMzYuMDAwOCAxNS4yODI4IDM2LjAwMDYgMTUuMjgzMSAzNi4wMDA0QzE1LjI4MzYgMzYgMTUuMjg0NCAzNS45OTk1IDE1LjI4NTQgMzUuOTk4OEMxNS4yODc0IDM1Ljk5NzQgMTUuMjkwMiAzNS45OTU1IDE1LjI5MzkgMzUuOTkyOUMxNS4zMDEyIDM1Ljk4NzkgMTUuMzExOSAzNS45ODA1IDE1LjMyNTcgMzUuOTcwOUMxNS4zNTM0IDM1Ljk1MTYgMTUuMzk0IDM1LjkyMzIgMTUuNDQ2NSAzNS44ODZDMTUuNTUxNiAzNS44MTE1IDE1LjcwNDYgMzUuNzAxNCAxNS44OTg4IDM1LjU1NzlDMTYuMjg3MSAzNS4yNzA4IDE2Ljg0MDIgMzQuODQ5NCAxNy41MDMyIDM0LjMwOTZDMTguODI4NCAzMy4yMzA1IDIwLjU5NjYgMzEuNjc0OSAyMi4zNjY0IDI5Ljc2OTJDMjUuODg2MiAyNS45NzkgMjkuNSAyMC43MTEgMjkuNSAxNUgyOC41Wk0xNSAxLjVDMjIuNDU1OCAxLjUgMjguNSA3LjU0NDE2IDI4LjUgMTVIMjkuNUMyOS41IDYuOTkxODcgMjMuMDA4MSAwLjUgMTUgMC41VjEuNVpNMS41IDE1QzEuNSA3LjU0NDE2IDcuNTQ0MTYgMS41IDE1IDEuNVYwLjVDNi45OTE4NyAwLjUgMC41IDYuOTkxODcgMC41IDE1SDEuNVpNMTUgMzUuNTg4MkMxNS4yODIgMzUuMTc1NCAxNS4yODIxIDM1LjE3NTQgMTUuMjgyMSAzNS4xNzU0QzE1LjI4MiAzNS4xNzUzIDE1LjI4MTkgMzUuMTc1MyAxNS4yODE4IDM1LjE3NTJDMTUuMjgxNSAzNS4xNzUgMTUuMjgxIDM1LjE3NDcgMTUuMjgwMyAzNS4xNzQyQzE1LjI3ODkgMzUuMTczMiAxNS4yNzY3IDM1LjE3MTcgMTUuMjczNiAzNS4xNjk2QzE1LjI2NzUgMzUuMTY1MyAxNS4yNTggMzUuMTU4OCAxNS4yNDU0IDM1LjE1QzE1LjIyMDEgMzUuMTMyNCAxNS4xODIgMzUuMTA1OCAxNS4xMzIgMzUuMDcwM0MxNS4wMzIgMzQuOTk5NCAxNC44ODQzIDM0Ljg5MzIgMTQuNjk1NyAzNC43NTM4QzE0LjMxODQgMzQuNDc0OCAxMy43Nzc3IDM0LjA2MyAxMy4xMjgyIDMzLjUzNDFDMTEuODI4NCAzMi40NzU4IDEwLjA5NjYgMzAuOTUxNyA4LjM2NjM4IDI5LjA4ODdDNC44ODYxOSAyNS4zNDEyIDEuNSAyMC4zMTUxIDEuNSAxNUgwLjVDMC41IDIwLjcxMSA0LjExMzgxIDI1Ljk3OSA3LjYzMzYyIDI5Ljc2OTJDOS40MDM0MiAzMS42NzQ5IDExLjE3MTYgMzMuMjMwNSAxMi40OTY4IDM0LjMwOTZDMTMuMTU5OCAzNC44NDk0IDEzLjcxMjkgMzUuMjcwOCAxNC4xMDEyIDM1LjU1NzlDMTQuMjk1NCAzNS43MDE0IDE0LjQ0ODQgMzUuODExNSAxNC41NTM1IDM1Ljg4NkMxNC42MDYgMzUuOTIzMiAxNC42NDY2IDM1Ljk1MTYgMTQuNjc0MyAzNS45NzA5QzE0LjY4ODEgMzUuOTgwNSAxNC42OTg4IDM1Ljk4NzkgMTQuNzA2MSAzNS45OTI5QzE0LjcwOTggMzUuOTk1NSAxNC43MTI2IDM1Ljk5NzQgMTQuNzE0NiAzNS45OTg4QzE0LjcxNTYgMzUuOTk5NSAxNC43MTY0IDM2IDE0LjcxNjkgMzYuMDAwNEMxNC43MTcyIDM2LjAwMDYgMTQuNzE3NSAzNi4wMDA4IDE0LjcxNzYgMzYuMDAwOUMxNC43MTc4IDM2LjAwMSAxNC43MTggMzYuMDAxMSAxNSAzNS41ODgyWk0yMy44ODgzIDE1LjE2NDdDMjMuODg4MyAyMC4xNjQ1IDE5LjgzNTIgMjQuMjE3NiAxNC44MzU0IDI0LjIxNzZWMjUuMjE3NkMyMC4zODc0IDI1LjIxNzYgMjQuODg4MyAyMC43MTY4IDI0Ljg4ODMgMTUuMTY0N0gyMy44ODgzWk0xNC44MzU0IDYuMTExNzZDMTkuODM1MiA2LjExMTc2IDIzLjg4ODMgMTAuMTY0OSAyMy44ODgzIDE1LjE2NDdIMjQuODg4M0MyNC44ODgzIDkuNjEyNjIgMjAuMzg3NCA1LjExMTc2IDE0LjgzNTQgNS4xMTE3NlY2LjExMTc2Wk01Ljc4MjQxIDE1LjE2NDdDNS43ODI0MSAxMC4xNjQ5IDkuODM1NTUgNi4xMTE3NiAxNC44MzU0IDYuMTExNzZWNS4xMTE3NkM5LjI4MzI2IDUuMTExNzYgNC43ODI0MSA5LjYxMjYyIDQuNzgyNDEgMTUuMTY0N0g1Ljc4MjQxWk0xNC44MzU0IDI0LjIxNzZDOS44MzU1NSAyNC4yMTc2IDUuNzgyNDEgMjAuMTY0NSA1Ljc4MjQxIDE1LjE2NDdINC43ODI0MUM0Ljc4MjQxIDIwLjcxNjggOS4yODMyNiAyNS4yMTc2IDE0LjgzNTQgMjUuMjE3NlYyNC4yMTc2WiIgZmlsbD0iI0UwRTBFMCIvPgogICAgPGNpcmNsZSBjeD0iMTUuMDAwMSIgY3k9IjE1LjAwMDEiIHI9IjYuMzM3MjEiIGZpbGw9IiNGMjk5NEEiIHN0cm9rZT0iI0RFODUzNiIvPgo8L3N2Zz4=", "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iMzciIHZpZXdCb3g9IjAgMCAzMCAzNyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTUgMzUuNTg4MkMxNSAzNS41ODgyIDI5IDI2LjAyNjEgMjkgMTVDMjkgNy4yNjgwMSAyMi43MzIgMSAxNSAxQzcuMjY4MDEgMSAxIDcuMjY4MDEgMSAxNUMxIDI2LjAyNjEgMTUgMzUuNTg4MiAxNSAzNS41ODgyWk0xNC44MzU0IDI0LjcxNzZDMjAuMTExMyAyNC43MTc2IDI0LjM4ODMgMjAuNDQwNiAyNC4zODgzIDE1LjE2NDdDMjQuMzg4MyA5Ljg4ODc2IDIwLjExMTMgNS42MTE3NiAxNC44MzU0IDUuNjExNzZDOS41NTk0MSA1LjYxMTc2IDUuMjgyNDEgOS44ODg3NiA1LjI4MjQxIDE1LjE2NDdDNS4yODI0MSAyMC40NDA2IDkuNTU5NDEgMjQuNzE3NiAxNC44MzU0IDI0LjcxNzZaIiBmaWxsPSJ3aGl0ZSIvPgogICAgPHBhdGggZD0iTTE1IDM1LjU4ODJMMTQuNzE4IDM2LjAwMTFMMTUgMzYuMTkzN0wxNS4yODIgMzYuMDAxMUwxNSAzNS41ODgyWk0yOC41IDE1QzI4LjUgMjAuMzE1MSAyNS4xMTM4IDI1LjM0MTIgMjEuNjMzNiAyOS4wODg3QzE5LjkwMzQgMzAuOTUxNyAxOC4xNzE2IDMyLjQ3NTggMTYuODcxOCAzMy41MzQxQzE2LjIyMjMgMzQuMDYzIDE1LjY4MTYgMzQuNDc0OCAxNS4zMDQzIDM0Ljc1MzhDMTUuMTE1NyAzNC44OTMyIDE0Ljk2OCAzNC45OTk0IDE0Ljg2OCAzNS4wNzAzQzE0LjgxOCAzNS4xMDU4IDE0Ljc3OTkgMzUuMTMyNCAxNC43NTQ2IDM1LjE1QzE0Ljc0MiAzNS4xNTg4IDE0LjczMjUgMzUuMTY1MyAxNC43MjY0IDM1LjE2OTZDMTQuNzIzMyAzNS4xNzE3IDE0LjcyMTEgMzUuMTczMiAxNC43MTk3IDM1LjE3NDJDMTQuNzE5IDM1LjE3NDcgMTQuNzE4NSAzNS4xNzUgMTQuNzE4MiAzNS4xNzUyQzE0LjcxODEgMzUuMTc1MyAxNC43MTggMzUuMTc1MyAxNC43MTc5IDM1LjE3NTRDMTQuNzE3OSAzNS4xNzU0IDE0LjcxOCAzNS4xNzU0IDE1IDM1LjU4ODJDMTUuMjgyIDM2LjAwMTEgMTUuMjgyMiAzNi4wMDEgMTUuMjgyNCAzNi4wMDA5QzE1LjI4MjUgMzYuMDAwOCAxNS4yODI4IDM2LjAwMDYgMTUuMjgzMSAzNi4wMDA0QzE1LjI4MzYgMzYgMTUuMjg0NCAzNS45OTk1IDE1LjI4NTQgMzUuOTk4OEMxNS4yODc0IDM1Ljk5NzQgMTUuMjkwMiAzNS45OTU1IDE1LjI5MzkgMzUuOTkyOUMxNS4zMDEyIDM1Ljk4NzkgMTUuMzExOSAzNS45ODA1IDE1LjMyNTcgMzUuOTcwOUMxNS4zNTM0IDM1Ljk1MTYgMTUuMzk0IDM1LjkyMzIgMTUuNDQ2NSAzNS44ODZDMTUuNTUxNiAzNS44MTE1IDE1LjcwNDYgMzUuNzAxNCAxNS44OTg4IDM1LjU1NzlDMTYuMjg3MSAzNS4yNzA4IDE2Ljg0MDIgMzQuODQ5NCAxNy41MDMyIDM0LjMwOTZDMTguODI4NCAzMy4yMzA1IDIwLjU5NjYgMzEuNjc0OSAyMi4zNjY0IDI5Ljc2OTJDMjUuODg2MiAyNS45NzkgMjkuNSAyMC43MTEgMjkuNSAxNUgyOC41Wk0xNSAxLjVDMjIuNDU1OCAxLjUgMjguNSA3LjU0NDE2IDI4LjUgMTVIMjkuNUMyOS41IDYuOTkxODcgMjMuMDA4MSAwLjUgMTUgMC41VjEuNVpNMS41IDE1QzEuNSA3LjU0NDE2IDcuNTQ0MTYgMS41IDE1IDEuNVYwLjVDNi45OTE4NyAwLjUgMC41IDYuOTkxODcgMC41IDE1SDEuNVpNMTUgMzUuNTg4MkMxNS4yODIgMzUuMTc1NCAxNS4yODIxIDM1LjE3NTQgMTUuMjgyMSAzNS4xNzU0QzE1LjI4MiAzNS4xNzUzIDE1LjI4MTkgMzUuMTc1MyAxNS4yODE4IDM1LjE3NTJDMTUuMjgxNSAzNS4xNzUgMTUuMjgxIDM1LjE3NDcgMTUuMjgwMyAzNS4xNzQyQzE1LjI3ODkgMzUuMTczMiAxNS4yNzY3IDM1LjE3MTcgMTUuMjczNiAzNS4xNjk2QzE1LjI2NzUgMzUuMTY1MyAxNS4yNTggMzUuMTU4OCAxNS4yNDU0IDM1LjE1QzE1LjIyMDEgMzUuMTMyNCAxNS4xODIgMzUuMTA1OCAxNS4xMzIgMzUuMDcwM0MxNS4wMzIgMzQuOTk5NCAxNC44ODQzIDM0Ljg5MzIgMTQuNjk1NyAzNC43NTM4QzE0LjMxODQgMzQuNDc0OCAxMy43Nzc3IDM0LjA2MyAxMy4xMjgyIDMzLjUzNDFDMTEuODI4NCAzMi40NzU4IDEwLjA5NjYgMzAuOTUxNyA4LjM2NjM4IDI5LjA4ODdDNC44ODYxOSAyNS4zNDEyIDEuNSAyMC4zMTUxIDEuNSAxNUgwLjVDMC41IDIwLjcxMSA0LjExMzgxIDI1Ljk3OSA3LjYzMzYyIDI5Ljc2OTJDOS40MDM0MiAzMS42NzQ5IDExLjE3MTYgMzMuMjMwNSAxMi40OTY4IDM0LjMwOTZDMTMuMTU5OCAzNC44NDk0IDEzLjcxMjkgMzUuMjcwOCAxNC4xMDEyIDM1LjU1NzlDMTQuMjk1NCAzNS43MDE0IDE0LjQ0ODQgMzUuODExNSAxNC41NTM1IDM1Ljg4NkMxNC42MDYgMzUuOTIzMiAxNC42NDY2IDM1Ljk1MTYgMTQuNjc0MyAzNS45NzA5QzE0LjY4ODEgMzUuOTgwNSAxNC42OTg4IDM1Ljk4NzkgMTQuNzA2MSAzNS45OTI5QzE0LjcwOTggMzUuOTk1NSAxNC43MTI2IDM1Ljk5NzQgMTQuNzE0NiAzNS45OTg4QzE0LjcxNTYgMzUuOTk5NSAxNC43MTY0IDM2IDE0LjcxNjkgMzYuMDAwNEMxNC43MTcyIDM2LjAwMDYgMTQuNzE3NSAzNi4wMDA4IDE0LjcxNzYgMzYuMDAwOUMxNC43MTc4IDM2LjAwMSAxNC43MTggMzYuMDAxMSAxNSAzNS41ODgyWk0yMy44ODgzIDE1LjE2NDdDMjMuODg4MyAyMC4xNjQ1IDE5LjgzNTIgMjQuMjE3NiAxNC44MzU0IDI0LjIxNzZWMjUuMjE3NkMyMC4zODc0IDI1LjIxNzYgMjQuODg4MyAyMC43MTY4IDI0Ljg4ODMgMTUuMTY0N0gyMy44ODgzWk0xNC44MzU0IDYuMTExNzZDMTkuODM1MiA2LjExMTc2IDIzLjg4ODMgMTAuMTY0OSAyMy44ODgzIDE1LjE2NDdIMjQuODg4M0MyNC44ODgzIDkuNjEyNjIgMjAuMzg3NCA1LjExMTc2IDE0LjgzNTQgNS4xMTE3NlY2LjExMTc2Wk01Ljc4MjQxIDE1LjE2NDdDNS43ODI0MSAxMC4xNjQ5IDkuODM1NTUgNi4xMTE3NiAxNC44MzU0IDYuMTExNzZWNS4xMTE3NkM5LjI4MzI2IDUuMTExNzYgNC43ODI0MSA5LjYxMjYyIDQuNzgyNDEgMTUuMTY0N0g1Ljc4MjQxWk0xNC44MzU0IDI0LjIxNzZDOS44MzU1NSAyNC4yMTc2IDUuNzgyNDEgMjAuMTY0NSA1Ljc4MjQxIDE1LjE2NDdINC43ODI0MUM0Ljc4MjQxIDIwLjcxNjggOS4yODMyNiAyNS4yMTc2IDE0LjgzNTQgMjUuMjE3NlYyNC4yMTc2WiIgZmlsbD0iI0UwRTBFMCIvPgogICAgPGNpcmNsZSBjeD0iMTUuMDAwMSIgY3k9IjE1LjAwMDEiIHI9IjYuMzM3MjEiIGZpbGw9IiNFQjU3NTciIHN0cm9rZT0iI0Q3NDM0MyIvPgo8L3N2Zz4=" ],
              "useMarkerImageFunction" : true,
              "color" : "#fe7569",
              "mapProvider" : "CartoDB.Positron",
              "showTooltip" : true,
              "autocloseTooltip" : true,
              "defaultCenterPosition" : "0,0",
              "customProviderTileUrl" : "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
              "showTooltipAction" : "click",
              "polygonKeyName" : "coordinates",
              "polygonOpacity" : 0.5,
              "polygonStrokeOpacity" : 1,
              "polygonStrokeWeight" : 1,
              "zoomOnClick" : true,
              "showCoverageOnHover" : true,
              "animate" : true,
              "maxClusterRadius" : 80,
              "removeOutsideVisibleBounds" : true,
              "defaultZoomLevel" : 5,
              "markerImageFunction" : "var res = {\n    url: images[0],\n    size: 34\n};\nvar dailyConsumptionThresholdExceeded = (dsData[dsIndex]['dailyConsumptionThresholdExceeded'] && dsData[dsIndex]['dailyConsumptionThresholdExceeded'] === 'true');\nvar weeklyConsumptionThresholdExceeded = (dsData[dsIndex]['weeklyConsumptionThresholdExceeded'] && dsData[dsIndex]['weeklyConsumptionThresholdExceeded'] === 'true');\nvar inactive = (dsData[dsIndex]['deviceInactive'] && dsData[dsIndex]['deviceInactive'] === 'true');\nvar lowBattery = (dsData[dsIndex]['lowBattery'] && dsData[dsIndex]['lowBattery'] === 'true');\nvar lowTemperature = (dsData[dsIndex]['temperatureUnderThreshold'] && dsData[dsIndex]['temperatureUnderThreshold'] === 'true');\n\nif (inactive) {\n    res.url = images[2];\n} else if (dailyConsumptionThresholdExceeded || weeklyConsumptionThresholdExceeded || \n            lowBattery || lowTemperature) {\n    res.url = images[1];\n}\nreturn res;",
              "draggableMarker" : true,
              "editablePolygon" : true,
              "provider" : "openstreet-map",
              "mapPageSize" : 16384
            },
            "title" : "Drag and drop marker to change location",
            "dropShadow" : false,
            "enableFullscreen" : false,
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "showLegend" : false,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "actions" : {
              "tooltipAction" : [ {
                "id" : "54c293c4-9ca6-e34f-dc6a-0271944c1c66",
                "name" : "delete",
                "icon" : "more_horiz",
                "type" : "custom",
                "customFunction" : "var $rootScope = widgetContext.$scope.$injector.get('$rootScope');\nvar entityDatasource = widgetContext.map.subscription.datasources.filter(\n    function(entity) {\n        return entity.entityId === entityId.id\n    });\n\nwidgetContext.map.saveMarkerLocation(entityDatasource[0],\n    widgetContext.map.locations[0], {\n        \"lat\": null,\n        \"lng\": null\n    }).then(function succes() {\n        $rootScope.$broadcast('widgetForceReInit');\n    });"
              } ]
            },
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "displayTimewindow" : true,
            "enableDataExport" : false
          },
          "id" : "629dcd1a-9569-ba67-0ffd-638051f4ea97"
        },
        "52c52dab-0a43-b1c4-e041-7b7490bf036c" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "entities_table",
          "type" : "latest",
          "title" : "New widget",
          "sizeX" : 24,
          "sizeY" : 16,
          "config" : {
            "timewindow" : {
              "displayValue" : "",
              "selectedTab" : 0,
              "realtime" : {
                "realtimeType" : 1,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "quickInterval" : "CURRENT_DAY"
              },
              "history" : {
                "historyType" : 0,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "fixedTimewindow" : {
                  "startTimeMs" : 1684409450985,
                  "endTimeMs" : 1684495850985
                },
                "quickInterval" : "CURRENT_DAY"
              },
              "aggregation" : {
                "type" : "NONE",
                "limit" : 200
              }
            },
            "showTitle" : true,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "4px",
            "settings" : {
              "enableSearch" : true,
              "displayPagination" : false,
              "defaultPageSize" : 10,
              "displayEntityName" : true,
              "displayEntityType" : false,
              "defaultSortOrder" : "entityName",
              "entitiesTitle" : "Active Water Meters",
              "displayEntityLabel" : true,
              "enableSelectColumnDisplay" : true,
              "entityNameColumnTitle" : "Serial Number",
              "entityLabelColumnTitle" : "Label"
            },
            "title" : "Active Water Meters",
            "dropShadow" : false,
            "enableFullscreen" : true,
            "titleStyle" : {
              "fontSize" : "18px",
              "fontWeight" : 600,
              "padding" : "5px 10px 5px 5px"
            },
            "useDashboardTimewindow" : false,
            "showLegend" : false,
            "datasources" : [ {
              "type" : "entity",
              "name" : null,
              "entityAliasId" : "e47a3fcd-231c-662a-6126-f09fd8064eb2",
              "filterId" : "f5f657e4-89f6-c90d-fd0f-16d0d3bb91ec",
              "dataKeys" : [ {
                "name" : "pulseCounter",
                "type" : "timeseries",
                "label" : "Latest reading",
                "color" : "#2196f3",
                "settings" : {
                  "columnWidth" : "0px",
                  "useCellStyleFunction" : false,
                  "useCellContentFunction" : false
                },
                "_hash" : 0.6622074305397865,
                "units" : "m³",
                "decimals" : 2,
                "postFuncBody" : "return value || 0;",
                "usePostProcessing" : true,
                "funcBody" : null
              }, {
                "name" : "address",
                "type" : "attribute",
                "label" : "Address",
                "color" : "#f44336",
                "settings" : {
                  "columnWidth" : "0px",
                  "useCellStyleFunction" : false,
                  "useCellContentFunction" : false
                },
                "_hash" : 0.9392023657375805
              }, {
                "name" : "active",
                "type" : "attribute",
                "label" : "Status",
                "color" : "#ffc107",
                "settings" : {
                  "columnWidth" : "0px",
                  "useCellStyleFunction" : false,
                  "useCellContentFunction" : false
                },
                "_hash" : 0.9076421001622259,
                "postFuncBody" : "if (value === 'true') {\n    return 'Active';\n} else {\n    return 'Inactive';\n}"
              }, {
                "name" : "leakage",
                "type" : "timeseries",
                "label" : "Leakage",
                "color" : "#8bc34a",
                "settings" : {
                  "columnWidth" : "0px",
                  "useCellStyleFunction" : true,
                  "useCellContentFunction" : true,
                  "cellStyleFunction" : "var color;\nif (value == 'true') {\n    color = '#EB5757';\n} else {\n    color = '#27AE60';\n}\nreturn {\n    color: color,\n    fontSize: '18px'\n};",
                  "cellContentFunction" : "value = '&#11044;';\nreturn value;"
                },
                "_hash" : 0.9508568110027811,
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : null,
                "postFuncBody" : null
              } ]
            } ],
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableDataExport" : false,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "displayTimewindow" : true,
            "actions" : {
              "headerButton" : [ {
                "name" : "Add device",
                "icon" : "add",
                "type" : "customPretty",
                "customHtml" : "<form #addDeviceForm=\"ngForm\" [formGroup]=\"addDeviceFormGroup\" class=\"add-device-form\" (ngSubmit)=\"save()\">\n    <mat-toolbar class=\"add-device-form-toolbar\" fxLayout=\"row\">\n            <h2>Add Device</h2>\n            <span fxFlex></span>\n            <button mat-icon-button (click)=\"cancel()\" type=\"button\">\n                <mat-icon class=\"material-icons\">close</mat-icon>\n            </button>\n    </mat-toolbar>\n    <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\"></mat-progress-bar>\n    <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\n    <div mat-dialog-content fxLayout=\"column\">\n        <fieldset [disabled]=\"(isLoading$ | async) || loading\">\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Serial Number</mat-label>\n                    <input matInput formControlName=\"deviceName\" required>\n                    <mat-error *ngIf=\"addDeviceFormGroup.get('deviceName').hasError('required')\">\n                        Serial Number is required.\n                    </mat-error>\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Label</mat-label>\n                    <input matInput formControlName=\"deviceLabel\" >\n                </mat-form-field>\n            </div>\n            <div formGroupName=\"attributes\" fxLayout=\"column\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Address</mat-label>\n                    <input matInput formControlName=\"address\">\n                </mat-form-field>\n            </div>\n            <tb-owner-autocomplete\n                    formControlName=\"targetOwnerId\"\n                    [excludeOwnerIds]=\"excludeOwnerIds\"\n                    required\n                    placeholderText=\"Select device owner\"\n                    notFoundText=\"No owners matching specified filter were found.\"\n                    requiredText=\"Target owner is required.\">\n            </tb-owner-autocomplete>\n        </fieldset>\n    </div>\n    <div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\" class=\"add-device-form-actions\">\n        <button mat-button color=\"primary\"\n                type=\"button\"\n                (click)=\"cancel()\" cdkFocusInitial>\n            Cancel\n        </button>\n        <button mat-button color=\"primary\"\n                type=\"submit\"\n                [disabled]=\"(isLoading$ | async) || loading || addDeviceForm.invalid || !addDeviceForm.dirty\">\n            Create\n        </button>\n    </div>\n</form>",
                "customCss" : ".add-device-form mat-toolbar.add-device-form-toolbar {\n    background-color: #ffffff;\n    color: #333333;\n}\n.add-device-form .add-device-form-actions button[mat-button][color=\"primary\"] {\n    border: 1px solid #E0E0E0;\n}",
                "customFunction" : "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog')),\n    deviceService = $injector.get(widgetContext.servicesMap.get('deviceService')),\n    attributeService = $injector.get(widgetContext.servicesMap.get('attributeService')),\n    entityRelationService = $injector.get(widgetContext.servicesMap.get('entityRelationService')),\n    entityGroupService = $injector.get(widgetContext.servicesMap.get('entityGroupService'));\n    // userPermissionsService = $injector.get(widgetContext.servicesMap.get('userPermissionsService'));\n\nopenAddDeviceDialog();\n\nfunction openAddDeviceDialog() {\n    customDialog.customDialog(htmlTemplate, AddDeviceDialogController).subscribe();\n}\n\nfunction AddDeviceDialogController(instance) {\n    let vm = instance;\n\n    vm.deviceType = 'Water Meter';\n\n    // vm.ownerId = userPermissionsService.getUserOwnerId();\n    // vm.excludeOwnerIds = [vm.ownerId.id];\n\n    vm.currentUserOwner = widgetContext.currentUser.tenantId; // For Tenant Only\n    vm.excludeOwnerIds = [ vm.currentUserOwner ];\n\n    vm.addDeviceFormGroup = vm.fb.group({\n        deviceName: ['', [vm.validators.required]],\n        deviceLabel: [null],\n        attributes: vm.fb.group({\n            address: [null]\n        }),\n        targetOwnerId: [null, [vm.validators.required]]\n    });\n\n    vm.cancel = function() {\n        vm.dialogRef.close(null);\n    };\n\n    vm.save = () => {\n        vm.loading = true;\n        vm.addDeviceFormGroup.markAsPristine();\n        const formValues = vm.addDeviceFormGroup.value;\n        let device = {\n            name: formValues.deviceName,\n            type: vm.deviceType,\n            label: formValues.deviceLabel\n        };\n        deviceService.saveDevice(device).subscribe(\n            (device) => {\n                widgetContext.rxjs.forkJoin([\n                    entityGroupService.changeEntityOwner(formValues.targetOwnerId, device.id, true),\n                    saveAttributes(device.id),\n                    addRelation(device.id, formValues.targetOwnerId)\n                ]).subscribe(\n                    () => {\n                        vm.loading = false;\n                        widgetContext.updateAliases();\n                        vm.dialogRef.close(null);\n                    },\n                    () => {\n                        vm.loading = false;\n                    }\n                );\n            },\n            () => {\n                vm.loading = false;\n            }\n        );\n    };\n\n    function saveAttributes(entityId) {\n        let attributes = vm.addDeviceFormGroup.get('attributes').value;\n        attributes.inactivityTimeout = 7200000;\n        let attributesArray = [];\n        for (let key in attributes) {\n            if (attributes[key] !== null) {\n                attributesArray.push({key: key, value: attributes[key]});\n            }\n        }\n        if (attributesArray.length > 0) {\n            return attributeService.saveEntityAttributes(entityId, \"SERVER_SCOPE\", attributesArray);\n        } else {\n            return widgetContext.rxjs.of([]);\n        }\n    }\n    \n    function addRelation(deviceId, customerId) {\n        let relation = {\n            type: 'Owns',\n            typeGroup: 'COMMON',\n            from: customerId,\n            to: deviceId\n        };\n\n        return entityRelationService.saveRelation(relation);\n    }\n\n}",
                "customResources" : [ ],
                "id" : "1044aeb8-0967-9f56-cee1-cf700dc861ca"
              } ],
              "rowClick" : [ {
                "id" : "81dffda7-f420-5b50-05ff-fa08077b9eb9",
                "name" : "Device Details",
                "icon" : "more_horiz",
                "type" : "openDashboardState",
                "targetDashboardStateId" : "device_details",
                "setEntityId" : true
              } ],
              "actionCellButton" : [ {
                "name" : "Edit Info",
                "icon" : "edit",
                "type" : "customPretty",
                "customHtml" : "<form #editDeviceForm=\"ngForm\" [formGroup]=\"editDeviceFormGroup\" class=\"edit-device-form\" (ngSubmit)=\"save()\">\n    <mat-toolbar class=\"edit-device-form-toolbar\" fxLayout=\"row\">\n        <h2>Edit Device</h2>\n        <span fxFlex></span>\n        <button mat-icon-button (click)=\"cancel()\" type=\"button\">\n            <mat-icon class=\"material-icons\">close</mat-icon>\n        </button>\n    </mat-toolbar>\n    <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\"></mat-progress-bar>\n    <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\n    <div mat-dialog-content fxLayout=\"column\">\n        <fieldset [disabled]=\"(isLoading$ | async) || loading\">\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Serial Number</mat-label>\n                    <input matInput formControlName=\"deviceName\" required>\n                    <mat-error *ngIf=\"editDeviceFormGroup.get('deviceName').hasError('required')\">\n                        Serial Number is required.\n                    </mat-error>\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Label</mat-label>\n                    <input matInput formControlName=\"deviceLabel\" >\n                </mat-form-field>\n            </div>\n            <tb-owner-autocomplete\n                    formControlName=\"deviceOwnerId\"\n                    [excludeOwnerIds]=\"excludeOwnerIds\"\n                    required\n                    placeholderText=\"Select device owner\"\n                    notFoundText=\"No owners matching specified filter were found.\"\n                    requiredText=\"Target owner is required.\">\n            </tb-owner-autocomplete>\n        </fieldset>\n    </div>\n    <div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\" class=\"edit-device-form-actions\">\n        <button mat-button color=\"primary\"\n                type=\"button\"\n                (click)=\"cancel()\" cdkFocusInitial>\n            Cancel\n        </button>\n        <button mat-button color=\"primary\"\n                type=\"submit\"\n                [disabled]=\"(isLoading$ | async) || loading || editDeviceForm.invalid || !editDeviceForm.dirty\">\n            Save\n        </button>\n    </div>\n</form>",
                "customCss" : ".edit-device-form mat-toolbar.edit-device-form-toolbar {\n    background-color: #ffffff;\n    color: #333333;\n}\n.edit-device-form .edit-device-form-actions button[mat-button][color=\"primary\"] {\n    border: 1px solid #E0E0E0;\n}",
                "customFunction" : "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog')),\n    deviceService = $injector.get(widgetContext.servicesMap.get('deviceService')),\n    entityRelationService = $injector.get(widgetContext.servicesMap.get('entityRelationService')),\n    entityGroupService = $injector.get(widgetContext.servicesMap.get('entityGroupService'));\n// userPermissionsService = $injector.get(widgetContext.servicesMap.get('userPermissionsService'));\n\nopenEditDeviceDialog();\n\nfunction openEditDeviceDialog() {\n    customDialog.customDialog(htmlTemplate, EditDeviceDialogController).subscribe();\n}\n\nfunction EditDeviceDialogController(instance) {\n    let vm = instance;\n\n    // vm.ownerId = userPermissionsService.getUserOwnerId();\n    // vm.excludeOwnerIds = [vm.ownerId.id];\n\n    vm.currentUserOwner = widgetContext.currentUser.tenantId; // For Tenant Only\n    vm.excludeOwnerIds = [ vm.currentUserOwner ];\n\n    vm.device = {};\n\n    vm.editDeviceFormGroup = vm.fb.group({\n        deviceName: ['', [vm.validators.required]],\n        deviceLabel: [null],\n        deviceOwnerId: [null, [vm.validators.required]]\n    });\n\n    getEntityInfo();\n\n    vm.cancel = function() {\n        vm.dialogRef.close(null);\n    };\n\n    vm.save = () => {\n        vm.loading = true;\n        vm.editDeviceFormGroup.markAsPristine();\n        saveDevice().subscribe(\n            (/*device*/) => {\n                changeDeviceOwner().subscribe(\n                    () => {\n                        vm.loading = false;\n                        widgetContext.updateAliases();\n                        vm.dialogRef.close(null);\n                    },\n                    () => {\n                        vm.loading = false;\n                    }\n                );\n            },\n            () => {\n                vm.loading = false;\n            }\n        );\n    };\n\n    function getEntityInfo() {\n        vm.loading = true;\n        deviceService.getDevice(entityId.id).subscribe(\n            (device) => {\n                vm.device = device;\n                vm.excludeOwnerIds.push(vm.device.ownerId);\n                vm.editDeviceFormGroup.patchValue({\n                    deviceName: vm.device.name,\n                    deviceLabel: vm.device.label,\n                    deviceOwnerId: vm.device.ownerId\n                }, {emitEvent: false});\n                vm.loading = false;\n            }\n        );\n    }\n\n    function saveDevice() {\n        const formValues = vm.editDeviceFormGroup.value;\n        if (vm.device.name !== formValues.deviceName || (vm.device.label !== formValues.deviceLabel)) {\n            vm.device.name = formValues.deviceName;\n            vm.device.label = formValues.deviceLabel;\n            return deviceService.saveDevice(vm.device);\n        }\n        return widgetContext.rxjs.of([]);\n    }\n\n    function changeDeviceOwner() {\n        let newOwnerId = vm.editDeviceFormGroup.get('deviceOwnerId').value;\n        if (newOwnerId.id !== vm.device.ownerId.id) {\n            return widgetContext.rxjs.forkJoin([\n                entityGroupService.changeEntityOwner(newOwnerId, vm.device.id, true),\n                saveRelations(vm.device.id, vm.device.ownerId, newOwnerId)\n            ]);\n        }\n        return widgetContext.rxjs.of([]);\n    }\n\n    function saveRelations(deviceId, currentOwnerId, newOwnerId) {\n        let tasks = [\n            deleteRelation(deviceId, currentOwnerId),\n            addRelation(deviceId, newOwnerId)\n        ];\n        return widgetContext.rxjs.forkJoin(tasks);\n    }\n\n    function addRelation(deviceId, customerId) {\n        let relation = {\n            type: 'Owns',\n            typeGroup: 'COMMON',\n            from: customerId,\n            to: deviceId\n        };\n\n        return entityRelationService.saveRelation(relation);\n    }\n\n    function deleteRelation(deviceId, customerId) {\n        let relation = {\n            type: 'Owns',\n            from: customerId,\n            to: deviceId\n        };\n\n        return entityRelationService.deleteRelation(relation.from, relation.type, relation.to);\n    }\n}",
                "customResources" : [ ],
                "id" : "702a8de4-6902-3545-223d-be481a8a29f5"
              }, {
                "name" : "Set Location Parameters",
                "icon" : "location_on",
                "type" : "openDashboardState",
                "targetDashboardStateId" : "set-location",
                "setEntityId" : true,
                "stateEntityParamName" : null,
                "openInSeparateDialog" : true,
                "dialogTitle" : "",
                "dialogHideDashboardToolbar" : true,
                "dialogWidth" : null,
                "dialogHeight" : null,
                "openRightLayout" : false,
                "id" : "8e19b15c-7b8c-2ba8-fc43-d995ad0b1bbb"
              }, {
                "name" : "Set Alarm Thresholds",
                "icon" : "notifications",
                "type" : "customPretty",
                "customHtml" : "<form #editDeviceForm=\"ngForm\" [formGroup]=\"editDeviceFormGroup\" class=\"edit-device-form\" (ngSubmit)=\"save()\">\n    <mat-toolbar class=\"edit-device-form-toolbar\" fxLayout=\"row\">\n        <h2>Thresholds Configuration</h2>\n        <span fxFlex></span>\n        <button mat-icon-button (click)=\"cancel()\" type=\"button\">\n            <mat-icon class=\"material-icons\">close</mat-icon>\n        </button>\n    </mat-toolbar>\n    <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\"></mat-progress-bar>\n    <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\n    <div mat-dialog-content fxLayout=\"column\">\n        <fieldset [disabled]=\"(isLoading$ | async) || loading\">\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Daily Consumption Threshold</mat-label>\n                    <input matInput type=\"number\" step=\"any\" formControlName=\"dailyConsumptionThreshold\">\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Weekly Consumption Threshold</mat-label>\n                    <input matInput type=\"number\" step=\"any\" formControlName=\"weeklyConsumptionThreshold\" >\n                </mat-form-field>\n            </div>\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Low Battery Threshold (%)</mat-label>\n                    <input matInput type=\"number\" step=\"any\" formControlName=\"lowBattThreshold\">\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Low Temperature Threshold</mat-label>\n                    <input matInput type=\"number\" step=\"any\" formControlName=\"lowTempThreshold\" >\n                </mat-form-field>\n            </div>\n            <mat-form-field fxFlex class=\"mat-block\">\n                <mat-label>Inactivity Timeout (ms)</mat-label>\n                <input matInput type=\"number\" step=\"1\" formControlName=\"inactivityTimeout\">\n                <mat-error *ngIf=\"editDeviceFormGroup.get('inactivityTimeout').hasError('pattern')\">\n                    Invalid value\n                </mat-error>\n            </mat-form-field>\n        </fieldset>\n    </div>\n    <div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\" class=\"edit-device-form-actions\">\n        <button mat-button color=\"primary\"\n                type=\"button\"\n                (click)=\"cancel()\" cdkFocusInitial>\n            Cancel\n        </button>\n        <button mat-button color=\"primary\"\n                type=\"submit\"\n                [disabled]=\"(isLoading$ | async) || loading || editDeviceForm.invalid || !editDeviceForm.dirty\">\n            Save\n        </button>\n    </div>\n</form>",
                "customCss" : ".edit-device-form mat-toolbar.edit-device-form-toolbar {\n    background-color: #ffffff;\n    color: #333333;\n}\n.edit-device-form .edit-device-form-actions button[mat-button][color=\"primary\"] {\n    border: 1px solid #E0E0E0;\n}",
                "customFunction" : "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog')),\n    attributeService = $injector.get(widgetContext.servicesMap.get('attributeService'));\n\nopenEditDeviceDialog();\n\nfunction openEditDeviceDialog() {\n    customDialog.customDialog(htmlTemplate, EditDeviceDialogController).subscribe();\n}\n\nfunction EditDeviceDialogController(instance) {\n    let vm = instance;\n\n    vm.attributes = {};\n    let attributesKeys = ['dailyConsumptionThreshold', 'weeklyConsumptionThreshold',\n        'lowBattThreshold', 'lowTempThreshold', 'inactivityTimeout'];\n\n    vm.editDeviceFormGroup = vm.fb.group({\n        dailyConsumptionThreshold: [null],\n        weeklyConsumptionThreshold: [null],\n        lowBattThreshold: [null],\n        lowTempThreshold: [null],\n        inactivityTimeout: [null, [vm.validators.pattern(/^-?[0-9]+$/)]]\n    });\n\n    getEntityInfo(attributesKeys);\n\n    vm.cancel = function() {\n        vm.dialogRef.close(null);\n    };\n\n    vm.save = () => {\n        vm.loading = true;\n        vm.editDeviceFormGroup.markAsPristine();\n        saveAttributes(entityId).subscribe(\n            () => {\n                vm.loading = false;\n                vm.dialogRef.close(null);\n            },\n            () => {\n                vm.loading = false;\n            }\n        );\n    };\n\n    function getEntityInfo(attributesKeys) {\n        vm.loading = true;\n        attributeService.getEntityAttributes(entityId, 'SERVER_SCOPE', attributesKeys).subscribe(\n            (data) => {\n                if (data.length) {\n                    getEntityAttributes(data);\n                    vm.editDeviceFormGroup.patchValue(vm.attributes, {emitEvent: false});\n                }\n                vm.loading = false;\n            }\n        );\n    }\n\n    function getEntityAttributes(attributes) {\n        for (let i = 0; i < attributes.length; i++) {\n            vm.attributes[attributes[i].key] = attributes[i].value;\n        }\n    }\n\n    function saveAttributes(entityId) {\n        let attributes = vm.editDeviceFormGroup.value;\n        let attributesArray = [];\n        for (let key in attributes) {\n            if (attributes[key] !== vm.attributes[key]) {\n                attributesArray.push({key: key, value: attributes[key]});\n            }\n        }\n        if (attributesArray.length > 0) {\n            return attributeService.saveEntityAttributes(entityId, \"SERVER_SCOPE\", attributesArray);\n        }\n        return widgetContext.rxjs.of([]);\n    }\n}",
                "customResources" : [ ],
                "id" : "f0ff3379-9600-c51d-fbe4-911a7d0d5af4"
              } ]
            }
          },
          "id" : "52c52dab-0a43-b1c4-e041-7b7490bf036c"
        },
        "43bdfba2-255b-3336-6436-f4fdb18c5031" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"analytics\">\n        <div class='description' id=\"analytics\">\n            Analytics\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Analytics",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "analytics",
                "icon" : "more_horiz",
                "type" : "custom",
                "customFunction" : "openDashboardState('analytics');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}"
              } ]
            }
          },
          "id" : "43bdfba2-255b-3336-6436-f4fdb18c5031"
        },
        "9a3464ba-55c9-d247-487d-96671483e83d" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id='users'>\n        <div class='description' id='users'>\n            Users\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Users",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "users",
                "icon" : "more_horiz",
                "type" : "updateDashboardState",
                "targetDashboardStateId" : "users",
                "setEntityId" : false
              } ]
            }
          },
          "id" : "9a3464ba-55c9-d247-487d-96671483e83d"
        },
        "c424f0b7-e12e-9b48-e6d3-221aee944128" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"alarms\">\n        <div class='description' id=\"alarms\">\n            Alarms\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Alarms",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "alarms",
                "icon" : "more_horiz",
                "type" : "updateDashboardState",
                "targetDashboardStateId" : "alarms",
                "setEntityId" : false
              } ]
            }
          },
          "id" : "c424f0b7-e12e-9b48-e6d3-221aee944128"
        },
        "f78dce47-3bca-e586-5d6f-b26db759e832" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"settings\">\n        <div class='description' id=\"settings\">\n            Settings\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Settings",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "settings",
                "icon" : "more_horiz",
                "type" : "updateDashboardState",
                "targetDashboardStateId" : "settings",
                "setEntityId" : false
              } ]
            }
          },
          "id" : "f78dce47-3bca-e586-5d6f-b26db759e832"
        },
        "d943b91b-4567-c2a1-222a-a3b45c09bb46" : {
          "isSystemType" : true,
          "bundleAlias" : "alarm_widgets",
          "typeAlias" : "alarms_table",
          "type" : "alarm",
          "title" : "New widget",
          "sizeX" : 8,
          "sizeY" : 16,
          "config" : {
            "timewindow" : {
              "realtime" : {
                "interval" : 1000,
                "timewindowMs" : 2592000000
              },
              "aggregation" : {
                "type" : "NONE",
                "limit" : 200
              }
            },
            "showTitle" : true,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "4px",
            "settings" : {
              "enableSelection" : true,
              "enableSearch" : true,
              "displayDetails" : false,
              "allowAcknowledgment" : false,
              "allowClear" : true,
              "displayPagination" : false,
              "defaultPageSize" : 10,
              "defaultSortOrder" : "-createdTime",
              "alarmsTitle" : "Active Water Meter Alarms",
              "enableSelectColumnDisplay" : true,
              "enableFilter" : true
            },
            "title" : "Active Water Meter Alarms",
            "dropShadow" : false,
            "enableFullscreen" : false,
            "titleStyle" : {
              "fontSize" : "18px",
              "fontWeight" : 600,
              "padding" : "5px 10px 5px 5px"
            },
            "useDashboardTimewindow" : true,
            "showLegend" : false,
            "alarmSource" : {
              "type" : "entity",
              "name" : "alarms",
              "entityAliasId" : "f7bed459-ea25-5a39-bfc1-a3bb8c941d8d",
              "filterId" : "f5f657e4-89f6-c90d-fd0f-16d0d3bb91ec",
              "dataKeys" : [ {
                "name" : "createdTime",
                "type" : "alarm",
                "label" : "Created time",
                "color" : "#2196f3",
                "settings" : { },
                "_hash" : 0.8381664834025695
              }, {
                "name" : "originator",
                "type" : "alarm",
                "label" : "Originator",
                "color" : "#4caf50",
                "settings" : { },
                "_hash" : 0.2921772271979377
              }, {
                "name" : "type",
                "type" : "alarm",
                "label" : "Type",
                "color" : "#f44336",
                "settings" : {
                  "columnWidth" : "0px",
                  "useCellStyleFunction" : false,
                  "cellStyleFunction" : "",
                  "useCellContentFunction" : false,
                  "cellContentFunction" : ""
                },
                "_hash" : 0.5983551827511795
              } ]
            },
            "alarmSearchStatus" : "ACTIVE",
            "alarmsPollingInterval" : 5,
            "datasources" : [ ],
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableDataExport" : false,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "displayTimewindow" : false,
            "actions" : {
              "headerButton" : [ {
                "id" : "1f58fb76-87bf-235a-4ce8-e3b67bf3c834",
                "name" : "Alarms Details",
                "icon" : "fullscreen",
                "type" : "updateDashboardState",
                "targetDashboardStateId" : "alarms",
                "setEntityId" : false
              } ]
            },
            "alarmsMaxCountLoad" : 0,
            "alarmsFetchSize" : 100,
            "alarmStatusList" : [ "ACTIVE" ],
            "alarmSeverityList" : [ ],
            "alarmTypeList" : [ "Daily Consumption Threshold Exceeded", "Weekly Consumption Threshold Exceeded", "Low Battery", "Low Temperature", "Device Inactive", "Leakage Detected" ],
            "searchPropagatedAlarms" : true
          },
          "id" : "d943b91b-4567-c2a1-222a-a3b45c09bb46"
        },
        "71458d45-9faf-3da6-1312-f1f416913dc1" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "entities_table",
          "type" : "latest",
          "title" : "New widget",
          "sizeX" : 24,
          "sizeY" : 16,
          "config" : {
            "timewindow" : {
              "displayValue" : "",
              "selectedTab" : 0,
              "realtime" : {
                "realtimeType" : 1,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "quickInterval" : "CURRENT_DAY"
              },
              "history" : {
                "historyType" : 0,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "fixedTimewindow" : {
                  "startTimeMs" : 1684409450985,
                  "endTimeMs" : 1684495850985
                },
                "quickInterval" : "CURRENT_DAY"
              },
              "aggregation" : {
                "type" : "NONE",
                "limit" : 200
              }
            },
            "showTitle" : true,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "4px",
            "settings" : {
              "enableSearch" : true,
              "displayPagination" : false,
              "defaultPageSize" : 10,
              "displayEntityName" : true,
              "displayEntityType" : false,
              "defaultSortOrder" : "entityName",
              "entitiesTitle" : "Inactive Water Meters",
              "displayEntityLabel" : true,
              "enableSelectColumnDisplay" : true,
              "entityNameColumnTitle" : "Serial Number",
              "entityLabelColumnTitle" : "Label"
            },
            "title" : "Inactive Water Meters",
            "dropShadow" : false,
            "enableFullscreen" : true,
            "titleStyle" : {
              "fontSize" : "18px",
              "fontWeight" : 600,
              "padding" : "5px 10px 5px 5px"
            },
            "useDashboardTimewindow" : false,
            "showLegend" : false,
            "datasources" : [ {
              "type" : "entity",
              "name" : null,
              "entityAliasId" : "e47a3fcd-231c-662a-6126-f09fd8064eb2",
              "filterId" : "0f79c9b4-ffdb-f8fa-e860-a45095837597",
              "dataKeys" : [ {
                "name" : "pulseCounter",
                "type" : "timeseries",
                "label" : "Latest reading",
                "color" : "#2196f3",
                "settings" : {
                  "columnWidth" : "0px",
                  "useCellStyleFunction" : false,
                  "useCellContentFunction" : false
                },
                "_hash" : 0.6622074305397865,
                "units" : "m³",
                "decimals" : 2,
                "postFuncBody" : "return value || 0;",
                "usePostProcessing" : true,
                "funcBody" : null
              }, {
                "name" : "address",
                "type" : "attribute",
                "label" : "Address",
                "color" : "#f44336",
                "settings" : {
                  "columnWidth" : "0px",
                  "useCellStyleFunction" : false,
                  "useCellContentFunction" : false
                },
                "_hash" : 0.9392023657375805
              }, {
                "name" : "active",
                "type" : "attribute",
                "label" : "Status",
                "color" : "#ffc107",
                "settings" : {
                  "columnWidth" : "0px",
                  "useCellStyleFunction" : false,
                  "useCellContentFunction" : false
                },
                "_hash" : 0.9076421001622259,
                "postFuncBody" : "if (value === 'true') {\n    return 'Active';\n} else {\n    return 'Inactive';\n}"
              }, {
                "name" : "leakage",
                "type" : "timeseries",
                "label" : "Leakage",
                "color" : "#8bc34a",
                "settings" : {
                  "columnWidth" : "0px",
                  "useCellStyleFunction" : true,
                  "useCellContentFunction" : true,
                  "cellStyleFunction" : "var color;\nif (value == 'true') {\n    color = '#EB5757';\n} else {\n    color = '#27AE60';\n}\nreturn {\n    color: color,\n    fontSize: '18px'\n};",
                  "cellContentFunction" : "value = '&#11044;';\nreturn value;"
                },
                "_hash" : 0.9508568110027811,
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : null,
                "postFuncBody" : null
              } ]
            } ],
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableDataExport" : false,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "displayTimewindow" : true,
            "actions" : {
              "headerButton" : [ {
                "name" : "Add device",
                "icon" : "add",
                "type" : "customPretty",
                "customHtml" : "<form #addDeviceForm=\"ngForm\" [formGroup]=\"addDeviceFormGroup\" class=\"add-device-form\" (ngSubmit)=\"save()\">\n    <mat-toolbar class=\"add-device-form-toolbar\" fxLayout=\"row\">\n            <h2>Add Device</h2>\n            <span fxFlex></span>\n            <button mat-icon-button (click)=\"cancel()\" type=\"button\">\n                <mat-icon class=\"material-icons\">close</mat-icon>\n            </button>\n    </mat-toolbar>\n    <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\"></mat-progress-bar>\n    <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\n    <div mat-dialog-content fxLayout=\"column\">\n        <fieldset [disabled]=\"(isLoading$ | async) || loading\">\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Serial Number</mat-label>\n                    <input matInput formControlName=\"deviceName\" required>\n                    <mat-error *ngIf=\"addDeviceFormGroup.get('deviceName').hasError('required')\">\n                        Serial Number is required.\n                    </mat-error>\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Label</mat-label>\n                    <input matInput formControlName=\"deviceLabel\" >\n                </mat-form-field>\n            </div>\n            <div formGroupName=\"attributes\" fxLayout=\"column\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Address</mat-label>\n                    <input matInput formControlName=\"address\">\n                </mat-form-field>\n            </div>\n            <tb-owner-autocomplete\n                    formControlName=\"targetOwnerId\"\n                    [excludeOwnerIds]=\"excludeOwnerIds\"\n                    required\n                    placeholderText=\"Select device owner\"\n                    notFoundText=\"No owners matching specified filter were found.\"\n                    requiredText=\"Target owner is required.\">\n            </tb-owner-autocomplete>\n        </fieldset>\n    </div>\n    <div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\" class=\"add-device-form-actions\">\n        <button mat-button color=\"primary\"\n                type=\"button\"\n                (click)=\"cancel()\" cdkFocusInitial>\n            Cancel\n        </button>\n        <button mat-button color=\"primary\"\n                type=\"submit\"\n                [disabled]=\"(isLoading$ | async) || loading || addDeviceForm.invalid || !addDeviceForm.dirty\">\n            Create\n        </button>\n    </div>\n</form>",
                "customCss" : ".add-device-form mat-toolbar.add-device-form-toolbar {\n    background-color: #ffffff;\n    color: #333333;\n}\n.add-device-form .add-device-form-actions button[mat-button][color=\"primary\"] {\n    border: 1px solid #E0E0E0;\n}",
                "customFunction" : "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog')),\n    deviceService = $injector.get(widgetContext.servicesMap.get('deviceService')),\n    attributeService = $injector.get(widgetContext.servicesMap.get('attributeService')),\n    entityRelationService = $injector.get(widgetContext.servicesMap.get('entityRelationService')),\n    entityGroupService = $injector.get(widgetContext.servicesMap.get('entityGroupService'));\n    // userPermissionsService = $injector.get(widgetContext.servicesMap.get('userPermissionsService'));\n\nopenAddDeviceDialog();\n\nfunction openAddDeviceDialog() {\n    customDialog.customDialog(htmlTemplate, AddDeviceDialogController).subscribe();\n}\n\nfunction AddDeviceDialogController(instance) {\n    let vm = instance;\n\n    vm.deviceType = 'Water Meter';\n\n    // vm.ownerId = userPermissionsService.getUserOwnerId();\n    // vm.excludeOwnerIds = [vm.ownerId.id];\n\n    vm.currentUserOwner = widgetContext.currentUser.tenantId; // For Tenant Only\n    vm.excludeOwnerIds = [ vm.currentUserOwner ];\n\n    vm.addDeviceFormGroup = vm.fb.group({\n        deviceName: ['', [vm.validators.required]],\n        deviceLabel: [null],\n        attributes: vm.fb.group({\n            address: [null]\n        }),\n        targetOwnerId: [null, [vm.validators.required]]\n    });\n\n    vm.cancel = function() {\n        vm.dialogRef.close(null);\n    };\n\n    vm.save = () => {\n        vm.loading = true;\n        vm.addDeviceFormGroup.markAsPristine();\n        const formValues = vm.addDeviceFormGroup.value;\n        let device = {\n            name: formValues.deviceName,\n            type: vm.deviceType,\n            label: formValues.deviceLabel\n        };\n        deviceService.saveDevice(device).subscribe(\n            (device) => {\n                widgetContext.rxjs.forkJoin([\n                    entityGroupService.changeEntityOwner(formValues.targetOwnerId, device.id, true),\n                    saveAttributes(device.id),\n                    addRelation(device.id, formValues.targetOwnerId)\n                ]).subscribe(\n                    () => {\n                        vm.loading = false;\n                        widgetContext.updateAliases();\n                        vm.dialogRef.close(null);\n                    },\n                    () => {\n                        vm.loading = false;\n                    }\n                );\n            },\n            () => {\n                vm.loading = false;\n            }\n        );\n    };\n\n    function saveAttributes(entityId) {\n        let attributes = vm.addDeviceFormGroup.get('attributes').value;\n        attributes.inactivityTimeout = 7200000;\n        let attributesArray = [];\n        for (let key in attributes) {\n            if (attributes[key] !== null) {\n                attributesArray.push({key: key, value: attributes[key]});\n            }\n        }\n        if (attributesArray.length > 0) {\n            return attributeService.saveEntityAttributes(entityId, \"SERVER_SCOPE\", attributesArray);\n        } else {\n            return widgetContext.rxjs.of([]);\n        }\n    }\n    \n    function addRelation(deviceId, customerId) {\n        let relation = {\n            type: 'Owns',\n            typeGroup: 'COMMON',\n            from: customerId,\n            to: deviceId\n        };\n\n        return entityRelationService.saveRelation(relation);\n    }\n\n}",
                "customResources" : [ ],
                "id" : "1044aeb8-0967-9f56-cee1-cf700dc861ca"
              } ],
              "rowClick" : [ {
                "id" : "81dffda7-f420-5b50-05ff-fa08077b9eb9",
                "name" : "Device Details",
                "icon" : "more_horiz",
                "type" : "openDashboardState",
                "targetDashboardStateId" : "device_details",
                "setEntityId" : true
              } ],
              "actionCellButton" : [ {
                "name" : "Edit Info",
                "icon" : "edit",
                "type" : "customPretty",
                "customHtml" : "<form #editDeviceForm=\"ngForm\" [formGroup]=\"editDeviceFormGroup\" class=\"edit-device-form\" (ngSubmit)=\"save()\">\n    <mat-toolbar class=\"edit-device-form-toolbar\" fxLayout=\"row\">\n        <h2>Edit Device</h2>\n        <span fxFlex></span>\n        <button mat-icon-button (click)=\"cancel()\" type=\"button\">\n            <mat-icon class=\"material-icons\">close</mat-icon>\n        </button>\n    </mat-toolbar>\n    <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\"></mat-progress-bar>\n    <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\n    <div mat-dialog-content fxLayout=\"column\">\n        <fieldset [disabled]=\"(isLoading$ | async) || loading\">\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Serial Number</mat-label>\n                    <input matInput formControlName=\"deviceName\" required>\n                    <mat-error *ngIf=\"editDeviceFormGroup.get('deviceName').hasError('required')\">\n                        Serial Number is required.\n                    </mat-error>\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Label</mat-label>\n                    <input matInput formControlName=\"deviceLabel\" >\n                </mat-form-field>\n            </div>\n            <tb-owner-autocomplete\n                    formControlName=\"deviceOwnerId\"\n                    [excludeOwnerIds]=\"excludeOwnerIds\"\n                    required\n                    placeholderText=\"Select device owner\"\n                    notFoundText=\"No owners matching specified filter were found.\"\n                    requiredText=\"Target owner is required.\">\n            </tb-owner-autocomplete>\n        </fieldset>\n    </div>\n    <div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\" class=\"edit-device-form-actions\">\n        <button mat-button color=\"primary\"\n                type=\"button\"\n                (click)=\"cancel()\" cdkFocusInitial>\n            Cancel\n        </button>\n        <button mat-button color=\"primary\"\n                type=\"submit\"\n                [disabled]=\"(isLoading$ | async) || loading || editDeviceForm.invalid || !editDeviceForm.dirty\">\n            Save\n        </button>\n    </div>\n</form>",
                "customCss" : ".edit-device-form mat-toolbar.edit-device-form-toolbar {\n    background-color: #ffffff;\n    color: #333333;\n}\n.edit-device-form .edit-device-form-actions button[mat-button][color=\"primary\"] {\n    border: 1px solid #E0E0E0;\n}",
                "customFunction" : "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog')),\n    deviceService = $injector.get(widgetContext.servicesMap.get('deviceService')),\n    entityRelationService = $injector.get(widgetContext.servicesMap.get('entityRelationService')),\n    entityGroupService = $injector.get(widgetContext.servicesMap.get('entityGroupService'));\n// userPermissionsService = $injector.get(widgetContext.servicesMap.get('userPermissionsService'));\n\nopenEditDeviceDialog();\n\nfunction openEditDeviceDialog() {\n    customDialog.customDialog(htmlTemplate, EditDeviceDialogController).subscribe();\n}\n\nfunction EditDeviceDialogController(instance) {\n    let vm = instance;\n\n    // vm.ownerId = userPermissionsService.getUserOwnerId();\n    // vm.excludeOwnerIds = [vm.ownerId.id];\n\n    vm.currentUserOwner = widgetContext.currentUser.tenantId; // For Tenant Only\n    vm.excludeOwnerIds = [ vm.currentUserOwner ];\n\n    vm.device = {};\n\n    vm.editDeviceFormGroup = vm.fb.group({\n        deviceName: ['', [vm.validators.required]],\n        deviceLabel: [null],\n        deviceOwnerId: [null, [vm.validators.required]]\n    });\n\n    getEntityInfo();\n\n    vm.cancel = function() {\n        vm.dialogRef.close(null);\n    };\n\n    vm.save = () => {\n        vm.loading = true;\n        vm.editDeviceFormGroup.markAsPristine();\n        saveDevice().subscribe(\n            (/*device*/) => {\n                changeDeviceOwner().subscribe(\n                    () => {\n                        vm.loading = false;\n                        widgetContext.updateAliases();\n                        vm.dialogRef.close(null);\n                    },\n                    () => {\n                        vm.loading = false;\n                    }\n                );\n            },\n            () => {\n                vm.loading = false;\n            }\n        );\n    };\n\n    function getEntityInfo() {\n        vm.loading = true;\n        deviceService.getDevice(entityId.id).subscribe(\n            (device) => {\n                vm.device = device;\n                vm.excludeOwnerIds.push(vm.device.ownerId);\n                vm.editDeviceFormGroup.patchValue({\n                    deviceName: vm.device.name,\n                    deviceLabel: vm.device.label,\n                    deviceOwnerId: vm.device.ownerId\n                }, {emitEvent: false});\n                vm.loading = false;\n            }\n        );\n    }\n\n    function saveDevice() {\n        const formValues = vm.editDeviceFormGroup.value;\n        if (vm.device.name !== formValues.deviceName || (vm.device.label !== formValues.deviceLabel)) {\n            vm.device.name = formValues.deviceName;\n            vm.device.label = formValues.deviceLabel;\n            return deviceService.saveDevice(vm.device);\n        }\n        return widgetContext.rxjs.of([]);\n    }\n\n    function changeDeviceOwner() {\n        let newOwnerId = vm.editDeviceFormGroup.get('deviceOwnerId').value;\n        if (newOwnerId.id !== vm.device.ownerId.id) {\n            return widgetContext.rxjs.forkJoin([\n                entityGroupService.changeEntityOwner(newOwnerId, vm.device.id, true),\n                saveRelations(vm.device.id, vm.device.ownerId, newOwnerId)\n            ]);\n        }\n        return widgetContext.rxjs.of([]);\n    }\n\n    function saveRelations(deviceId, currentOwnerId, newOwnerId) {\n        let tasks = [\n            deleteRelation(deviceId, currentOwnerId),\n            addRelation(deviceId, newOwnerId)\n        ];\n        return widgetContext.rxjs.forkJoin(tasks);\n    }\n\n    function addRelation(deviceId, customerId) {\n        let relation = {\n            type: 'Owns',\n            typeGroup: 'COMMON',\n            from: customerId,\n            to: deviceId\n        };\n\n        return entityRelationService.saveRelation(relation);\n    }\n\n    function deleteRelation(deviceId, customerId) {\n        let relation = {\n            type: 'Owns',\n            from: customerId,\n            to: deviceId\n        };\n\n        return entityRelationService.deleteRelation(relation.from, relation.type, relation.to);\n    }\n}",
                "customResources" : [ ],
                "id" : "702a8de4-6902-3545-223d-be481a8a29f5"
              }, {
                "name" : "Set Location Parameters",
                "icon" : "location_on",
                "type" : "openDashboardState",
                "targetDashboardStateId" : "set-location",
                "setEntityId" : true,
                "stateEntityParamName" : null,
                "openInSeparateDialog" : true,
                "dialogTitle" : "",
                "dialogHideDashboardToolbar" : true,
                "dialogWidth" : null,
                "dialogHeight" : null,
                "openRightLayout" : false,
                "id" : "8e19b15c-7b8c-2ba8-fc43-d995ad0b1bbb"
              }, {
                "name" : "Set Alarm Thresholds",
                "icon" : "notifications",
                "type" : "customPretty",
                "customHtml" : "<form #editDeviceForm=\"ngForm\" [formGroup]=\"editDeviceFormGroup\" class=\"edit-device-form\" (ngSubmit)=\"save()\">\n    <mat-toolbar class=\"edit-device-form-toolbar\" fxLayout=\"row\">\n        <h2>Thresholds Configuration</h2>\n        <span fxFlex></span>\n        <button mat-icon-button (click)=\"cancel()\" type=\"button\">\n            <mat-icon class=\"material-icons\">close</mat-icon>\n        </button>\n    </mat-toolbar>\n    <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\"></mat-progress-bar>\n    <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\n    <div mat-dialog-content fxLayout=\"column\">\n        <fieldset [disabled]=\"(isLoading$ | async) || loading\">\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Daily Consumption Threshold</mat-label>\n                    <input matInput type=\"number\" step=\"any\" formControlName=\"dailyConsumptionThreshold\">\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Weekly Consumption Threshold</mat-label>\n                    <input matInput type=\"number\" step=\"any\" formControlName=\"weeklyConsumptionThreshold\" >\n                </mat-form-field>\n            </div>\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Low Battery Threshold (%)</mat-label>\n                    <input matInput type=\"number\" step=\"any\" formControlName=\"lowBattThreshold\">\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Low Temperature Threshold</mat-label>\n                    <input matInput type=\"number\" step=\"any\" formControlName=\"lowTempThreshold\" >\n                </mat-form-field>\n            </div>\n            <mat-form-field fxFlex class=\"mat-block\">\n                <mat-label>Inactivity Timeout (ms)</mat-label>\n                <input matInput type=\"number\" step=\"1\" formControlName=\"inactivityTimeout\">\n                <mat-error *ngIf=\"editDeviceFormGroup.get('inactivityTimeout').hasError('pattern')\">\n                    Invalid value\n                </mat-error>\n            </mat-form-field>\n        </fieldset>\n    </div>\n    <div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\" class=\"edit-device-form-actions\">\n        <button mat-button color=\"primary\"\n                type=\"button\"\n                (click)=\"cancel()\" cdkFocusInitial>\n            Cancel\n        </button>\n        <button mat-button color=\"primary\"\n                type=\"submit\"\n                [disabled]=\"(isLoading$ | async) || loading || editDeviceForm.invalid || !editDeviceForm.dirty\">\n            Save\n        </button>\n    </div>\n</form>",
                "customCss" : ".edit-device-form mat-toolbar.edit-device-form-toolbar {\n    background-color: #ffffff;\n    color: #333333;\n}\n.edit-device-form .edit-device-form-actions button[mat-button][color=\"primary\"] {\n    border: 1px solid #E0E0E0;\n}",
                "customFunction" : "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog')),\n    attributeService = $injector.get(widgetContext.servicesMap.get('attributeService'));\n\nopenEditDeviceDialog();\n\nfunction openEditDeviceDialog() {\n    customDialog.customDialog(htmlTemplate, EditDeviceDialogController).subscribe();\n}\n\nfunction EditDeviceDialogController(instance) {\n    let vm = instance;\n\n    vm.attributes = {};\n    let attributesKeys = ['dailyConsumptionThreshold', 'weeklyConsumptionThreshold',\n        'lowBattThreshold', 'lowTempThreshold', 'inactivityTimeout'];\n\n    vm.editDeviceFormGroup = vm.fb.group({\n        dailyConsumptionThreshold: [null],\n        weeklyConsumptionThreshold: [null],\n        lowBattThreshold: [null],\n        lowTempThreshold: [null],\n        inactivityTimeout: [null, [vm.validators.pattern(/^-?[0-9]+$/)]]\n    });\n\n    getEntityInfo(attributesKeys);\n\n    vm.cancel = function() {\n        vm.dialogRef.close(null);\n    };\n\n    vm.save = () => {\n        vm.loading = true;\n        vm.editDeviceFormGroup.markAsPristine();\n        saveAttributes(entityId).subscribe(\n            () => {\n                vm.loading = false;\n                vm.dialogRef.close(null);\n            },\n            () => {\n                vm.loading = false;\n            }\n        );\n    };\n\n    function getEntityInfo(attributesKeys) {\n        vm.loading = true;\n        attributeService.getEntityAttributes(entityId, 'SERVER_SCOPE', attributesKeys).subscribe(\n            (data) => {\n                if (data.length) {\n                    getEntityAttributes(data);\n                    vm.editDeviceFormGroup.patchValue(vm.attributes, {emitEvent: false});\n                }\n                vm.loading = false;\n            }\n        );\n    }\n\n    function getEntityAttributes(attributes) {\n        for (let i = 0; i < attributes.length; i++) {\n            vm.attributes[attributes[i].key] = attributes[i].value;\n        }\n    }\n\n    function saveAttributes(entityId) {\n        let attributes = vm.editDeviceFormGroup.value;\n        let attributesArray = [];\n        for (let key in attributes) {\n            if (attributes[key] !== vm.attributes[key]) {\n                attributesArray.push({key: key, value: attributes[key]});\n            }\n        }\n        if (attributesArray.length > 0) {\n            return attributeService.saveEntityAttributes(entityId, \"SERVER_SCOPE\", attributesArray);\n        }\n        return widgetContext.rxjs.of([]);\n    }\n}",
                "customResources" : [ ],
                "id" : "f0ff3379-9600-c51d-fbe4-911a7d0d5af4"
              } ]
            }
          },
          "id" : "71458d45-9faf-3da6-1312-f1f416913dc1"
        },
        "9a8ff90e-c07e-3ae7-7119-fd08305da5cc" : {
          "isSystemType" : true,
          "bundleAlias" : "alarm_widgets",
          "typeAlias" : "alarms_table",
          "type" : "alarm",
          "title" : "New widget",
          "sizeX" : 8,
          "sizeY" : 16,
          "config" : {
            "timewindow" : {
              "realtime" : {
                "interval" : 1000,
                "timewindowMs" : 2592000000
              },
              "aggregation" : {
                "type" : "NONE",
                "limit" : 200
              }
            },
            "showTitle" : true,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "4px",
            "settings" : {
              "enableSelection" : true,
              "enableSearch" : true,
              "displayDetails" : false,
              "allowAcknowledgment" : false,
              "allowClear" : true,
              "displayPagination" : false,
              "defaultPageSize" : 10,
              "defaultSortOrder" : "-createdTime",
              "alarmsTitle" : "Inactive Water Meter Alarms",
              "enableSelectColumnDisplay" : true,
              "enableFilter" : true
            },
            "title" : "Inactive Water Meter Alarms",
            "dropShadow" : false,
            "enableFullscreen" : false,
            "titleStyle" : {
              "fontSize" : "18px",
              "fontWeight" : 600,
              "padding" : "5px 10px 5px 5px"
            },
            "useDashboardTimewindow" : true,
            "showLegend" : false,
            "alarmSource" : {
              "type" : "entity",
              "name" : "alarms",
              "entityAliasId" : "f7bed459-ea25-5a39-bfc1-a3bb8c941d8d",
              "filterId" : "0f79c9b4-ffdb-f8fa-e860-a45095837597",
              "dataKeys" : [ {
                "name" : "createdTime",
                "type" : "alarm",
                "label" : "Created time",
                "color" : "#2196f3",
                "settings" : { },
                "_hash" : 0.8381664834025695
              }, {
                "name" : "originator",
                "type" : "alarm",
                "label" : "Originator",
                "color" : "#4caf50",
                "settings" : { },
                "_hash" : 0.2921772271979377
              }, {
                "name" : "type",
                "type" : "alarm",
                "label" : "Type",
                "color" : "#f44336",
                "settings" : {
                  "columnWidth" : "0px",
                  "useCellStyleFunction" : false,
                  "cellStyleFunction" : "",
                  "useCellContentFunction" : false,
                  "cellContentFunction" : ""
                },
                "_hash" : 0.5983551827511795
              } ]
            },
            "alarmSearchStatus" : "ACTIVE",
            "alarmsPollingInterval" : 5,
            "datasources" : [ ],
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableDataExport" : false,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "displayTimewindow" : false,
            "actions" : {
              "headerButton" : [ {
                "id" : "1f58fb76-87bf-235a-4ce8-e3b67bf3c834",
                "name" : "Alarms Details",
                "icon" : "fullscreen",
                "type" : "updateDashboardState",
                "targetDashboardStateId" : "alarms",
                "setEntityId" : false
              } ]
            },
            "alarmsMaxCountLoad" : 0,
            "alarmsFetchSize" : 100,
            "alarmStatusList" : [ "ACTIVE" ],
            "alarmSeverityList" : [ ],
            "alarmTypeList" : [ "Daily Consumption Threshold Exceeded", "Weekly Consumption Threshold Exceeded", "Low Battery", "Low Temperature", "Device Inactive", "Leakage Detected" ],
            "searchPropagatedAlarms" : true
          },
          "id" : "9a8ff90e-c07e-3ae7-7119-fd08305da5cc"
        },
        "20e020b4-4030-4f44-b4fd-a755f80c7655" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"devices\">\n        <div class='description' id=\"devices\">\n            Devices\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Devices",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "devices",
                "icon" : "more_horiz",
                "type" : "updateDashboardState",
                "targetDashboardStateId" : "devices",
                "setEntityId" : false
              } ]
            }
          },
          "id" : "20e020b4-4030-4f44-b4fd-a755f80c7655"
        },
        "2e77d135-dfd4-10c3-e15b-31a26375e552" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "image" : null,
          "description" : null,
          "sizeX" : 7.5,
          "sizeY" : 3,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"assets\">\n        <div class='description' id=\"assets\">\n            Assets\n        </div>\n    </div>\n</div>",
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n    opacity: 0.5;\n}\n"
            },
            "title" : "Navigation: Assets",
            "dropShadow" : false,
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "widgetCss" : "",
            "pageSize" : 1024,
            "noDataDisplayMessage" : "",
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "name" : "assets",
                "icon" : "more_horiz",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "updateDashboardState",
                "targetDashboardStateId" : "assets",
                "setEntityId" : false,
                "stateEntityParamName" : null,
                "openRightLayout" : false,
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "50d09535-2ff6-589d-8b64-01b87e056a59"
              } ]
            }
          },
          "row" : 0,
          "col" : 0,
          "id" : "2e77d135-dfd4-10c3-e15b-31a26375e552"
        },
        "3584d7a9-2c01-2225-1824-b6e19a17a134" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"analytics\">\n        <div class='description' id=\"analytics\">\n            Analytics\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Analytics",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "analytics",
                "icon" : "more_horiz",
                "type" : "custom",
                "customFunction" : "openDashboardState('analytics');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}"
              } ]
            }
          },
          "id" : "3584d7a9-2c01-2225-1824-b6e19a17a134"
        },
        "024efb1a-ba5b-dcae-909c-819797bf9846" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardHtml" : "<div class='card'>\n    <div class='content' id='users'>\n        <div class='description' id='users'>\n            Users\n        </div>\n    </div>\n</div>",
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n"
            },
            "title" : "Navigation:  Users",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "Navigate to the list of customers",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "name" : "users",
                "icon" : "more_horiz",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "updateDashboardState",
                "targetDashboardStateId" : "users",
                "setEntityId" : false,
                "stateEntityParamName" : null,
                "openRightLayout" : null,
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207"
              } ]
            },
            "widgetCss" : "",
            "pageSize" : 1024,
            "noDataDisplayMessage" : ""
          },
          "id" : "024efb1a-ba5b-dcae-909c-819797bf9846"
        },
        "8b56ea37-eab0-19ad-571e-9c595853a983" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"alarms\">\n        <div class='description' id=\"alarms\">\n            Alarms\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Alarms",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "alarms",
                "icon" : "more_horiz",
                "type" : "updateDashboardState",
                "targetDashboardStateId" : "alarms",
                "setEntityId" : false
              } ]
            }
          },
          "id" : "8b56ea37-eab0-19ad-571e-9c595853a983"
        },
        "9ce483d5-4b81-1660-84c9-e7ed3ab2b10c" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"settings\">\n        <div class='description' id=\"settings\">\n            Settings\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Settings",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "settings",
                "icon" : "more_horiz",
                "type" : "updateDashboardState",
                "targetDashboardStateId" : "settings",
                "setEntityId" : false
              } ]
            }
          },
          "id" : "9ce483d5-4b81-1660-84c9-e7ed3ab2b10c"
        },
        "f3be2b72-af24-d31b-5a90-4f644aac1049" : {
          "isSystemType" : true,
          "bundleAlias" : "maps_v2",
          "typeAlias" : "openstreetmap",
          "type" : "latest",
          "title" : "New widget",
          "image" : null,
          "description" : null,
          "sizeX" : 8.5,
          "sizeY" : 6,
          "config" : {
            "datasources" : [ {
              "type" : "entity",
              "name" : null,
              "entityAliasId" : "f7bed459-ea25-5a39-bfc1-a3bb8c941d8d",
              "filterId" : null,
              "dataKeys" : [ {
                "name" : "latitude",
                "type" : "attribute",
                "label" : "latitude",
                "color" : "#2196f3",
                "settings" : { },
                "_hash" : 0.8084184603320734
              }, {
                "name" : "longitude",
                "type" : "attribute",
                "label" : "longitude",
                "color" : "#4caf50",
                "settings" : { },
                "_hash" : 0.024831526899971035
              } ]
            } ],
            "timewindow" : {
              "displayValue" : "",
              "selectedTab" : 0,
              "realtime" : {
                "realtimeType" : 1,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "quickInterval" : "CURRENT_DAY"
              },
              "history" : {
                "historyType" : 0,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "fixedTimewindow" : {
                  "startTimeMs" : 1684409450985,
                  "endTimeMs" : 1684495850985
                },
                "quickInterval" : "CURRENT_DAY"
              },
              "aggregation" : {
                "type" : "AVG",
                "limit" : 25000
              }
            },
            "showTitle" : true,
            "backgroundColor" : "#fff",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "8px",
            "settings" : {
              "provider" : "openstreet-map",
              "gmApiKey" : "AIzaSyDoEx2kaGz3PxwbI9T7ccTSg5xjdw8Nw8Q",
              "gmDefaultMapType" : "roadmap",
              "mapProvider" : "OpenStreetMap.Mapnik",
              "useCustomProvider" : false,
              "customProviderTileUrl" : "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
              "mapProviderHere" : "HERE.normalDay",
              "credentials" : {
                "app_id" : "AhM6TzD9ThyK78CT3ptx",
                "app_code" : "p6NPiITB3Vv0GMUFnkLOOg"
              },
              "mapImageUrl" : "data:image/svg+xml;base64,PHN2ZyBpZD0ic3ZnMiIgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTAwIiB3aWR0aD0iMTAwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgdmlld0JveD0iMCAwIDEwMCAxMDAiPgogPGcgaWQ9ImxheWVyMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAtOTUyLjM2KSI+CiAgPHJlY3QgaWQ9InJlY3Q0Njg0IiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBoZWlnaHQ9Ijk5LjAxIiB3aWR0aD0iOTkuMDEiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiB5PSI5NTIuODYiIHg9Ii40OTUwNSIgc3Ryb2tlLXdpZHRoPSIuOTkwMTAiIGZpbGw9IiNlZWUiLz4KICA8dGV4dCBpZD0idGV4dDQ2ODYiIHN0eWxlPSJ3b3JkLXNwYWNpbmc6MHB4O2xldHRlci1zcGFjaW5nOjBweDt0ZXh0LWFuY2hvcjptaWRkbGU7dGV4dC1hbGlnbjpjZW50ZXIiIGZvbnQtd2VpZ2h0PSJib2xkIiB4bWw6c3BhY2U9InByZXNlcnZlIiBmb250LXNpemU9IjEwcHgiIGxpbmUtaGVpZ2h0PSIxMjUlIiB5PSI5NzAuNzI4MDkiIHg9IjQ5LjM5NjQ3NyIgZm9udC1mYW1pbHk9IlJvYm90byIgZmlsbD0iIzY2NjY2NiI+PHRzcGFuIGlkPSJ0c3BhbjQ2OTAiIHg9IjUwLjY0NjQ3NyIgeT0iOTcwLjcyODA5Ij5JbWFnZSBiYWNrZ3JvdW5kIDwvdHNwYW4+PHRzcGFuIGlkPSJ0c3BhbjQ2OTIiIHg9IjQ5LjM5NjQ3NyIgeT0iOTgzLjIyODA5Ij5pcyBub3QgY29uZmlndXJlZDwvdHNwYW4+PC90ZXh0PgogIDxyZWN0IGlkPSJyZWN0NDY5NCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgaGVpZ2h0PSIxOS4zNiIgd2lkdGg9IjY5LjM2IiBzdHJva2U9IiMwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgeT0iOTkyLjY4IiB4PSIxNS4zMiIgc3Ryb2tlLXdpZHRoPSIuNjM5ODYiIGZpbGw9Im5vbmUiLz4KIDwvZz4KPC9zdmc+Cg==",
              "tmApiKey" : "84d6d83e0e51e481e50454ccbe8986b",
              "tmDefaultMapType" : "roadmap",
              "latKeyName" : "latitude",
              "lngKeyName" : "longitude",
              "xPosKeyName" : "xPos",
              "yPosKeyName" : "yPos",
              "defaultCenterPosition" : "0,0",
              "disableScrollZooming" : false,
              "disableZoomControl" : false,
              "fitMapBounds" : true,
              "useDefaultCenterPosition" : false,
              "mapPageSize" : 16384,
              "markerOffsetX" : 0.5,
              "markerOffsetY" : 1,
              "draggableMarker" : false,
              "showLabel" : true,
              "useLabelFunction" : false,
              "label" : "${entityName}",
              "showTooltip" : true,
              "showTooltipAction" : "click",
              "autocloseTooltip" : true,
              "useTooltipFunction" : false,
              "tooltipPattern" : "<b>${entityName}</b><br/><br/><b>Latitude:</b> ${latitude:7}<br/><b>Longitude:</b> ${longitude:7}<br/><b>Temperature:</b> ${temperature} °C<br/><small>See advanced settings for details</small>",
              "tooltipOffsetX" : 0,
              "tooltipOffsetY" : -1,
              "color" : "#fe7569",
              "useColorFunction" : true,
              "colorFunction" : "var type = dsData[dsIndex]['Type'];\nif (type == 'colorpin') {\n\tvar temperature = dsData[dsIndex]['temperature'];\n\tif (typeof temperature !== undefined) {\n\t    var percent = (temperature + 60)/120 * 100;\n\t    return tinycolor.mix('blue', 'red', percent).toHexString();\n\t}\n\treturn 'blue';\n}\n",
              "useMarkerImageFunction" : true,
              "markerImageFunction" : "var type = dsData[dsIndex]['Type'];\nif (type == 'thermometer') {\n\tvar res = {\n\t    url: images[0],\n\t    size: 40\n\t}\n\tvar temperature = dsData[dsIndex]['temperature'];\n\tif (typeof temperature !== undefined) {\n\t    var percent = (temperature + 60)/120;\n\t    var index = Math.min(3, Math.floor(4 * percent));\n\t    res.url = images[index];\n\t}\n\treturn res;\n}",
              "markerImages" : [ "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAB/CAYAAAD4mHJdAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAACWAAAAlgB7MGOJQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAwgSURBVGiB7Zt5cBT3lce/v18fc89oRoPEIRBCHIUxp2ywCAgIxLExvoidZIFNxXE2VXHirIO3aqtSseM43qpNeZfYKecox3bhpJykYgdjDkU2mBAB5vCamMNYAgQyURBCoxnNPd39O/aP7hGSEUR24L/uqqf+zfR77/Pe69/Rv6kWwcgPLRIJfZUAa7xez2xd90QBwDSNZKlkHJHAK+l09mUA7BP4vPpRUVExMVoRef+L998njxx9X57vPi/PnTsnO850yPaT7XLXrrflqjtWymhF+HA0Gp0wEp/kHymEQqG4ptJDGzf+um5RUxMSiV7Z3Lyt88L5nozgHJWj4pGmpqZav99PWve04onHHuswmViQzWb7ruZX+Udgv8/z3A+f/NGye1evxssvb+wo5PMfTZs6bfqcuXNHL7hlweh58+ZVAOTUpk2b0p9dvjyqqmrs/b8ejpUMc+unzjgUCsXjsYruE+2n1JY/NedM0zCi0VjA7/d7/f4AAgE//H4/vF4fOjvP9h5695C/oaEhcN/q1SyTzVdnMpnklXzTq4EplUsXfmaRCgC7du3cOn78+KfGj59Add3z1Md1vV7vqPa2D1sA4MYbZ6qUiqVX9X21i4TQcfX19QCA6urquN/vn0kAPRQKpYbTnzRpUhgAampqAEFrPjVYSql7fD4AgK5r2tV0AcDj8WkAoOk6JJGeTw2+nocLdsEu2AW7YBfsgl2wC3bBLtgFu2AX7IJdsAt2wS7YBbtgF+yCXbALdsEu2AW7YBfsgl2wC76mh/ppjIQgXVloPxVSBRV0rBe455P6+kTKBYF3tonxY/IWarry7DvI298Tgp0PR9RzACaN1NeIS100+EdvKXW3cMZvF8wCK10Sq2it2NAzakmukP/wmoP/KuId3BRUMg5uCfCSNVSKVn1rNto7Un8jLrUVqJ4Fi2eEQiEYBzOsy3SYL37TNQdzi8Q5FxkqJIQBsNLlYMGF/zqAJWBxSEogDAY+DJibYqTuRg4WFgO3OKhCYTExbKk5G/mbkSPP2DQhLA5IO/NhSz1MMP882BDgnAFQwdiVSs2vPVhYDIJLUMkBgw1favM6lJoZDDAYhKbAYsOX+rqAhcXAuQSIAKzhSy2vS8YmB7NYH4WCfM7kw5VaWtdpOO3bfWZJZVXgPxMX898bVsm6RhkTIseX29yyIErm/J5z5vwr6pvmsLYjBgeDwSpVJS/OmT1n1de+9qANZgLc4q9Dyj2qQhUhSSUAUCL7GBcchCymTEYBYNWqVXj30MGHT586PZEJ+WAul7ts8bjspd9QKDRNU2nz4z94YtI3H3oI+XwB//3j/9m77eRUUJ9/0eh4APGoDz6vCi4ksgUTmYyBC4k8RLGwtzF+EGu+tHqRqqrYtm0rXnzhhQ7G5cpsNnvyiuBIJFKnqvSd55772eilS5fhwIH9ye+/dPaEf1T9otW3T8GtiyYgGNBBymYEgLSbvakidu8/h01vnkYhcab1gcVs5tx5c6PHjh7DU0/9qFsINPb3939UZg28X11dXR0Qwtr9g8efqGtc+Bn89re/O7FhR9BXNaFm+n98uxHTZ1SDKQqKAihweZlITUVtXQwNs8fg+Bmzdk+bnmPdf/7bwsbGeO2ECaED+9/5XCxWuTGbzVpDwJpGNtx+28o77rr7bmzZsu3k7z+cMlHzeiPrvnoTwtVhFAVQHAZY4HBEoiAAeDXUjI/gyJGeQEd6TFj2tHYuXNgYy2azVe0fngiWDLNloHNFo4FZkXDsoTVr1+KD4x8U/3Ci1qP5PV7N74FeFUbClKDEriy57A5JANL5a68hnqoINL8OAPqbXbNp7clTxTVr1/oOHjr0MFXxq2Qy9wEFACnoY//6la9QAHj+9Q/eUL2RWkVXoWgqkhZBypRImkDKBFIWkLIk+h1JWdL+zrmeNCWSDFB0DYquQvWG637TcnozAKxbt45yTr8PAGowGBwVDAbvmT9/Pvbu3dddijV9WdUUUE0BUQm6kwaCYe+ljK/w8ruUdsYCBLlMEUQhoJoCygWM+LIvHTx4sGfevIbqYMD3BSFkJVUUrG5oaFABoPXwhd1UVUBVahtpKtoOnEV/gSHHgBwDso5c6XO6yNF24CNQTbV9qBRUUenuwz1/BoCZM2dplOJeSggWL1myFEII9IeXziIKBVUUW1QKo2Ci41Anei9kkWcY6Ex5R8qfc0wi0ZPF6QNnYeQNB2j7IQpFOtg0WwiBxoWNIBKLVQI6Z8rUqTh69FiWaFNmEIWgLFShoM5TZbIzgVxvFp6ID5rfA6JQgBAIxsGLJkrpAsycAcH4gN1gX0QPTW9vP5Grr58cJJTOpbqmjgWAnp6ei4QSEEJAKAGh1BbHCS2DLAFmMAgmICwObjDnyYMMAtJL9oN89vRc7KWUQtOUsSqhSggA8sWivSEh9qBxTiCEAGRwQARUVaB67Hf5pZAQlA0Ayrq2LTCogVyhlLURNEw55yYABP2+4ED3vHSClBKQ9jiFdHqvEBCMQzAOKYSt6/RqSGnbDPJRbgT93hAAcM4NyhjrBYDKylhswEEZJgYJFxDchnGTwSqasIomuMnsIDiH5GKIzUAQTsCVlZUxB9xLIUVbKpVEff3kiLTMfimEA7HP5bZgHMJ07mnJAiuaYEXT3jcZDMLkTgBD7exgBKRp9NfVTQwnk0kIKduoJGRH8/ZmhMNh4skc3DnEkDlAi4GbtjDDguVAmZM1M6yB68JyKsCGBqD373s7GAySnTt3gBDyFhWCvPHee/8HAJhTU5g0BMg4uMXBTT4AZSUTrGjBKpiwCnablQbDbZuyfTmAuRPMegA4euQopCRbaCaTOd2XSLzX3d2Nu+64bR7PnP3LJSCDMBm4YW9FWcmyQYMytsW+Zpfdsm1MdimAdMc7K29bMedCdzeSyeS76XT6jLNI4PGf/+w5aLqOu25IjOOWKcSg0jJjcLZ2ecsZD5TdybqsOxC0ZYpbJ58frek6nn/+eVBJHgecjXkqk2nu7Ozcdfz4cdx556rJN5C3m8v3jBt2xpdnazjysawNy5lUbKkrbmtZsWL5pGNHj6Or62+7k5lMy5CFNRQKTfN6tAMvvvhSRe3EOqx/4oXXLvia7qO6CsVZrey5154KB5YpKSG5tHs+5/ZsZnEIk6Ei1fLH73373i/09fXi0fWPpgyTLchkMqeGgAEgHA5/vjJWsf2PmzYr1dXV+K8fP7vjLxduWkY8ilpetQZPg+UJxh63lzqlNDi7gTa3fuPraz6bzxXw79/5FutP51am0+kdZdaQ/2kzDKNDUci51179w8pbP3er8sAD6+pnVCWy+/fs21LAqBnlMT50qJXFLq2a2L/5gaVy7N133j69u7sb67/7iFHIFf4tlU6/Ppg1kLGU8hYAywBMeOWV33gfXb9+1Q+ffDL+4Ne/AcYY/tS8PbV5++4Dhy+MopY2ZrLiidQDgDBSp5TS+Y7psS65ZOHsW26++eYosxje2PwGNm586eKzz/x027+sXWsBOAfgbULIQQAgUspaAA8BGAfnsamrq4u0tZ0Q333kkdGmZS3f8JNnlBXLV0AOilRKCS7sWYlxjlKxgHw+j5Y3W/C/Tz/NQ6Hgjp9seKZ31py5ajwe4wAtz9zdAH5OpJTPAqgEgL5USkpu4eLFHloqFXniYh9t3bunauuWrStisSi5//4vYnHTEkyZOhWqokBICcuy0N7ehr2trXjt1VeRzqTl3ffc81bjgsZELF4pQ6EAqa4eI6UEicfj5dhTKoCikynx6Bop5C14dJ2XcjmouipvvGFGoSJaWfr738/7tmzdjl/88pfIZjKwnH2SpmkIhSMYW1ODhvmNGFcztjhudFXR69Wgck58Hg+XEorH5ylDJYA8kVKOckpdB0ADIBOJhOzv70OhUFILuTzPZLNcSE6SfSlvJp0O5A1DN0qGDxLS4/OUAh6PGQqHC5XxeJEQgkgoRH1+L/wBP6LRuIjH4+Uf8gSAUwB+MbhzzQSwCMA0p/QUQADgNJ/PJ/v7+wnnnFiWkJZhKCYzKADoqiZUXeW67iGcSxKPx2QoFAo7AybnuE8COAZgHyHkxGXjeFAQEQCzANQCqAIQBeAH4AXgcex052w45TMcyQHIAOgBcBbAUUJI5uOM/wcaHmf3g9UM7QAAAABJRU5ErkJggg==", "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAB/CAYAAAD4mHJdAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAACWAAAAlgB7MGOJQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAA3vSURBVGiB7Vt7cFzVef+dc+/d90OrJyO/JSO/4ncxxfULMCYIAyEW08amJJgmM4GmnZjJdNq4gcSGzLQxk3bsaWcaaIHyR8CJrWAbpjgG/AhINsbYxkaSDY6xJFvSrrS7Wu3uvfecr3+cu1pbXhkJs/4nujNndufec77f+d7fd+4uw8gvIxwOfocBaz0e91yXyx0BgKyZiWUz5kcEvBKPJ18EYI+C5rWvkpKSyZGS8LGHGtbQR8ePUUdnB50/f57OfnqWWlpbaN++39O99fdQpCR0NBKJTBwJTfZFE4LBYLmh8+YXXvifKctWrEBPTze9+cbu8/3JVMoWNjwer3/ZsuUTvV4P239gP36yceNZW9CtyWQyei262hcB+7zurU/99Ge3r1nTgJdfevFsqr8/Wlc3rWbGzFkV8+fPr1iwYEEJgLadO3cmbr/jjohh6KXHPjxamsmar39pjoPBYHl5aUnnqZY2/b1Dh9LdPd39kUgk6PP5PD6fH36/Dz6fDx6PF+fOfdZ9+pPTgbq6Ou+aBx+0k/0DVYlEIjYcbX4tYM5pxeK/WKIDwM7Gxt0TJox/dtLESXC53JuHzvV4PBVHDjfvAYDZs+fonMsV16R9rYeM8XG1tbUAgMrKsrDP659DRJ5gMNhbaH5NTU0IAMaPHw9IPv5LAxORy+31AgBcLsO41lwAcLu9BgAYLheIkftLAxfzGgMeAx4DHgMeAx4DHgMeAx4DHgMeAx4DHgMeAx4D/lME1ke7gDF8ltbOHe3W923oEwYi1jxftWfZWgAziwacZkd2pfyN96XN5IIu7dMtIKA9/TI+zqCnFps2Alg5UlojFnVqIHZUlO2sl4RyC4CU+SEEylux8Z/iyc7mrxw4U7UnYwvGpXMYKIgNGdwXC/76C48oRw3sDWfnCgIkARJXcpwbvpA1e6T0Rq5jDr8EAHKA6OpjUOJwfeXAJAEhAXAGgEPKq+dIMVJqowDO4RAAC0rHV21u5LijAJaABAOIAY5Oh15iFMgj1zEpcUuuXjpIWeCouxjAtnIZcGKA5AVFbRfazPUC50QrKe8+Qy8qiqjBYIODA5DgBd1pBO9WRg9sy7yOhXBca+icYrgTOUGOiKnIVdCdisAxJGBTPsYW0nHRrJqgfNmGVtiqaeR1xchF7Vgz40q/BUNmISlcL7CUgJAMnOUiVwEdF0PURIAAVHaC8ucbAiwcQAb1KQpwXMjFrhtYMcOVO8lhOB457ujcKZd9hBguSYwcelTupKyaQWKYJFEU4xJw/Dhfcw29ilSBcNjEoTucFnSnkeOOvvTJpcVC1cYoGB5NAGEQTukjMAzHoghJghyWCRjenYoTuZjKx8xJiwU4LrSZ6waWpIoBjTuRqxDHRUkSUMWAJAZp6QU5FqOw65HHapG3bGVcBTZXDI5VnFaFgBL1yC34uoBJqEJeIwD2MMY1ilZidAFEMlDOqm9UdpJ0ZawumI+LU9ArwhyqWxyNz14XsBAMUnLVH0ttGB0XococdCGWE3XhOV85MF1WV2OY3omK0S2SkxgYAZYYJoAUpcqEEjG/Ru80isA1ysMXYNCnCum4aKUPgTu90w3sFinXL6nO/MadCAhiKloxBjFMeSuK0S1Kylv1cE1bUVoYyHwhoI6bCswpjjuxK5u2G2lcti2jzNCRTluioHEVw52EBA5/2LKsLBL+h2gs/o+Fjpa+MqtmjCbkqQJSYFF3T3zRsPMvA75i7UiBA4FApa6z5+fNnbd6/frHADghk7QdlhAHdMY0KXkZAHAuozaRMDRtKYMdAYDVq1fjcHPTD860nZlsS3qsv7+/+6pNDr0RDAanGTrf85Onnq75/uNPIJ1O4+dbnj34Ot6B4eFLqksqUeEvgcflAREhZabR09+Li/EorLQ4eFv317D2oW8t0XUdu3a9jud/9auztqD6ZDLZOixwOByeouv8D1u3brtpxYrb0XS4Kfbj3//8VHC8d0nDLXfj67OWIeQJgDGADfoOAxHQl05i14l92PHBXiTPp/c/OrFh9vwF8yMnjp/A5s2bOqXEbX19fX+8CriqqspvmunDTz/10xkr71qFnY07Tr1i7aqsLg2Vb6h/GOPCpdAYgTPlNLmF5AzpvBRp74viX3a/hO6+ge47+hZG61fVTz9y+DCee27Lx15fYFFHR8cAcNkPuw2DPXfP1+vvvf+BB7Br967WX9Mbk70eCn33zlWoCrsgKAFBCdgy/2nLBCyZgCUSMGUSpkzC0G1MrKzE0XMt/la9I0QnM+cWL15cmkwmK1tOnwpksuabg8YVifjnhEOlj69dtw6nT51Kv2q96fYG4fG7gbJwFhn7cxicIJgEZwAfEiokGASpWG1KhvIwg1/91ti1N9DEJ7ZOzKxdt87T1Nz8A67jv2Kx/o85AJDk//zXjzzCAeA/D7zU6PZjkkuXcBuEjN2OrGiHabfDFB2w7HZYoh3mVaMDWWdu1m6Hy5Bw6RIuP6b87+HXdgDAww8/zIXgGwFADwQCFYFA4BuLFi3CoUN/6LRmyL/y6gSXTtC4QDTVgQo/B5iEJFJ6Rt64lI6Vfi3JYBFHd1JA5wIunUNIQvpr/C+bm5u65s9fWBnwe9dISWVc0/DNhQsX6gDwTuuhd3WNYOSGTjjSehGp7EVYsguWuJQfssu51wVTXIIpLsGWlzBgXsSRM5dg6Hk6uk787Zb39gHA7NlzDM7xoM4Yli5fvgJSSiRmmbP9HNA0Qm4D6axEc6uJ6eOzuCloQuOOjlneqiUx2BK4lDBwut2DTFaHoXFYGilaHEjMMOdKKXHb4tvw/nvvL9UZ+Lyb6+pw/PjxpOZhsziX0DigcYLG1QaEBD69ZKA7wRHx2/C7BDSNwEi9AEmZGmJJA/1Z9SJM12hwvcYBzgmaj89obW3pr62dGmCcz+cuQ68GgEtdl7oYU40CZwSeW+As1rmy5KzNkbY1WILDlOp71ubgnKA7czVO4NyhwQhcFS7o6urq5pzDMLRqnXEtCACpdCrFHOHlAsTgYEq0nCnj0jnBY6i8KCTLBxbmzB2yPkczmU4lAYAxHtKFECYAPeDzBQZD4GU+motMueXklECWc7QkSaVDGoTAVetz8AGfLwQAQoisbtt2N4BJZaVlpZQjkntdS8w5UFOFni0YLMGhWfny1rbVPVuoOVKyK9ZeTrMsUl7qAHdzkPyktzeG2tqbw8KihCQlPjVUl2hLBkswmDZD1mJIWxwDWTXSFkfWUs8sZ64QzlqHjiRA2tQ7ZcqUYCwWgyT6hBNjb+3ZvQehUIi52tje3M6FyHHIYNkOqM2RsTjS2cuAs+pe1uYKPLcBkduA+m60sH1+v5/t3fsWGGP/x6VkjR98cAQAMNc7bXJepAyWzWHaimjW4siYDGmTY8DkGMhqapgcaVM9yw5ugMOyeX4DkmGub1otABz/6DiI2O94IpE4E+3p+aCzsxP333PfAvOi2G8JBtMRbU68GZMj44Ao0BzXmgOsRk7spq1oWILB6rQP3nt3/byLnZ2IxWKH4/H4pxoAeFzuC21tretW3rUKnk5mtWiflzAGxhgDQ66IYyrnOnqzBFfDZjAdLk1HMnkpMWRNLldmFomamtrIL/71F+iPJ/8mnc2e4QDQm0jsOXfu3L6TJ0/ivtX3T607M26P6SzMWI5eB7ktPHLPc/MV5xwTjpe9sfLOu2pOHD+JCxc+fyeWSLyZdzCoWsvjNpqef/6F8KTJU/DDLT/a3jM90eDWCS5dqmDvxF7NCRSAOikQhCuMUXHMEDjm3v7jb/+oIRrtxpMbnuzNmvatiUSi7QpgAAiFQneXlZbs3rGjUauorMSmLc+8dShy7HbDELqeA3bC4GCScHxWSMDOgVuaPb2t+t3vPfK9O1P9A/j7v3vC7ov318fj8bdyWFf8YCSbzZ7VNHb+tVdfrV911ypt/bcfq52J2uTBg+//LhWwZ0nJYTtWf6WrcccDGFgLdn5nwkPVD9Q/MLOzsxNPbvhhNpUc+G5vPL7jcqxBjonozwEsBzD5lVde9jy5YcPqTZufKX90/WOwbRv7330nsffDt08dSB41EkZyHPfwmwBAZuTFsBm48GeuWfai2oUzp02fFjKzJhp3NuLFF/+765e//Pfd31q71gLwGYC3GWNNAMCIaBKAJwBUO3uQnZ2d/MyZNv1vn/j+LUuXLq/Z/MyzCIfDTmxW8Y+IVFyWqjKRQkDYNqKxGDb97GkcOXLk7LZt/9F8c12dqKqqYM4LYALQCWAbI6J/A1AGgKK9vSBhoa8vEe+N9TwejcZYU1MTfrN9O6puqkJDw0NYtnwFpk6dCsZUMrFtG22trTiw/11s3/4aotEo1jQ04NZFt6KsrJTCoZKtJaWRiGG4KBKJ5BJWnw4gDedAx+0yMJCywLnQGWOSMabV1NbikUfX40J7B367sxFbt25DMhGHZZkgAC7DhWAojOpx4zF3wS0YP64aVZUVYCoQSN2la4bhIsNlcOS73H5GRBUAHgcwBYABAD09PZROp1gq2V8WTybq4vH4xEQ8oSWSSfSnUkinM7As9RdUw9Dh9XoR8PsQCgYRCodESTj0x1Aw2OrxBXsDgYBdXl6eM2IB4CyAbZcb12wASwBMB1Dq7C4ACJZIJHstM5PWdC2TTmcom80wEtySAFwupum6wbxeDxeCuT0et8/v94UBTTrSJABRAKcAHGCMnbrKjy/bRBjAHAATAFQ5NuAF4IFqAtyOKzKo83MLgAkgA2AAQB+ADgCfAzjBGIsPxfh/6wbDK7xbMFYAAAAASUVORK5CYII=", "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAB/CAYAAAD4mHJdAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAACWAAAAlgB7MGOJQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAyUSURBVGiB7Zp7kFRVesB/5/S9PdMz/ZoHMwo4MICDuoGVIYICIuzGcn0vC+oWGuNjs8mua9ySP4wpgyaiVVupbHYTsLJmNT7WNXExwqqzrq8g4oNxdXUgyEMQARmZd3fPTE/3vfd8+ePenhlgBsFlrFSqb9Wpvn3vd77f+b7zne87ffsqjv+wE4nYDQqWl5aWfDUcLqkAyOUHunID+Q8EnkilMo8C7gnoPPaRTCYnVyQT71+1bKl80PK+HGw9KPv27ZPde3bLjp075NVXX5FLL7lYKpLx9yoqKuqOR6f6PIFYLFZtW7r54YcfqV+4aBEdHe3ywm+e39eb6etzPZfS0kj5woUX1EUipWrj6xtZedddu11P5mYymc5j6Q19HrgsUrL67r/7+8VLly7j8cce3d3X29vZ0DB9yplnfWXcrFmzxjU2NiaBXevWrUsv/trXKmzbqnz/9+9VDuTyz35hi2OxWHV1ZbJ1245d1ltvvpFtb293Kyoq7LKystKysnLKy8soKyujtDTCxx/vSW3fsT3c0NAQWbpkiZvp7a9Np9Ndo+nWxwJrLYvmzV9gAaxbt/75urrxd592Wp0Oh0tWHSkbiUQSv3unuQlgxoyZltZm0TF1H+umUnrC1KlTAaipqUpESmMzFIRjsVj3SPJTpkyJA0ycOBGMnviFwSISLolEAAiHbftYsgAlJREbwA6HESUlXxg8lkcRXAQXwUVwEVwEF8FFcBH8/xhsnZC0ksw49eQPI5mmNtP54ccAIvqgqbz4aYn8zYoTUXXcFnueyZ8eXtleZt75iQnpU0VUvYiqB5mvu5p+XH9w8RtgnJMOLut/7rd4+fpRBcS52hz65csnHdxQ8clZnyuT3NV40sHRUnfq58mUWFJ70sEn+yiCi+AiuAgugovgIrgILoKL4CK4CC6Ci+D/Q+Djf/higk8Jzs0IMjIGYDGAp0AUeBbiHf3Xs/HGAHyYlYaRX0EYC4txNeIFugvWHyXzua8cnDjYGMBoQIFhRFfLmLjaCxqAw8iuHing/nCwGlLuMrKrveNfnccPFnyLtQ8c0a1jElye8sGFAYwUSCN54Q8GB4ljKKpHkBmLOZbB4FLgjhLVYxNcDFnkMXJUj03m0kOKR0sgYzLHRvlwpcDYI7oaGYvl5HB4ZRrJ1cf9fP5E/5NwQUKM7uoTOI4/ql38kmgUOCMnEHMCL819sag2jJJAxgIs+HNY6PGlpUxXDQWXw5dXjxH8SFZBPf7SyqKrMQLKG7b/OkpmTBJI0BSjbwTGYo6Ni5+ZjMJDj1wkxmQ5iV+VsBh9BzImKbNQFhWjp8wx21c7dKIV9A94IxaJsdplZt9574JQVcUdpr3rzlEHdzLASslpg19EofLMMa3dc0Z9c9YMXT+s7/GCo9FojWWph87+6tmX3XTTzT7XA/F4xutXr4fyOuQZVQUQ0tLphY1nlcn5YqgAuOyyy3inefOtH+36aLJr5Obe3t72o4w68kIsFptuW7pp5d33TPne928hm83yLz+6b9PVb/4niRK9QNfUoquqUaUREEEG+jGd7Zi2Dnpy3qYHGr7OFdcsX2BZFs899ywP/fznu11PLslkMjtHBScSiXrL0m+uXr3mlEWLFrN58+auxD+u2HZWhb0gcvkyShZ/Ax2N+70KPcVvJpMm999NZJ99mi1dzsb3rviLGbNmz6rY0rKFVavubTWG83p6ej4psAbfr66trS03xtlw98p76s+bN5+nnvzFtouevK/s1AnJM+I/vB37j6aDziJeCtxhzUkhTgoYwJpchz3zbJI7fj/pzA829f6iR/bPPW9e9aS6utjbb715YWVl1SOZTMY5DGzb6scXf+OSS6+48kqanntu55+99shkOyLx8uuvIjSuDEzq6Ob5TdzgPJ9GhT2sCbV4W1vK57R+FP9lOrT33PnzKjOZTM2OD7dFB3L5FwaDq6KifGYiXvn95ddey4fbtmWv2fhIiVUqpbpMEao2SH4fiKCMgAbRggSuVkKwEQz22q4iVKtQEYUtJvzdlvX6+bq67PJrr41sbm6+VVv8W1dX7/9oADH6b//0+us1QO/jD6xPhGWSCgsqLJj8PsTdjzj7Ma7fxDkAzn5wjry+H3H2YfL7UGGDCguJEqnPPf3YOoDrrrtOe56+C8CKRqPjotHoN+fMmcObb7zRelsk9W1lC4QFCRlM9yfoKnsoEgOLVWCxDLfYBRwwnXmwDIQVyoMbo6lrfrq5+dCsxsbaaHlkqTFSpUMhvjV79mwLwHvjldewBGxQlqBswXn3Y6T/EDhtiNOGuG2I2444QXPb/WtOGzhtmL7PcN7di7IFFegiJDq3+ZVXAWbMmGlrzRJLKc6/4IJFGGO4MdQ+gxAQEn/2LcH0u+Sa27HO0IRq/V+MSqnBOUZARMAD75DB2w4mq8AKWkggpPiOtJ3dYgznzTuPt996+3xLoc8+vaGBlpaWzFybrygtqCPgeODtcTFtBl1hUBHfGgl+wNGv8FIayWjE6KCfD1UhBVqotPWZO3Zs7506dVpUaT1Lh21rPED7oUNtKH8OUYLSoHTwWRiEAsmBDIA4gCPIAJh8YL3lyw7vi5JAJ7QdamvXWmPbofGW0qEYQL4/0zeYjdTRTQ0Oxp9/Svx9jvKAkBocsCh1dP9AZ76vNwOglI5bnuflAaukPBo9bM8UpMIjvxeiWAUbATHK3/yNJM/h30vKozEAz/Ny2nXddoCKyqrKwc5GDYFMUJmM8peLqyCvkH6FZP1zXP+eGBXIFvQcrquyqroyALdrxGzv7u5i6rTTE3lX0gUL/DIYPPfwFDh+k5xCBhSS1Ui/9s9zQ/cLz0rEGxqEGMWAK92T6yfHu7q6MCLbtSj1UtPzTcTjcfW0E3t5EBSkv0FgPgAMQgtWa/9azpcZHICrhvR48B+52CvRaFS9/PJLKKVe1Mao9e+++zsAtk9rnIwbLBFHIQ5IACWvkJxGBjSSDeDZ4HxAIznty+SV38chGIA/PXumzZoK0PJBCyLq1zqdTn/U2dHxbmtrKxddfmXj1r7QRr9jMH/5Ye4d8OdV+odZ3F+AqyG3F/oFelr62PQnl14667PWVrq6ut5JpVJ7giLBygfWrMYOh3ll/pLx4iojR7p3QMGgpQX4kPUE8OFuF0chrjIvzL78VDsc5sEHH0SLWkmQLuhOp5v27t376tatW7nk8iun/UN8VhM5BblASS5w53BowdXD4L7Lg8EG7Z6SM36z+MILp25p2cqBA/s3dKXTLxRSBeDvtUpL7M0PPfRwYtLken791z9Y++fevmWE/WJBIelbgJbDtz4mePblBksrcPU/ubVrF65Yuayzs50Vt6/ozuXduel0etdhYIB4PH5RVWXy+WeeWR8aV1PDz+6/56W//PDFxbpELGULgwVEcwSYoWXkKExOuatqGl9b8p3vfb2vt5/b/uoWtyfVe0kqlXqpwDpql1lVlbwhUhr52VNPrQ3PPuccNm16PbXrR3f+9pvm0NV+pWEwhQKIqKHnm57iV9nydc6Smxc1zm5MHvj0AHfecUeuv7f/u509PY8N5wyCReRcYCEw6YknHi9bcfvtl9276r7qG2+6Gdd12bhhQ/rghhe3TdmywT4l2zkhEeIUgJTLZ62RygPbT5/rlv/xvLOmnzE9ns/lWb9uPY8++u9tP/3JPzd9e/nyLLAXeE0ptRlAicgk4BZgfDAGc/DgQb1790fWrT+45Zz58xdMue+++0kkk/5N8RO2iPiZ0BiMCMbz8FyXzq4u7l91L5ub3969Zs2/Np/eMM2rrT21YKQBPgPWKBFZAyQA093drTzPobu7uyPV3XNbR2enam5uZu3atdTW1LDsqqtYeMEipk2b5m8GANd12bVzJ69vfI2n1/6Kjo5OvrVsKefOPZeqqkpJJCtXJ5OJinBpRJLxeOF3bI8FZIAYoEN2SHmeJ6GQ2CiMUipUP2UK199wI59+2sp/rVvP6tVryKRTOE4eAcJ2mFg8wfgJE5nZeA4TJ4yntmYcSimUUsaydMi2wxIKKTXM6n4lIuMCV08m2O52dHSQzfbpvkxvZSqTbkinUnWpVDqUzvTS29dHNpvFcfy6aNsWkUgp0fJyYrEYiUTcSybin8RjiZ2lZeXd0WjUra6uDg2L/z3A6uHBNQNYAEwHqvAXTTl4Kp3O9HhOvk+FGMhmHXHdHGLEE8CytNY6rCKRsPY8VRoOh8tisfIkhFxgIAB2AtuA15VS20ZcTsEgEsBM4DTgFKASiAClQAnBig7EC8/8BoAc0AekgE+B/cAWpVTqSMb/AlY1WXIncMcxAAAAAElFTkSuQmCC", "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAB/CAYAAAD4mHJdAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAACWAAAAlgB7MGOJQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAxNSURBVGiB7Zp7kFTllcB/5/a93dMz3T0PemYIDgoCPhZ5iaD4wNkFjQjRRMlLTNbSlKlyzZpobSVbFRPUbNVWSRCWuKvlxqybtbIrukp4SATZCAgospEBgeElj4EZ5t3d0+++37d/9O2ZnqEHQZzZSlXfqlMz/c253+875zvfOefeHuH8L6u83P+AwH0lJZ4pbrenEiCVSnYmEsndGl4NhSKvAJkLmPPcV0VFxZjKivKPv77wXr274WN9uvm0PnHihD5y9IhuPNioN216Vy+Yf6eurAj8b2Vl5aXnM6d8loLf7w9apvHhyy//29jZ9fW0t7fpdWtWN7Wdao4qpaiqDpbdXF9fV1paKpu3bGbxk08eSWXU9ZFIpOPirC33v7xs+TIdiUT0Pz239NjeaTOTHXXjdb4cuP6W5DOLFx/7aNdH+oknfqQryv0vXZTFfr8/GKyqaN7XeMhc//ba6NSfPFXqS6fESJ29jdGAX69+9KHY9OnTyxbec08mHInWhsPhzsHmNs4FNgxdf+NNN5sAh3/7n40dCxeKedUsOr6x8CzdsnBEQu9sPABwzTWTTMNQ9eec+1x/FDEuGTduHABXtreOKutJYyiFqq4tqD+5O3wJQF1dHSij7nODtdZuj9cLgMfGOpcuQInSFoDldqNFez43eCivIrgILoKL4CK4CC6Ci+AiuAgugovgIrgILoKL4CK4CC6Ci+A/B7B5vor6Mz4PNnbRYAAtoCQLUMMFVobuBWOALWdjVIGxiwbbZC3WkrXWLqAzJBZrR5T0LWTgdSHfdF1YcIlG57t8oM5nfov1OcCKPmDW1Rfi2IsA5yI5F9WFXF0o0i8arARwggsBu4BbhwaM6g0ujXY+9b+GLqrzLR5E5wsH2ziB5QRXoW8lCy3mosH553iwlDlEe9znai2DpMyhAJ+PxUNTJMhZm51+WM9xvsWFXD2kx0nl9rjQ4oYC3C+4BoEMnasl39Vn6wxRdcqbXApXpwupWBcEVgLKGLw6DU1w5bkaCjcChcYuHozuLYtqEFfroXC1TZ67GcbjlEuZWjSIHr6ozjZ7/y/VSWOLdgJIF9zjQl3JFwDOXn1lsYDOULm6X+YaROcLB6s8+LC2tzqvoc+Wx0L2nT/6wlIm5y6LQ9bs5TLXsO5x7jG192lxuJq9bCOg0aIRGcYEkt9lCsPp6lxlMsBlFE4ghcYuGoxznHKFYNjKYq7Zy5XFYW32lMtCBGzbLlwWLwB83m/2NNC44R0iFaP503+8jO1UqHz5wiwW0aNzvysgdPJTQr/7dFD9fHD+vecN9vl8NaYpv546ZeqCBx98CMhGbPXEqZRfcTWmyySTjuO2TMora/B4Sji+832OnWoGYMGCBez88IMfHD50eExG6Yd6enraBjJcAwf8fv+Vbsv1Pz9f/NT1y1esQCnNPz6zeGuy6WBN+MRRrwp1YMR6MOIJMqEuOj49xNFd2zh5aD9SVpr44PCJXVOmXXvpHfPm4fP7rtz98Z/usSz3+lQq1e/fnvuFSHl5+VjTNLb96lfPj6yv/0t2bN/eufJnj+37Uql1c/1Xv8WM279CaZn/rJcBGoj1hNm+7k22rF5JcyK1edp3Hps0bfq0yj0Ne/jFL55pVopZ3d3dx88C19bWlqVS8Z2Lf/7U1XNvu51Vb72x7/irz9fUBEcEv/03PyFYPRJDgZHt9XpvzG8QlAFnWppY+S9LaOnsaPPOWdhxx7z5V320cydLl/7yE2+pb+bp06dj/VxtWbJ03h13zr/r7rtZu2bNwVP/9cKYMiHwtW8+QNAbwOiOIN09SCiChCKQL+EIKhxBhcN4EGpGjuJww66yxNH9gePac+zGm26sikQiNY379/kSydT63uCqrCybXB6oeuS+RYvYv29f/OTKFz1+dIlXXFQrCznRjNhkRfdJzmIMEAExsqbUmh68holWGXf43deMg6NHJ+5btKjkgw8//IFh8lJnZ88nBoBWxpPf+e53DYC1Ly5bVSb6Mo8WSrQgx5uRY6cHSDMcz0q/vx/PSTNeJXi04EOPfe93L70JcP/99xu2bfwUwPT5fNU+n++rM2fO5P3332+uS3V9y9KCG8FSmtjRo3iN0uz+qqylemDnLhpDQDsFJGrHMG2F2xAyGi5Nhr65Y8f21unTZ9T4yrz3KqVHGC4X91x33XUmwN7N775nApbuk90nD5BpbUbaWqG9Dd3eju5o6y/t7dDehrS1kmltYffJ/ViA25nDBcbeLZs2AUyaNNkyDL5minDL7Nm3opSiNtQ0yUQwESydlXg6xc70Sf5CewliYSD9TqHu/anpIMUnJIiLjSVCGjAFTA21odNTlFLMunEWO7bvuMUUjKkTrriCvXv3RDyiJxpacGVXSc56W2uO6DhtKkmFFsocHchmtKhoukURNrJPG5YDdAEuDYaAV/TVjY0HesaNG+8Tw5hmuC1zFEBLS0urkQ3QPtFgILgQTC0IkAZSgEJQCClnTBwdF4KBOPf2iQBnzrS2GYaBZblGmWK4/ADxWCzqoS85iDOZDFiMS2ddV5Kz2EkGhgwECYLOzqOzxy0W7YkAiBgBw7btFIC3tMw/2JsrnS9OI5B2pPdt0AC9gdVZZxkBANu2k0Ymk2kDCI6oqsw1c/nNu8rVW8l+2ZFCkxRNzMhKUjQpNBlnv23nXfbAeTRQHayudMBtBlod6OrqZNz4CeVprcKqd4KsZBxgGk1KNEmBmGiijsScsZRo0s4CMnn3284CMqJCY8aOCXR2dqK0PmBokQ3r1q7D7/dLq7tyY8axMCOatDNZFqhJiCbuWNsLNrJjCUcnt4C0ZOew0WTQnDYr3/X5fLJx4wZE5B1DKVm1a9dHAIyYesPYjEBa+vYwJZAUSAgkHAtjookaWcl9Togm4eim8u5PS9YDNVNmXg7QsLsBreX3RjgcPtzW1rarubmZ+QvumtahXJvzrUzmWRvrZ61yxNnvPKuTA6xvt13bvjxv/tSW5mY6Ozt3hkKhoy4Ar6ek6dChg4vm3nY7oZJAJnG4oUIQESdD5Ud0v30XSBlZC1OGdjyTA/darwK3LcxcPm585ZJnl9ATinwvnkweNgC6wuF1x44d27R3714WfOWucZGrb3g7kee+eJ6LewPLcXU0bzwuuf2G3P3NoyevnzP3tsv3NOylqenkHzvD4fWQ197aikeW/nJJd1dnJ4//9On57V+a8Hoib7K4kQeUAWL0D7RcsJ2oqHv9wUcfu7Orq5MVK5Z3KS0P53j96lsgEPjyiKqKtW/891uu2tpalvzDMxsTW96s9yhMC8HUOCkxm07JO/fZk5A9dkmDTOSqWe/99fcfmRPtifHY3z6a6Q5F7gyFQhsKggFGjKh4wFviffG11153T59xHVu3bg3968/+7g9V3ae+0Zv0kX49l3ISjA2ccpe/NXvR9+uvnX5tRdOpJv7+xz9OxnpiD3d0d/97PqcXrLWeBcwGLnv11d96n3j88QVPPf108KHvPUwmk+HttWu71q96Y0dozzajJBUfXyqMA4gpfShmeY54JkzX19/6VzfMmDmjMpPOsOqtVbzyym9alz23fM23Fy1KACeAP4rIBwCitb4MeAQY5SxEt7a2qIaGBn70wx+OTKXTc5Y+t8w1d85cdN5KtdbYSqGVImPbJOIxotEo6/+wniXPPmsH/L4Ny5etaJk46Rqprq7JPTgooBn4Z9FaPw9UAHR1dSnbTsuZMy1GMpnItLZ2GFu3bq5d/fvVc0ZUjZB7F36d2fW3MmHCFZguF0pr0uk0Bxsb2bL5PV5fuZLuUEjfdffdG2+66ebW6mCVLvP5qa4OAoYEg8Gcg7tNIAIEADHdJnbcxmNZ6UQ05nK7TT1x4sRYRVV1/FTTqdLVa9bywgsvEImESKfSAFiWhT9QzqhL6rh25g3UjbokPnJkTaKkxFRaa8NtGbaIy+Up8eS2VgEx0VpXO66+HKfdbW9vV93d7RKNJl3xeNQOd4d1Mp0i3B3yRCKRsmgiYSVTaa9orS23lfR5vany8vKYLxCIeyxLKqoqtddbKh6PSVVVtQ4Gg5IHPQI8nx9ck4CbgSuBarJnvARsiUai4XBPmGQyqbWGRCxh2VrZAKYYLtNjZUyXSxsuU6oqyg1fwO91nhUSzvQdwB5gm4h8UvA4OYsoByYDY4EaoBLwAN7sYiDvZ4LsqUo60uNIK3AY2CMioYGM/wPREY0iGUY58wAAAABJRU5ErkJggg==" ],
              "showPolygon" : false,
              "polygonKeyName" : "perimeter",
              "editablePolygon" : false,
              "showPolygonLabel" : false,
              "usePolygonLabelFunction" : false,
              "polygonLabel" : "${entityName}",
              "showPolygonTooltip" : false,
              "showPolygonTooltipAction" : "click",
              "autoClosePolygonTooltip" : true,
              "usePolygonTooltipFunction" : false,
              "polygonTooltipPattern" : "<b>${entityName}</b><br/><br/><b>TimeStamp:</b> ${ts:7}",
              "polygonColor" : "#3388ff",
              "polygonOpacity" : 0.2,
              "usePolygonColorFunction" : false,
              "polygonStrokeColor" : "#3388ff",
              "polygonStrokeOpacity" : 1,
              "polygonStrokeWeight" : 3,
              "usePolygonStrokeColorFunction" : false,
              "showCircle" : false,
              "circleKeyName" : "perimeter",
              "editableCircle" : false,
              "showCircleLabel" : false,
              "useCircleLabelFunction" : false,
              "circleLabel" : "${entityName}",
              "showCircleTooltip" : false,
              "showCircleTooltipAction" : "click",
              "autoCloseCircleTooltip" : true,
              "useCircleTooltipFunction" : false,
              "circleTooltipPattern" : "<b>${entityName}</b><br/><br/><b>TimeStamp:</b> ${ts:7}",
              "circleFillColor" : "#3388ff",
              "circleFillColorOpacity" : 0.2,
              "useCircleFillColorFunction" : false,
              "circleStrokeColor" : "#3388ff",
              "circleStrokeOpacity" : 1,
              "circleStrokeWeight" : 3,
              "useCircleStrokeColorFunction" : false,
              "useClusterMarkers" : false,
              "zoomOnClick" : true,
              "maxClusterRadius" : 80,
              "animate" : true,
              "spiderfyOnMaxZoom" : false,
              "showCoverageOnHover" : true,
              "chunkedLoading" : false,
              "removeOutsideVisibleBounds" : true
            },
            "title" : "New OpenStreetMap",
            "dropShadow" : true,
            "enableFullscreen" : true,
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "showLegend" : false,
            "widgetStyle" : { },
            "actions" : { }
          },
          "row" : 0,
          "col" : 0,
          "id" : "f3be2b72-af24-d31b-5a90-4f644aac1049"
        },
        "f350f4ba-f6c4-6d67-4d09-90c9d7f7c5bd" : {
          "isSystemType" : true,
          "bundleAlias" : "alarm_widgets",
          "typeAlias" : "alarms_table",
          "type" : "alarm",
          "title" : "New widget",
          "image" : null,
          "description" : null,
          "sizeX" : 10.5,
          "sizeY" : 6.5,
          "config" : {
            "timewindow" : {
              "realtime" : {
                "interval" : 1000,
                "timewindowMs" : 86400000
              },
              "aggregation" : {
                "type" : "NONE",
                "limit" : 200
              }
            },
            "showTitle" : true,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "4px",
            "settings" : {
              "enableSelection" : true,
              "enableSearch" : true,
              "displayDetails" : true,
              "allowAcknowledgment" : true,
              "allowClear" : true,
              "displayPagination" : true,
              "defaultPageSize" : 10,
              "defaultSortOrder" : "-createdTime",
              "enableSelectColumnDisplay" : true,
              "enableStickyAction" : false,
              "enableFilter" : true
            },
            "title" : "New Alarms table",
            "dropShadow" : true,
            "enableFullscreen" : true,
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400,
              "padding" : "5px 10px 5px 10px"
            },
            "useDashboardTimewindow" : false,
            "showLegend" : false,
            "alarmSource" : {
              "type" : "entity",
              "name" : null,
              "entityAliasId" : "f7bed459-ea25-5a39-bfc1-a3bb8c941d8d",
              "filterId" : null,
              "dataKeys" : [ {
                "name" : "createdTime",
                "type" : "alarm",
                "label" : "Created time",
                "color" : "#2196f3",
                "settings" : {
                  "useCellStyleFunction" : false,
                  "cellStyleFunction" : "",
                  "useCellContentFunction" : false,
                  "cellContentFunction" : ""
                },
                "_hash" : 0.021092237451093787
              }, {
                "name" : "originator",
                "type" : "alarm",
                "label" : "Originator",
                "color" : "#4caf50",
                "settings" : {
                  "useCellStyleFunction" : false,
                  "cellStyleFunction" : "",
                  "useCellContentFunction" : false,
                  "cellContentFunction" : ""
                },
                "_hash" : 0.2780007688856758
              }, {
                "name" : "type",
                "type" : "alarm",
                "label" : "Type",
                "color" : "#f44336",
                "settings" : {
                  "useCellStyleFunction" : false,
                  "cellStyleFunction" : "",
                  "useCellContentFunction" : false,
                  "cellContentFunction" : ""
                },
                "_hash" : 0.7323586880398418
              }, {
                "name" : "severity",
                "type" : "alarm",
                "label" : "Severity",
                "color" : "#ffc107",
                "settings" : {
                  "useCellStyleFunction" : false,
                  "useCellContentFunction" : false
                },
                "_hash" : 0.09927019860088193
              }, {
                "name" : "status",
                "type" : "alarm",
                "label" : "Status",
                "color" : "#607d8b",
                "settings" : {
                  "useCellStyleFunction" : false,
                  "cellStyleFunction" : "",
                  "useCellContentFunction" : false,
                  "cellContentFunction" : ""
                },
                "_hash" : 0.6588418951443418
              } ]
            },
            "alarmSearchStatus" : "ANY",
            "alarmsPollingInterval" : 5,
            "showTitleIcon" : false,
            "titleIcon" : "more_horiz",
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "widgetStyle" : { },
            "displayTimewindow" : true,
            "actions" : { },
            "alarmStatusList" : [ ],
            "alarmSeverityList" : [ ],
            "alarmTypeList" : [ ],
            "searchPropagatedAlarms" : false,
            "datasources" : [ ]
          },
          "row" : 0,
          "col" : 0,
          "id" : "f350f4ba-f6c4-6d67-4d09-90c9d7f7c5bd"
        },
        "1ff2db71-0541-b3b7-e71c-e3d719a56cfc" : {
          "isSystemType" : true,
          "bundleAlias" : "entity_admin_widgets",
          "typeAlias" : "asset_admin_table",
          "type" : "latest",
          "title" : "New widget",
          "image" : null,
          "description" : null,
          "sizeX" : 7.5,
          "sizeY" : 6.5,
          "config" : {
            "timewindow" : {
              "displayValue" : "",
              "selectedTab" : 0,
              "realtime" : {
                "realtimeType" : 1,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "quickInterval" : "CURRENT_DAY"
              },
              "history" : {
                "historyType" : 0,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "fixedTimewindow" : {
                  "startTimeMs" : 1684409450985,
                  "endTimeMs" : 1684495850985
                },
                "quickInterval" : "CURRENT_DAY"
              },
              "aggregation" : {
                "type" : "NONE",
                "limit" : 200
              }
            },
            "showTitle" : true,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "4px",
            "settings" : {
              "entitiesTitle" : "Asset admin table",
              "enableSearch" : true,
              "enableSelectColumnDisplay" : false,
              "enableStickyHeader" : true,
              "enableStickyAction" : true,
              "reserveSpaceForHiddenAction" : "true",
              "displayEntityName" : true,
              "entityNameColumnTitle" : "Назва",
              "displayEntityLabel" : false,
              "displayEntityType" : true,
              "displayPagination" : true,
              "defaultPageSize" : 10,
              "defaultSortOrder" : "entityName",
              "useRowStyleFunction" : false
            },
            "title" : "New Asset admin table",
            "dropShadow" : true,
            "enableFullscreen" : true,
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400,
              "padding" : "5px 10px 5px 10px"
            },
            "useDashboardTimewindow" : false,
            "showLegend" : false,
            "datasources" : [ {
              "type" : "entity",
              "name" : null,
              "entityAliasId" : "b728b6a2-28e1-7003-4162-d19220a211e8",
              "filterId" : null,
              "dataKeys" : [ {
                "name" : "responsibleFullName",
                "type" : "attribute",
                "label" : "Відповідальний",
                "color" : "#ffc107",
                "settings" : { },
                "_hash" : 0.47528788552732015,
                "aggregationType" : null,
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : null,
                "postFuncBody" : null
              }, {
                "name" : "comment",
                "type" : "attribute",
                "label" : "Коментар",
                "color" : "#4caf50",
                "settings" : { },
                "_hash" : 0.04851741888059702,
                "aggregationType" : null,
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : null,
                "postFuncBody" : null
              } ]
            } ],
            "showTitleIcon" : false,
            "titleIcon" : "more_horiz",
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "widgetStyle" : { },
            "displayTimewindow" : true,
            "actions" : {
              "headerButton" : [ {
                "name" : "Додати",
                "icon" : "add",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "customPretty",
                "customHtml" : "<form #addAssetForm=\"ngForm\" [formGroup]=\"addAssetFormGroup\"\n      (ngSubmit)=\"save()\" style=\"width: 480px;\">\n  <mat-toolbar fxLayout=\"row\" color=\"primary\">\n    <h2>Додати об'єкт</h2>\n    <span fxFlex></span>\n    <button mat-button mat-icon-button\n            (click)=\"cancel()\"\n            type=\"button\">\n      <mat-icon class=\"material-icons\">close</mat-icon>\n    </button>\n  </mat-toolbar>\n  <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\">\n  </mat-progress-bar>\n  <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\n  <div mat-dialog-content>\n      <div class=\"mat-padding\" fxLayout=\"column\" fxLayoutGap=\"8px\">\n          <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\"  fxLayoutGap.xs=\"0\">\n                <mat-form-field class=\"mat-block\" fxFlex=\"50\">\n                    <mat-label>Назва</mat-label>\n                    <input matInput formControlName=\"assetName\" required>\n                    <mat-error *ngIf=\"addAssetFormGroup.get('assetName').hasError('required')\">\n                        Назва є обов'язковим полем\n                    </mat-error>\n                </mat-form-field>\n                <div fxLayout=\"row\" fxLayoutGap=\"8px\">\n                    <tb-entity-subtype-autocomplete\n                        fxFlex=\"50\"\n                        formControlName=\"assetType\"\n                        [required]=\"true\"\n                        [entityType]=\"'ASSET'\"\n                    ></tb-entity-subtype-autocomplete>\n                </div>\n          </div>\n\n            <div formGroupName=\"attributes\" fxLayout=\"column\">\n                <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\"  fxLayoutGap.xs=\"0\">\n                    <mat-form-field fxFlex=\"50\" class=\"mat-block\">\n                        <mat-label>Коментар</mat-label>\n                        <input matInput formControlName=\"comment\">\n                    </mat-form-field>\n                    <tb-entity-autocomplete\n                      formControlName=\"responsibleId\"\n                      [entityType]=\"'USER'\">\n                    </tb-entity-autocomplete>\n                </div>\n            </div>\n      </div>\n        <div class=\"relations-list\">\n            <div class=\"mat-body-1\" style=\"padding-bottom: 10px; color: rgba(0,0,0,0.57);\">Relations</div>\n            <div class=\"body\" [fxShow]=\"relations().length\">\n                <div class=\"row\" fxLayout=\"row\" fxLayoutAlign=\"start center\" formArrayName=\"relations\" *ngFor=\"let relation of relations().controls; let i = index;\">\n                    <div [formGroupName]=\"i\" class=\"mat-elevation-z2\" fxFlex fxLayout=\"row\" style=\"padding: 5px 0 5px 5px;\">\n                        <div fxFlex fxLayout=\"column\">\n                            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\"  fxLayoutGap.xs=\"0\">\n                                <mat-form-field class=\"mat-block\" style=\"min-width: 100px;\">\n                                    <mat-label>Direction</mat-label>\n                                    <mat-select formControlName=\"direction\" name=\"direction\">\n                                        <mat-option *ngFor=\"let direction of entitySearchDirection | keyvalue\" [value]=\"direction.value\">\n                                            <span>{{direction.value}}</span>\n                                        </mat-option>\n                                    </mat-select>\n                                    <mat-error *ngIf=\"relation.get('direction').hasError('required')\">\n                                        Relation direction is required.\n                                    </mat-error>\n                                </mat-form-field>\n                                <tb-relation-type-autocomplete\n                                        fxFlex class=\"mat-block\"\n                                        formControlName=\"relationType\"\n                                        [required]=\"true\">\n                                </tb-relation-type-autocomplete>\n                            </div>\n                            <div fxLayout=\"row\" fxLayout.xs=\"column\">\n                                <tb-entity-select\n                                        fxFlex class=\"mat-block\"\n                                        [required]=\"true\"\n                                        formControlName=\"relatedEntity\">\n                                </tb-entity-select>\n                            </div>\n                        </div>\n                        <div fxLayout=\"column\" fxLayoutAlign=\"center center\">\n                            <button mat-icon-button color=\"primary\"\n                                    aria-label=\"Remove\"\n                                    type=\"button\"\n                                    (click)=\"removeRelation(i)\"\n                                    matTooltip=\"Remove relation\"\n                                    matTooltipPosition=\"above\">\n                                <mat-icon>close</mat-icon>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div>\n                <button mat-raised-button color=\"primary\"\n                        type=\"button\"\n                        (click)=\"addRelation()\"\n                        matTooltip=\"Add Relation\"\n                        matTooltipPosition=\"above\">\n                    Додати\n                </button>\n            </div>\n      </div>\n  </div>\n  <div mat-dialog-actions fxLayout=\"row\">\n    <span fxFlex></span>\n    <button mat-button color=\"primary\"\n            type=\"button\"\n            [disabled]=\"(isLoading$ | async)\"\n            (click)=\"cancel()\" cdkFocusInitial>\n      Відміна\n    </button>\n    <button mat-button mat-raised-button color=\"primary\"\n            style=\"margin-right: 20px;\"\n            type=\"submit\"\n            [disabled]=\"(isLoading$ | async) || addAssetForm.invalid || !addAssetForm.dirty\">\n      Додати\n    </button>\n  </div>\n</form>\n",
                "customCss" : "",
                "customFunction" : "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog'));\nlet assetService = $injector.get(widgetContext.servicesMap.get('assetService'));\nlet attributeService = $injector.get(widgetContext.servicesMap.get('attributeService'));\nlet entityRelationService = $injector.get(widgetContext.servicesMap.get('entityRelationService'));\n\nopenAddAssetDialog();\n\nfunction openAddAssetDialog() {\n    customDialog.customDialog(htmlTemplate, AddAssetDialogController).subscribe();\n}\n\nfunction AddAssetDialogController(instance) {\n    let vm = instance;\n    \n    vm.entitySearchDirection = {\n        from: \"FROM\",\n        to: \"TO\"\n    };\n    \n    vm.addAssetFormGroup = vm.fb.group({\n      assetName: ['', [vm.validators.required]],\n      assetType: ['', [vm.validators.required]],\n      attributes: vm.fb.group({\n          responsibleId: [null],\n          responsibleFullName: [null],\n          responsibleEmail: [null],\n      }),\n      relations: vm.fb.array([])\n    });\n    \n    vm.cancel = function() {\n        vm.dialogRef.close(null);\n    };\n    \n    vm.relations = function() {\n        return vm.addAssetFormGroup.get('relations');\n    };\n    \n    vm.addRelation = function() {\n        vm.relations().push(vm.fb.group({\n         relatedEntity: [null, [vm.validators.required]],\n         relationType: [\"Contains\", [vm.validators.required]],\n         direction: [\"FROM\", [vm.validators.required]]\n        }));\n    };\n\n    vm.removeRelation = function(index) {\n        vm.relations().removeAt(index);\n        vm.relations().markAsDirty();\n    };\n    \n    vm.save = function() {\n        vm.addAssetFormGroup.markAsPristine();\n        let asset = {\n            name: vm.addAssetFormGroup.get('assetName').value,\n            type: vm.addAssetFormGroup.get('assetType').value,\n        };\n        let respId = vm.addAssetFormGroup.get('attributes').value.ResponsibleId;\n        let userObservable = widgetContext.userService.getUser(respId);\n        userObservable.toPromise().then(function(userResponse) {\n            vm.addAssetFormGroup.get('attributes').value.ResponsibleEmail = userResponse.email;\n            vm.addAssetFormGroup.get('attributes').value.ResponsibleFullName = userResponse.firstName +' '+ userResponse.lastName;\n        })\n            .catch(function(e) {\n                console.log(e);\n        });\n        assetService.saveAsset(asset).subscribe(\n            function (asset) {\n                widgetContext.rxjs.forkJoin([\n                    saveAttributes(asset.id),\n                    saveRelations(asset.id)\n                ]).subscribe(\n                    function () {\n                        widgetContext.updateAliases();\n                        vm.dialogRef.close(null);\n                    }\n                );\n            }\n        );\n\n    };\n    \n    function saveAttributes(entityId) {\n        let attributes = vm.addAssetFormGroup.get('attributes').value;\n        let attributesArray = [];\n        for (let key in attributes) {\n            attributesArray.push({key: key, value: attributes[key]});\n        }\n        if (attributesArray.length > 0) {\n            return attributeService.saveEntityAttributes(entityId, \"SERVER_SCOPE\", attributesArray);\n        } else {\n            return widgetContext.rxjs.of([]);\n        }\n    }\n    \n    function saveRelations(entityId) {\n        let relations = vm.addAssetFormGroup.get('relations').value;\n        let tasks = [];\n        for(let i=0; i < relations.length; i++) {\n            let relation = {\n                type: relations[i].relationType,\n                typeGroup: 'COMMON'\n            };\n            if (relations[i].direction == 'FROM') {\n                relation.to = relations[i].relatedEntity;\n                relation.from = entityId;\n            } else {\n                relation.to = entityId;\n                relation.from = relations[i].relatedEntity;\n            }\n            tasks.push(entityRelationService.saveRelation(relation));\n        }\n        const stateEntity = widgetContext.stateController.getStateParams().entityId;\n        const stateRelation = {\n            type: 'Contains',\n            typeGroup: 'COMMON',\n            to: entityId,\n            from: stateEntity\n        };\n        tasks.push(entityRelationService.saveRelation(stateRelation));\n        return widgetContext.rxjs.forkJoin(tasks);\n    }\n}",
                "customResources" : [ ],
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "70837a9d-c3de-a9a7-03c5-dccd14998758"
              } ],
              "actionCellButton" : [ {
                "name" : "Редагувати",
                "icon" : "edit",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "customPretty",
                "customHtml" : "<form #editEntityForm=\"ngForm\" [formGroup]=\"editEntityFormGroup\"\r\n      (ngSubmit)=\"save()\"  class=\"edit-entity-form\">\r\n    <mat-toolbar fxLayout=\"row\" color=\"primary\">\r\n        <h2>Редагувати об'єкт</h2>\r\n        <span fxFlex></span>\r\n        <button mat-icon-button (click)=\"cancel()\" type=\"button\">\r\n            <mat-icon class=\"material-icons\">close</mat-icon>\r\n        </button>\r\n    </mat-toolbar>\r\n    <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\">\r\n    </mat-progress-bar>\r\n    <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\r\n    <div mat-dialog-content fxLayout=\"column\">\r\n        <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\"  fxLayoutGap.xs=\"0\">\r\n            <mat-form-field fxFlex class=\"mat-block\">\r\n                <mat-label>Назва</mat-label>\r\n                <input matInput formControlName=\"entityName\" required readonly=\"\">\r\n            </mat-form-field>\r\n            <mat-form-field fxFlex class=\"mat-block\">\r\n                <mat-label>Тип</mat-label>\r\n                <input matInput formControlName=\"type\">\r\n            </mat-form-field>\r\n        </div>\r\n\r\n        <div formGroupName=\"attributes\" fxLayout=\"column\">\r\n                <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\"  fxLayoutGap.xs=\"0\">\r\n                    <mat-form-field fxFlex=\"50\" class=\"mat-block\">\r\n                        <mat-label>Адреса</mat-label>\r\n                        <input matInput formControlName=\"Address\" required readonly=\"\">\r\n                    </mat-form-field>\r\n                    <mat-form-field fxFlex=\"50\" class=\"mat-block\">\r\n                        <mat-label>Місто/село</mat-label>\r\n                        <input matInput formControlName=\"City\" required readonly=\"\">\r\n                    </mat-form-field>\r\n                </div>\r\n\r\n                <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\"  fxLayoutGap.xs=\"0\">\r\n                    <mat-form-field fxFlex=\"50\" class=\"mat-block\">\r\n                        <mat-label>Район та область</mat-label>\r\n                        <input matInput formControlName=\"Region\" required>\r\n                    </mat-form-field>\r\n                    <tb-entity-autocomplete\r\n                      formControlName=\"ResponsibleId\"\r\n                      [entityType]=\"'USER'\">\r\n                    </tb-entity-autocomplete>\r\n                </div>\r\n        </div>\r\n        <div class=\"relations-list old-relations\">\r\n            <div class=\"mat-body-1\" style=\"padding-bottom: 10px; color: rgba(0,0,0,0.57);\">Relations</div>\r\n            <div class=\"body\" [fxShow]=\"oldRelations().length\">\r\n                <div class=\"row\" fxLayout=\"row\" fxLayoutAlign=\"start center\" formArrayName=\"oldRelations\" \r\n                     *ngFor=\"let relation of oldRelations().controls; let i = index;\">\r\n                    <div [formGroupName]=\"i\" class=\"mat-elevation-z2\" fxFlex fxLayout=\"row\" style=\"padding: 5px 0 5px 5px;\">\r\n                        <div fxFlex fxLayout=\"column\">\r\n                            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\"  fxLayoutGap.xs=\"0\">\r\n                                <mat-form-field class=\"mat-block\" style=\"min-width: 100px;\">\r\n                                    <mat-label>Direction</mat-label>\r\n                                    <mat-select formControlName=\"direction\" name=\"direction\">\r\n                                        <mat-option *ngFor=\"let direction of entitySearchDirection | keyvalue\" [value]=\"direction.value\">\r\n                                            <span>{{direction.value}}</span>\r\n                                        </mat-option>\r\n                                    </mat-select>\r\n                                    <mat-error *ngIf=\"relation.get('direction').hasError('required')\">\r\n                                        Relation direction is required.\r\n                                    </mat-error>\r\n                                </mat-form-field>\r\n                                <tb-relation-type-autocomplete\r\n                                        fxFlex class=\"mat-block\"\r\n                                        formControlName=\"relationType\"\r\n                                        required=\"true\">\r\n                                </tb-relation-type-autocomplete>\r\n                            </div>\r\n                            <div fxLayout=\"row\" fxLayout.xs=\"column\">\r\n                                <tb-entity-select\r\n                                        fxFlex class=\"mat-block\"\r\n                                        required=\"true\"\r\n                                        formControlName=\"relatedEntity\">\r\n                                </tb-entity-select>\r\n                            </div>\r\n                        </div>\r\n                        <div fxLayout=\"column\" fxLayoutAlign=\"center center\">\r\n                            <button mat-icon-button color=\"primary\"\r\n                                    aria-label=\"Remove\"\r\n                                    type=\"button\"\r\n                                    (click)=\"removeOldRelation(i)\"\r\n                                    matTooltip=\"Remove relation\"\r\n                                    matTooltipPosition=\"above\">\r\n                                <mat-icon>close</mat-icon>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"relations-list\">\r\n            <div class=\"mat-body-1\" style=\"padding-bottom: 10px; color: rgba(0,0,0,0.57);\">New Relations</div>\r\n            <div class=\"body\" [fxShow]=\"relations().length\">\r\n                <div class=\"row\" fxLayout=\"row\" fxLayoutAlign=\"start center\" formArrayName=\"relations\" *ngFor=\"let relation of relations().controls; let i = index;\">\r\n                    <div [formGroupName]=\"i\" class=\"mat-elevation-z2\" fxFlex fxLayout=\"row\" style=\"padding: 5px 0 5px 5px;\">\r\n                        <div fxFlex fxLayout=\"column\">\r\n                            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\"  fxLayoutGap.xs=\"0\">\r\n                                <mat-form-field class=\"mat-block\" style=\"min-width: 100px;\">\r\n                                    <mat-label>Direction</mat-label>\r\n                                    <mat-select formControlName=\"direction\" name=\"direction\">\r\n                                        <mat-option *ngFor=\"let direction of entitySearchDirection | keyvalue\" [value]=\"direction.value\">\r\n                                            <span>{{direction.value}}</span>\r\n                                        </mat-option>\r\n                                    </mat-select>\r\n                                    <mat-error *ngIf=\"relation.get('direction').hasError('required')\">\r\n                                        Relation direction is required.\r\n                                    </mat-error>\r\n                                </mat-form-field>\r\n                                <tb-relation-type-autocomplete\r\n                                        fxFlex class=\"mat-block\"\r\n                                        formControlName=\"relationType\"\r\n                                        [required]=\"true\">\r\n                                </tb-relation-type-autocomplete>\r\n                            </div>\r\n                            <div fxLayout=\"row\" fxLayout.xs=\"column\">\r\n                                <tb-entity-select\r\n                                        fxFlex class=\"mat-block\"\r\n                                        [required]=\"true\"\r\n                                        formControlName=\"relatedEntity\">\r\n                                </tb-entity-select>\r\n                            </div>\r\n                        </div>\r\n                        <div fxLayout=\"column\" fxLayoutAlign=\"center center\">\r\n                            <button mat-icon-button color=\"primary\"\r\n                                    aria-label=\"Remove\"\r\n                                    type=\"button\"\r\n                                    (click)=\"removeRelation(i)\"\r\n                                    matTooltip=\"Remove relation\"\r\n                                    matTooltipPosition=\"above\">\r\n                                <mat-icon>close</mat-icon>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div>\r\n                <button mat-raised-button color=\"primary\"\r\n                        type=\"button\"\r\n                        (click)=\"addRelation()\"\r\n                        matTooltip=\"Add Relation\"\r\n                        matTooltipPosition=\"above\">\r\n                    Додати\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\">\r\n        <button mat-button color=\"primary\"\r\n                type=\"button\"\r\n                [disabled]=\"(isLoading$ | async)\"\r\n                (click)=\"cancel()\" cdkFocusInitial>\r\n            Відмінити\r\n        </button>\r\n        <button mat-button mat-raised-button color=\"primary\"\r\n                type=\"submit\"\r\n                [disabled]=\"(isLoading$ | async) || editEntityForm.invalid || !editEntityForm.dirty\">\r\n            Зберегти\r\n        </button>\r\n    </div>\r\n</form>",
                "customCss" : "",
                "customFunction" : "let $injector = widgetContext.$scope.$injector;\r\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog'));\r\nlet entityService = $injector.get(widgetContext.servicesMap.get('entityService'));\r\nlet assetService = $injector.get(widgetContext.servicesMap.get('assetService'));\r\nlet deviceService = $injector.get(widgetContext.servicesMap.get('deviceService'));\r\nlet attributeService = $injector.get(widgetContext.servicesMap.get('attributeService'));\r\nlet entityRelationService = $injector.get(widgetContext.servicesMap.get('entityRelationService'));\r\n\r\nopenEditEntityDialog();\r\n\r\nfunction openEditEntityDialog() {\r\ncustomDialog.customDialog(htmlTemplate, EditEntityDialogController).subscribe();\r\n}\r\n\r\nfunction EditEntityDialogController(instance) {\r\nlet vm = instance;\r\n\r\n    vm.entityName = entityName;\r\n    vm.entityType = entityId.entityType;\r\n    vm.entitySearchDirection = {\r\n        from: \"FROM\",\r\n        to: \"TO\"\r\n    };\r\n    vm.attributes = {};\r\n    vm.oldRelationsData = [];\r\n    vm.relationsToDelete = [];\r\n    vm.entity = {};\r\n\r\n    vm.editEntityFormGroup = vm.fb.group({\r\n        entityName: ['', [vm.validators.required]],\r\n        entityType: [null],\r\n        entityLabel: [null],\r\n        type: ['', [vm.validators.required]],\r\n        attributes: vm.fb.group({\r\n        Address: [null, [vm.validators.required]],\r\n          City:[null, [vm.validators.required]],\r\n          Region: [null, [vm.validators.required]],\r\n          ResponsibleId: [null],\r\n          ResponsibleFullName: [null],\r\n          ResponsibleEmail: [null],\r\n        }),\r\n        oldRelations: vm.fb.array([]),\r\n        relations: vm.fb.array([])\r\n    });\r\n\r\n    getEntityInfo();\r\n\r\n    vm.cancel = function() {\r\n        vm.dialogRef.close(null);\r\n    };\r\n\r\n    vm.relations = function() {\r\n        return vm.editEntityFormGroup.get('relations');\r\n    };\r\n\r\n    vm.oldRelations = function() {\r\n        return vm.editEntityFormGroup.get('oldRelations');\r\n    };\r\n\r\n    vm.addRelation = function() {\r\n        vm.relations().push(vm.fb.group({\r\n            relatedEntity: [null, [vm.validators.required]],\r\n            relationType: [\"Contains\", [vm.validators.required]],\r\n            direction: [\"FROM\", [vm.validators.required]]\r\n        }));\r\n    };\r\n\r\n    function addOldRelation() {\r\n        vm.oldRelations().push(vm.fb.group({\r\n            relatedEntity: [{value: null, disabled: true}, [vm.validators.required]],\r\n            relationType: [{value: null, disabled: true}, [vm.validators.required]],\r\n            direction: [{value: null, disabled: true}, [vm.validators.required]]\r\n        }));\r\n    }\r\n\r\n    vm.removeRelation = function(index) {\r\n        vm.relations().removeAt(index);\r\n        vm.relations().markAsDirty();\r\n    };\r\n\r\n    vm.removeOldRelation = function(index) {\r\n        vm.oldRelations().removeAt(index);\r\n        vm.relationsToDelete.push(vm.oldRelationsData[index]);\r\n        vm.oldRelations().markAsDirty();\r\n    };\r\n\r\n    vm.save = function() {\r\n        vm.editEntityFormGroup.markAsPristine();\r\n        let respId = vm.editEntityFormGroup.get('attributes').value.ResponsibleId;\r\n        let userObservable = widgetContext.userService.getUser(respId);\r\n        userObservable.toPromise().then(function(userResponse) {\r\n            vm.editEntityFormGroup.get('attributes').value.ResponsibleEmail = userResponse.email;\r\n            vm.editEntityFormGroup.get('attributes').value.ResponsibleFullName = userResponse.firstName +' '+ userResponse.lastName;\r\n        })\r\n        .catch(function(e){\r\n            console.log(e);\r\n        });\r\n        widgetContext.rxjs.forkJoin([\r\n            saveAttributes(entityId),\r\n            saveRelations(entityId),\r\n            saveEntity()\r\n        ]).subscribe(\r\n            function () {\r\n                widgetContext.updateAliases();\r\n                vm.dialogRef.close(null);\r\n            }\r\n        );\r\n    };\r\n\r\n    function getEntityAttributes(attributes) {\r\n        for (var i = 0; i < attributes.length; i++) {\r\n            vm.attributes[attributes[i].key] = attributes[i].value;\r\n        }\r\n    }\r\n\r\n    function getEntityRelations(relations) {\r\n        let relationsFrom = relations[0];\r\n        let relationsTo = relations[1];\r\n        for (let i=0; i < relationsFrom.length; i++) {\r\n            let relation = {\r\n                direction: 'FROM',\r\n                relationType: relationsFrom[i].type,\r\n                relatedEntity: relationsFrom[i].to\r\n            };\r\n            vm.oldRelationsData.push(relation);\r\n            addOldRelation();\r\n        }\r\n        for (let i=0; i < relationsTo.length; i++) {\r\n            let relation = {\r\n                direction: 'TO',\r\n                relationType: relationsTo[i].type,\r\n                relatedEntity: relationsTo[i].from\r\n            };\r\n            vm.oldRelationsData.push(relation);\r\n            addOldRelation();\r\n        }\r\n    }\r\n\r\n    function getEntityInfo() {\r\n        widgetContext.rxjs.forkJoin([\r\n            entityRelationService.findInfoByFrom(entityId),\r\n            entityRelationService.findInfoByTo(entityId),\r\n            attributeService.getEntityAttributes(entityId, 'SERVER_SCOPE'),\r\n            entityService.getEntity(entityId.entityType, entityId.id)\r\n        ]).subscribe(\r\n            function (data) {\r\n                getEntityRelations(data.slice(0,2));\r\n                getEntityAttributes(data[2]);\r\n                vm.entity = data[3];\r\n                vm.editEntityFormGroup.patchValue({\r\n                    entityName: vm.entity.name,\r\n                    entityType: vm.entityType,\r\n                    entityLabel: vm.entity.label,\r\n                    type: vm.entity.type,\r\n                    attributes: vm.attributes,\r\n                    oldRelations: vm.oldRelationsData\r\n                }, {emitEvent: false});\r\n            }\r\n        );\r\n    }\r\n\r\n    function saveEntity() {\r\n        const formValues = vm.editEntityFormGroup.value;\r\n        if (vm.entity.label !== formValues.entityLabel){\r\n            vm.entity.label = formValues.entityLabel;\r\n            if (formValues.entityType == 'ASSET') {\r\n                return assetService.saveAsset(vm.entity);\r\n            } else if (formValues.entityType == 'DEVICE') {\r\n                return deviceService.saveDevice(vm.entity);\r\n            }\r\n        }\r\n        return widgetContext.rxjs.of([]);\r\n    }\r\n\r\n    function saveAttributes(entityId) {\r\n        let attributes = vm.editEntityFormGroup.get('attributes').value;\r\n        let attributesArray = [];\r\n        for (let key in attributes) {\r\n            if (attributes[key] !== vm.attributes[key]) {\r\n                attributesArray.push({key: key, value: attributes[key]});\r\n            }\r\n        }\r\n        if (attributesArray.length > 0) {\r\n            return attributeService.saveEntityAttributes(entityId, \"SERVER_SCOPE\", attributesArray);\r\n        }\r\n        return widgetContext.rxjs.of([]);\r\n    }\r\n\r\n    function saveRelations(entityId) {\r\n        let relations = vm.editEntityFormGroup.get('relations').value;\r\n        let tasks = [];\r\n        for(let i=0; i < relations.length; i++) {\r\n            let relation = {\r\n                type: relations[i].relationType,\r\n                typeGroup: 'COMMON'\r\n            };\r\n            if (relations[i].direction == 'FROM') {\r\n                relation.to = relations[i].relatedEntity;\r\n                relation.from = entityId;\r\n            } else {\r\n                relation.to = entityId;\r\n                relation.from = relations[i].relatedEntity;\r\n            }\r\n            tasks.push(entityRelationService.saveRelation(relation));\r\n        }\r\n        for (let i=0; i < vm.relationsToDelete.length; i++) {\r\n            let relation = {\r\n                type: vm.relationsToDelete[i].relationType\r\n            };\r\n            if (vm.relationsToDelete[i].direction == 'FROM') {\r\n                relation.to = vm.relationsToDelete[i].relatedEntity;\r\n                relation.from = entityId;\r\n            } else {\r\n                relation.to = entityId;\r\n                relation.from = vm.relationsToDelete[i].relatedEntity;\r\n            }\r\n            tasks.push(entityRelationService.deleteRelation(relation.from, relation.type, relation.to));\r\n        }\r\n        if (tasks.length > 0) {\r\n            return widgetContext.rxjs.forkJoin(tasks);\r\n        }\r\n        return widgetContext.rxjs.of([]);\r\n    }\r\n}",
                "customResources" : [ ],
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "93931e52-5d7c-903e-67aa-b9435df44ff4"
              }, {
                "name" : "Видалити",
                "icon" : "delete",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "custom",
                "customFunction" : "let $injector = widgetContext.$scope.$injector;\nlet dialogs = $injector.get(widgetContext.servicesMap.get('dialogs'));\nlet assetService = $injector.get(widgetContext.servicesMap.get('assetService'));\n\nopenDeleteAssetDialog();\n\nfunction openDeleteAssetDialog() {\n    let title = \"Ви впевнені, що хочете видалити об'єкт \" + entityName +  \"?\";\n    let content = \"Будьте обережні, після підтвердження об'єкт і всі пов’язані з ним дані буде неможливо відновити!\";\n    dialogs.confirm(title, content, 'Відміна', 'Видалити').subscribe(\n        function (result) {\n            if (result) {\n                deleteAsset();\n            }\n        }\n    );\n}\n\nfunction deleteAsset() {\n    assetService.deleteAsset(entityId.id).subscribe(\n        function () {\n            widgetContext.updateAliases();\n        }\n    );\n}\n",
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "ec2708f6-9ff0-186b-e4fc-7635ebfa3074"
              } ],
              "rowClick" : [ {
                "name" : "info",
                "icon" : "more_horiz",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "custom",
                "customFunction" : "var entitySubType;\r\nvar $injector = widgetContext.$scope.$injector;\r\n$injector.get(widgetContext.servicesMap.get('entityService')).getEntity(entityId.entityType, entityId.id)\r\n  .subscribe(function(data) {\r\n    entitySubType = data.type;\r\n    if(entityId.entityType == 'ASSET') {\r\n        openDashboardStates('asset_details');\r\n    } else if (entitySubType == 'typeSecond') {\r\n      openDashboardStates('device_typeSecond');\r\n    } else {\r\n      openDashboardStates('device_typeOne');\r\n    }\r\n  });\r\n\r\nfunction openDashboardStates(statedId) {\r\n  var stateParams = widgetContext.stateController.getStateParams();\r\n  var params = {\r\n    entityId: entityId,\r\n    entityName: entityName\r\n  };\r\n\r\n  widgetContext.stateController.openState(statedId, params, false);\r\n}\r\n",
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "71edb4de-3724-59b4-41ff-b6b8262f0faa"
              } ]
            }
          },
          "row" : 0,
          "col" : 0,
          "id" : "1ff2db71-0541-b3b7-e71c-e3d719a56cfc"
        },
        "ef6f101c-5ec2-204e-0490-cd94f90b0ce6" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "image" : null,
          "description" : null,
          "sizeX" : 7.5,
          "sizeY" : 3,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"assets\">\n        <div class='description' id=\"assets\">\n            Assets\n        </div>\n    </div>\n</div>",
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n"
            },
            "title" : "Navigation: Assets",
            "dropShadow" : false,
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "widgetCss" : "",
            "pageSize" : 1024,
            "noDataDisplayMessage" : "",
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "name" : "assets",
                "icon" : "more_horiz",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "custom",
                "customFunction" : "var stateIndex = widgetContext.stateController\n        .getStateIndex();\nwhile (stateIndex > 0) {\n    stateIndex -= 1;\n    backToPrevState(stateIndex);\n}\nopenDashboardState('assets');\n\nfunction backToPrevState(stateIndex) {\n    widgetContext.stateController.navigatePrevState(\n        stateIndex);\n}\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "50d09535-2ff6-589d-8b64-01b87e056a59"
              } ]
            }
          },
          "row" : 0,
          "col" : 0,
          "id" : "ef6f101c-5ec2-204e-0490-cd94f90b0ce6"
        },
        "fe8202be-4e1c-cb21-ec6f-f1fb22860084" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "image" : null,
          "description" : null,
          "sizeX" : 7.5,
          "sizeY" : 3,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"assets\">\n        <div class='description' id=\"assets\">\n            Assets\n        </div>\n    </div>\n</div>",
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n"
            },
            "title" : "Navigation: Assets",
            "dropShadow" : false,
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "widgetCss" : "",
            "pageSize" : 1024,
            "noDataDisplayMessage" : "",
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "name" : "assets",
                "icon" : "more_horiz",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "updateDashboardState",
                "targetDashboardStateId" : "assets",
                "setEntityId" : false,
                "stateEntityParamName" : null,
                "openRightLayout" : false,
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "50d09535-2ff6-589d-8b64-01b87e056a59"
              } ]
            }
          },
          "row" : 0,
          "col" : 0,
          "id" : "fe8202be-4e1c-cb21-ec6f-f1fb22860084"
        },
        "ba85a457-1ac5-5ba0-c5a8-9b30430e099a" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "image" : null,
          "description" : null,
          "sizeX" : 7.5,
          "sizeY" : 3,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"assets\">\n        <div class='description' id=\"assets\">\n            Assets\n        </div>\n    </div>\n</div>",
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n"
            },
            "title" : "Navigation: Assets",
            "dropShadow" : false,
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "widgetCss" : "",
            "pageSize" : 1024,
            "noDataDisplayMessage" : "",
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "name" : "assets",
                "icon" : "more_horiz",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "updateDashboardState",
                "targetDashboardStateId" : "assets",
                "setEntityId" : false,
                "stateEntityParamName" : null,
                "openRightLayout" : false,
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "50d09535-2ff6-589d-8b64-01b87e056a59"
              } ]
            }
          },
          "row" : 0,
          "col" : 0,
          "id" : "ba85a457-1ac5-5ba0-c5a8-9b30430e099a"
        },
        "c9f00afe-352d-279c-0900-111f4ef6172c" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "image" : null,
          "description" : null,
          "sizeX" : 7.5,
          "sizeY" : 3,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"assets\">\n        <div class='description' id=\"assets\">\n            Assets\n        </div>\n    </div>\n</div>",
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n"
            },
            "title" : "Navigation: Assets",
            "dropShadow" : false,
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "widgetCss" : "",
            "pageSize" : 1024,
            "noDataDisplayMessage" : "",
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "name" : "assets",
                "icon" : "more_horiz",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "updateDashboardState",
                "targetDashboardStateId" : "assets",
                "setEntityId" : false,
                "stateEntityParamName" : null,
                "openRightLayout" : false,
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "50d09535-2ff6-589d-8b64-01b87e056a59"
              } ]
            }
          },
          "row" : 0,
          "col" : 0,
          "id" : "c9f00afe-352d-279c-0900-111f4ef6172c"
        },
        "f8e06d1f-9f8b-5e6a-6d14-6b35e8a3d0a4" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "image" : null,
          "description" : null,
          "sizeX" : 7.5,
          "sizeY" : 3,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"assets\">\n        <div class='description' id=\"assets\">\n            Assets\n        </div>\n    </div>\n</div>",
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n"
            },
            "title" : "Navigation: Assets",
            "dropShadow" : false,
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "widgetCss" : "",
            "pageSize" : 1024,
            "noDataDisplayMessage" : "",
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "name" : "assets",
                "icon" : "more_horiz",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "updateDashboardState",
                "targetDashboardStateId" : "assets",
                "setEntityId" : false,
                "stateEntityParamName" : null,
                "openRightLayout" : false,
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "50d09535-2ff6-589d-8b64-01b87e056a59"
              } ]
            }
          },
          "row" : 0,
          "col" : 0,
          "id" : "f8e06d1f-9f8b-5e6a-6d14-6b35e8a3d0a4"
        },
        "4acc2be0-a2dc-b0af-bf48-c8fb6b1b2984" : {
          "isSystemType" : true,
          "bundleAlias" : "entity_admin_widgets",
          "typeAlias" : "asset_admin_table",
          "type" : "latest",
          "title" : "New widget",
          "image" : null,
          "description" : null,
          "sizeX" : 7.5,
          "sizeY" : 6.5,
          "config" : {
            "timewindow" : {
              "displayValue" : "",
              "selectedTab" : 0,
              "realtime" : {
                "realtimeType" : 1,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "quickInterval" : "CURRENT_DAY"
              },
              "history" : {
                "historyType" : 0,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "fixedTimewindow" : {
                  "startTimeMs" : 1684409450985,
                  "endTimeMs" : 1684495850985
                },
                "quickInterval" : "CURRENT_DAY"
              },
              "aggregation" : {
                "type" : "NONE",
                "limit" : 200
              }
            },
            "showTitle" : true,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "4px",
            "settings" : {
              "entitiesTitle" : "Asset admin table",
              "enableSearch" : true,
              "enableSelectColumnDisplay" : false,
              "enableStickyHeader" : true,
              "enableStickyAction" : true,
              "reserveSpaceForHiddenAction" : "true",
              "displayEntityName" : true,
              "entityNameColumnTitle" : "Назва",
              "displayEntityLabel" : false,
              "displayEntityType" : false,
              "displayPagination" : true,
              "defaultPageSize" : 10,
              "defaultSortOrder" : "entityName",
              "useRowStyleFunction" : false
            },
            "title" : "New Asset admin table",
            "dropShadow" : true,
            "enableFullscreen" : true,
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400,
              "padding" : "5px 10px 5px 10px"
            },
            "useDashboardTimewindow" : false,
            "showLegend" : false,
            "datasources" : [ {
              "type" : "entity",
              "name" : null,
              "entityAliasId" : "f7bed459-ea25-5a39-bfc1-a3bb8c941d8d",
              "filterId" : null,
              "dataKeys" : [ {
                "name" : "address",
                "type" : "attribute",
                "label" : "Вулиця, № буд.",
                "color" : "#2196f3",
                "settings" : { },
                "_hash" : 0.07709377264534556,
                "aggregationType" : null,
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : null,
                "postFuncBody" : null
              }, {
                "name" : "city",
                "type" : "attribute",
                "label" : "Місто/село",
                "color" : "#4caf50",
                "settings" : { },
                "_hash" : 0.9014377019920561,
                "aggregationType" : null,
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : null,
                "postFuncBody" : null
              }, {
                "name" : "region",
                "type" : "attribute",
                "label" : "Район та область",
                "color" : "#f44336",
                "settings" : { },
                "_hash" : 0.15156040513129754,
                "aggregationType" : null,
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : null,
                "postFuncBody" : null
              }, {
                "name" : "responsibleFullName",
                "type" : "attribute",
                "label" : "Відповідальний",
                "color" : "#ffc107",
                "settings" : { },
                "_hash" : 0.47528788552732015,
                "aggregationType" : null,
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : null,
                "postFuncBody" : null
              }, {
                "name" : "comment",
                "type" : "attribute",
                "label" : "Коментар",
                "color" : "#607d8b",
                "settings" : { },
                "_hash" : 0.8284674601521869,
                "aggregationType" : null,
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : null,
                "postFuncBody" : null
              } ]
            } ],
            "showTitleIcon" : false,
            "titleIcon" : "more_horiz",
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "widgetStyle" : { },
            "displayTimewindow" : true,
            "actions" : {
              "headerButton" : [ {
                "name" : "Додати",
                "icon" : "add",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "customPretty",
                "customHtml" : "<form #addAssetForm=\"ngForm\" [formGroup]=\"addAssetFormGroup\"\n      (ngSubmit)=\"save()\" style=\"width: 480px;\">\n  <mat-toolbar fxLayout=\"row\" color=\"primary\">\n    <h2>Додати об'єкт</h2>\n    <span fxFlex></span>\n    <button mat-button mat-icon-button\n            (click)=\"cancel()\"\n            type=\"button\">\n      <mat-icon class=\"material-icons\">close</mat-icon>\n    </button>\n  </mat-toolbar>\n  <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\">\n  </mat-progress-bar>\n  <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\n  <div mat-dialog-content>\n      <div class=\"mat-padding\" fxLayout=\"column\" fxLayoutGap=\"8px\">\n          <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\"  fxLayoutGap.xs=\"0\">\n                <mat-form-field class=\"mat-block\" fxFlex=\"50\">\n                    <mat-label>Назва</mat-label>\n                    <input matInput formControlName=\"assetName\" required>\n                    <mat-error *ngIf=\"addAssetFormGroup.get('assetName').hasError('required')\">\n                        Назва є обов'язковим полем\n                    </mat-error>\n                </mat-form-field>\n                <div fxLayout=\"row\" fxLayoutGap=\"8px\">\n                    <tb-entity-subtype-autocomplete\n                        fxFlex=\"50\"\n                        formControlName=\"assetType\"\n                        [required]=\"true\"\n                        [entityType]=\"'ASSET'\"\n                    ></tb-entity-subtype-autocomplete>\n                </div>\n          </div>\n\n            <div formGroupName=\"attributes\" fxLayout=\"column\">\n                <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\"  fxLayoutGap.xs=\"0\">\n                    <mat-form-field fxFlex=\"50\" class=\"mat-block\">\n                        <mat-label>Адреса</mat-label>\n                        <input matInput formControlName=\"address\" required>\n                    </mat-form-field>\n                    <mat-form-field fxFlex=\"50\" class=\"mat-block\">\n                        <mat-label>Місто/село</mat-label>\n                        <input matInput formControlName=\"city\" required>\n                    </mat-form-field>\n                </div>\n                \n                <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\"  fxLayoutGap.xs=\"0\">\n                    <mat-form-field fxFlex=\"50\" class=\"mat-block\">\n                        <mat-label>Район та область</mat-label>\n                        <input matInput formControlName=\"region\" required>\n                    </mat-form-field>\n                    \n                    <mat-form-field fxFlex=\"50\" class=\"mat-block\">\n                        <mat-placeholder>Дата встановлення</mat-placeholder>\n                        <mat-datetimepicker-toggle [for]=\"datePicker\" matPrefix></mat-datetimepicker-toggle>\n                        <mat-datetimepicker #datePicker type=\"date\" openOnFocus=\"true\"></mat-datetimepicker>\n                        <input matInput formControlName=\"installationDate\" [matDatetimepicker]=\"datePicker\" required>\n                    </mat-form-field>\n                </div>\n                \n                <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\"  fxLayoutGap.xs=\"0\">\n                    <tb-entity-autocomplete\n                      formControlName=\"responsibleId\"\n                      [entityType]=\"'USER'\">\n                    </tb-entity-autocomplete>\n                    <mat-form-field fxFlex=\"50\" class=\"mat-block\">\n                        <mat-label>Коментар</mat-label>\n                        <input matInput formControlName=\"comment\">\n                    </mat-form-field>\n                </div>\n            </div>\n      </div>\n        <div class=\"relations-list\">\n            <div class=\"mat-body-1\" style=\"padding-bottom: 10px; color: rgba(0,0,0,0.57);\">Relations</div>\n            <div class=\"body\" [fxShow]=\"relations().length\">\n                <div class=\"row\" fxLayout=\"row\" fxLayoutAlign=\"start center\" formArrayName=\"relations\" *ngFor=\"let relation of relations().controls; let i = index;\">\n                    <div [formGroupName]=\"i\" class=\"mat-elevation-z2\" fxFlex fxLayout=\"row\" style=\"padding: 5px 0 5px 5px;\">\n                        <div fxFlex fxLayout=\"column\">\n                            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\"  fxLayoutGap.xs=\"0\">\n                                <mat-form-field class=\"mat-block\" style=\"min-width: 100px;\">\n                                    <mat-label>Direction</mat-label>\n                                    <mat-select formControlName=\"direction\" name=\"direction\">\n                                        <mat-option *ngFor=\"let direction of entitySearchDirection | keyvalue\" [value]=\"direction.value\">\n                                            <span>{{direction.value}}</span>\n                                        </mat-option>\n                                    </mat-select>\n                                    <mat-error *ngIf=\"relation.get('direction').hasError('required')\">\n                                        Relation direction is required.\n                                    </mat-error>\n                                </mat-form-field>\n                                <tb-relation-type-autocomplete\n                                        fxFlex class=\"mat-block\"\n                                        formControlName=\"relationType\"\n                                        [required]=\"true\">\n                                </tb-relation-type-autocomplete>\n                            </div>\n                            <div fxLayout=\"row\" fxLayout.xs=\"column\">\n                                <tb-entity-select\n                                        fxFlex class=\"mat-block\"\n                                        [required]=\"true\"\n                                        formControlName=\"relatedEntity\">\n                                </tb-entity-select>\n                            </div>\n                        </div>\n                        <div fxLayout=\"column\" fxLayoutAlign=\"center center\">\n                            <button mat-icon-button color=\"primary\"\n                                    aria-label=\"Remove\"\n                                    type=\"button\"\n                                    (click)=\"removeRelation(i)\"\n                                    matTooltip=\"Remove relation\"\n                                    matTooltipPosition=\"above\">\n                                <mat-icon>close</mat-icon>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div>\n                <button mat-raised-button color=\"primary\"\n                        type=\"button\"\n                        (click)=\"addRelation()\"\n                        matTooltip=\"Add Relation\"\n                        matTooltipPosition=\"above\">\n                    Додати\n                </button>\n            </div>\n      </div>\n  </div>\n  <div mat-dialog-actions fxLayout=\"row\">\n    <span fxFlex></span>\n    <button mat-button color=\"primary\"\n            type=\"button\"\n            [disabled]=\"(isLoading$ | async)\"\n            (click)=\"cancel()\" cdkFocusInitial>\n      Закрити\n    </button>\n    <button mat-button mat-raised-button color=\"primary\"\n            style=\"margin-right: 20px;\"\n            type=\"submit\"\n            [disabled]=\"(isLoading$ | async) || addAssetForm.invalid || !addAssetForm.dirty\">\n      Додати\n    </button>\n  </div>\n</form>\n",
                "customCss" : "",
                "customFunction" : "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog'));\nlet assetService = $injector.get(widgetContext.servicesMap.get('assetService'));\nlet attributeService = $injector.get(widgetContext.servicesMap.get('attributeService'));\nlet entityRelationService = $injector.get(widgetContext.servicesMap.get('entityRelationService'));\n\nopenAddAssetDialog();\n\nfunction openAddAssetDialog() {\n    customDialog.customDialog(htmlTemplate, AddAssetDialogController).subscribe();\n}\n\nfunction AddAssetDialogController(instance) {\n    let vm = instance;\n    \n    vm.entitySearchDirection = {\n        from: \"FROM\",\n        to: \"TO\"\n    };\n    \n    vm.addAssetFormGroup = vm.fb.group({\n      assetName: ['', [vm.validators.required]],\n      assetType: ['', [vm.validators.required]],\n      attributes: vm.fb.group({\n          address: [null, [vm.validators.required]],\n          city:[null, [vm.validators.required]],\n          region: [null, [vm.validators.required]],\n          responsibleId: [null],\n          responsibleFullName: [null],\n          responsibleEmail: [null],\n          comment: [null],\n          installationDate: [null]\n      }),\n      relations: vm.fb.array([])\n    });\n    \n    vm.cancel = function() {\n        vm.dialogRef.close(null);\n    };\n    \n    vm.relations = function() {\n        return vm.addAssetFormGroup.get('relations');\n    }\n    \n    vm.addRelation = function() {\n        vm.relations().push(vm.fb.group({\n         relatedEntity: [null, [vm.validators.required]],\n         relationType: [\"Contains\", [vm.validators.required]],\n         direction: [\"FROM\", [vm.validators.required]]\n        }));\n    };\n\n    vm.removeRelation = function(index) {\n        vm.relations().removeAt(index);\n        vm.relations().markAsDirty();\n    };\n    \n    vm.save = function() {\n        vm.addAssetFormGroup.markAsPristine();\n        let asset = {\n            name: vm.addAssetFormGroup.get('assetName').value,\n            type: vm.addAssetFormGroup.get('assetType').value,\n        };\n        let respId = vm.addAssetFormGroup.get('attributes').value.responsibleId;\n        let userObservable = widgetContext.userService.getUser(respId);\n        userObservable.toPromise().then(function(userResponse) {\n            vm.addAssetFormGroup.get('attributes').value.responsibleEmail = userResponse.email;\n            vm.addAssetFormGroup.get('attributes').value.responsibleFullName = userResponse.firstName +' '+ userResponse.lastName;\n        })\n            .catch(function(e) {\n                console.log(e);\n        });\n        assetService.saveAsset(asset).subscribe(\n            function (asset) {\n                widgetContext.rxjs.forkJoin([\n                    saveAttributes(asset.id),\n                    saveRelations(asset.id)\n                ]).subscribe(\n                    function () {\n                        widgetContext.updateAliases();\n                        vm.dialogRef.close(null);\n                    }\n                );\n            }\n        );\n\n    };\n    \n    function saveAttributes(entityId) {\n        let attributes = vm.addAssetFormGroup.get('attributes').value;\n        let attributesArray = [];\n        for (let key in attributes) {\n            attributesArray.push({key: key, value: attributes[key]});\n        }\n        if (attributesArray.length > 0) {\n            return attributeService.saveEntityAttributes(entityId, \"SERVER_SCOPE\", attributesArray);\n        } else {\n            return widgetContext.rxjs.of([]);\n        }\n    }\n    \n    function saveRelations(entityId) {\n        let relations = vm.addAssetFormGroup.get('relations').value;\n        let tasks = [];\n        for(let i=0; i < relations.length; i++) {\n            let relation = {\n                type: relations[i].relationType,\n                typeGroup: 'COMMON'\n            };\n            if (relations[i].direction == 'FROM') {\n                relation.to = relations[i].relatedEntity;\n                relation.from = entityId;\n            } else {\n                relation.to = entityId;\n                relation.from = relations[i].relatedEntity;\n            }\n            tasks.push(entityRelationService.saveRelation(relation));\n        }\n        if (tasks.length > 0) {\n            return widgetContext.rxjs.forkJoin(tasks);\n        }\n        return widgetContext.rxjs.of([]);\n    }\n}",
                "customResources" : [ ],
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "70837a9d-c3de-a9a7-03c5-dccd14998758"
              } ],
              "actionCellButton" : [ {
                "name" : "Редагувати",
                "icon" : "edit",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "customPretty",
                "customHtml" : "<form #editEntityForm=\"ngForm\" [formGroup]=\"editEntityFormGroup\"\r\n      (ngSubmit)=\"save()\"  class=\"edit-entity-form\">\r\n    <mat-toolbar fxLayout=\"row\" color=\"primary\">\r\n        <h2>Редагувати об'єкт</h2>\r\n        <span fxFlex></span>\r\n        <button mat-icon-button (click)=\"cancel()\" type=\"button\">\r\n            <mat-icon class=\"material-icons\">close</mat-icon>\r\n        </button>\r\n    </mat-toolbar>\r\n    <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\">\r\n    </mat-progress-bar>\r\n    <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\r\n    <div mat-dialog-content fxLayout=\"column\">\r\n        <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\"  fxLayoutGap.xs=\"0\">\r\n            <mat-form-field fxFlex class=\"mat-block\">\r\n                <mat-label>Назва</mat-label>\r\n                <input matInput formControlName=\"entityName\" required readonly=\"\">\r\n            </mat-form-field>\r\n            <mat-form-field fxFlex class=\"mat-block\">\r\n                <mat-label>Тип</mat-label>\r\n                <input matInput formControlName=\"type\" readonly=\"\">\r\n            </mat-form-field>\r\n        </div>\r\n\r\n        <div formGroupName=\"attributes\" fxLayout=\"column\">\r\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\"  fxLayoutGap.xs=\"0\">\r\n                <tb-entity-autocomplete\r\n                  formControlName=\"responsibleId\"\r\n                  [entityType]=\"'USER'\">\r\n                </tb-entity-autocomplete>\r\n                \r\n                <mat-form-field fxFlex=\"50\" class=\"mat-block\">\r\n                    <mat-label>Коментар</mat-label>\r\n                    <input matInput formControlName=\"comment\">\r\n                </mat-form-field>\r\n            </div>\r\n        </div>\r\n        <div class=\"relations-list old-relations\">\r\n            <div class=\"mat-body-1\" style=\"padding-bottom: 10px; color: rgba(0,0,0,0.57);\">Relations</div>\r\n            <div class=\"body\" [fxShow]=\"oldRelations().length\">\r\n                <div class=\"row\" fxLayout=\"row\" fxLayoutAlign=\"start center\" formArrayName=\"oldRelations\" \r\n                     *ngFor=\"let relation of oldRelations().controls; let i = index;\">\r\n                    <div [formGroupName]=\"i\" class=\"mat-elevation-z2\" fxFlex fxLayout=\"row\" style=\"padding: 5px 0 5px 5px;\">\r\n                        <div fxFlex fxLayout=\"column\">\r\n                            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\"  fxLayoutGap.xs=\"0\">\r\n                                <mat-form-field class=\"mat-block\" style=\"min-width: 100px;\">\r\n                                    <mat-label>Direction</mat-label>\r\n                                    <mat-select formControlName=\"direction\" name=\"direction\">\r\n                                        <mat-option *ngFor=\"let direction of entitySearchDirection | keyvalue\" [value]=\"direction.value\">\r\n                                            <span>{{direction.value}}</span>\r\n                                        </mat-option>\r\n                                    </mat-select>\r\n                                    <mat-error *ngIf=\"relation.get('direction').hasError('required')\">\r\n                                        Relation direction is required.\r\n                                    </mat-error>\r\n                                </mat-form-field>\r\n                                <tb-relation-type-autocomplete\r\n                                        fxFlex class=\"mat-block\"\r\n                                        formControlName=\"relationType\"\r\n                                        required=\"true\">\r\n                                </tb-relation-type-autocomplete>\r\n                            </div>\r\n                            <div fxLayout=\"row\" fxLayout.xs=\"column\">\r\n                                <tb-entity-select\r\n                                        fxFlex class=\"mat-block\"\r\n                                        required=\"true\"\r\n                                        formControlName=\"relatedEntity\">\r\n                                </tb-entity-select>\r\n                            </div>\r\n                        </div>\r\n                        <div fxLayout=\"column\" fxLayoutAlign=\"center center\">\r\n                            <button mat-icon-button color=\"primary\"\r\n                                    aria-label=\"Remove\"\r\n                                    type=\"button\"\r\n                                    (click)=\"removeOldRelation(i)\"\r\n                                    matTooltip=\"Remove relation\"\r\n                                    matTooltipPosition=\"above\">\r\n                                <mat-icon>close</mat-icon>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"relations-list\">\r\n            <div class=\"mat-body-1\" style=\"padding-bottom: 10px; color: rgba(0,0,0,0.57);\">New Relations</div>\r\n            <div class=\"body\" [fxShow]=\"relations().length\">\r\n                <div class=\"row\" fxLayout=\"row\" fxLayoutAlign=\"start center\" formArrayName=\"relations\" *ngFor=\"let relation of relations().controls; let i = index;\">\r\n                    <div [formGroupName]=\"i\" class=\"mat-elevation-z2\" fxFlex fxLayout=\"row\" style=\"padding: 5px 0 5px 5px;\">\r\n                        <div fxFlex fxLayout=\"column\">\r\n                            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\"  fxLayoutGap.xs=\"0\">\r\n                                <mat-form-field class=\"mat-block\" style=\"min-width: 100px;\">\r\n                                    <mat-label>Direction</mat-label>\r\n                                    <mat-select formControlName=\"direction\" name=\"direction\">\r\n                                        <mat-option *ngFor=\"let direction of entitySearchDirection | keyvalue\" [value]=\"direction.value\">\r\n                                            <span>{{direction.value}}</span>\r\n                                        </mat-option>\r\n                                    </mat-select>\r\n                                    <mat-error *ngIf=\"relation.get('direction').hasError('required')\">\r\n                                        Relation direction is required.\r\n                                    </mat-error>\r\n                                </mat-form-field>\r\n                                <tb-relation-type-autocomplete\r\n                                        fxFlex class=\"mat-block\"\r\n                                        formControlName=\"relationType\"\r\n                                        [required]=\"true\">\r\n                                </tb-relation-type-autocomplete>\r\n                            </div>\r\n                            <div fxLayout=\"row\" fxLayout.xs=\"column\">\r\n                                <tb-entity-select\r\n                                        fxFlex class=\"mat-block\"\r\n                                        [required]=\"true\"\r\n                                        formControlName=\"relatedEntity\">\r\n                                </tb-entity-select>\r\n                            </div>\r\n                        </div>\r\n                        <div fxLayout=\"column\" fxLayoutAlign=\"center center\">\r\n                            <button mat-icon-button color=\"primary\"\r\n                                    aria-label=\"Remove\"\r\n                                    type=\"button\"\r\n                                    (click)=\"removeRelation(i)\"\r\n                                    matTooltip=\"Remove relation\"\r\n                                    matTooltipPosition=\"above\">\r\n                                <mat-icon>close</mat-icon>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div>\r\n                <button mat-raised-button color=\"primary\"\r\n                        type=\"button\"\r\n                        (click)=\"addRelation()\"\r\n                        matTooltip=\"Add Relation\"\r\n                        matTooltipPosition=\"above\">\r\n                    Додати\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\">\r\n        <button mat-button color=\"primary\"\r\n                type=\"button\"\r\n                [disabled]=\"(isLoading$ | async)\"\r\n                (click)=\"cancel()\" cdkFocusInitial>\r\n            Закрити\r\n        </button>\r\n        <button mat-button mat-raised-button color=\"primary\"\r\n                type=\"submit\"\r\n                [disabled]=\"(isLoading$ | async) || editEntityForm.invalid || !editEntityForm.dirty\">\r\n            Оновити\r\n        </button>\r\n    </div>\r\n</form>",
                "customCss" : "",
                "customFunction" : "let $injector = widgetContext.$scope.$injector;\r\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog'));\r\nlet entityService = $injector.get(widgetContext.servicesMap.get('entityService'));\r\nlet assetService = $injector.get(widgetContext.servicesMap.get('assetService'));\r\nlet deviceService = $injector.get(widgetContext.servicesMap.get('deviceService'));\r\nlet attributeService = $injector.get(widgetContext.servicesMap.get('attributeService'));\r\nlet entityRelationService = $injector.get(widgetContext.servicesMap.get('entityRelationService'));\r\n\r\nopenEditEntityDialog();\r\n\r\nfunction openEditEntityDialog() {\r\ncustomDialog.customDialog(htmlTemplate, EditEntityDialogController).subscribe();\r\n}\r\n\r\nfunction EditEntityDialogController(instance) {\r\nlet vm = instance;\r\n\r\n    vm.entityName = entityName;\r\n    vm.entityType = entityId.entityType;\r\n    vm.entitySearchDirection = {\r\n        from: \"FROM\",\r\n        to: \"TO\"\r\n    };\r\n    vm.attributes = {};\r\n    vm.oldRelationsData = [];\r\n    vm.relationsToDelete = [];\r\n    vm.entity = {};\r\n\r\n    vm.editEntityFormGroup = vm.fb.group({\r\n        entityName: ['', [vm.validators.required]],\r\n        entityType: [null],\r\n        entityLabel: [null],\r\n        type: ['', [vm.validators.required]],\r\n        attributes: vm.fb.group({\r\n          address: [null, [vm.validators.required]],\r\n          city:[null, [vm.validators.required]],\r\n          region: [null, [vm.validators.required]],\r\n          responsibleId: [null],\r\n          responsibleFullName: [null],\r\n          responsibleEmail: [null],\r\n          comment: [null]\r\n        }),\r\n        oldRelations: vm.fb.array([]),\r\n        relations: vm.fb.array([])\r\n    });\r\n\r\n    getEntityInfo();\r\n\r\n    vm.cancel = function() {\r\n        vm.dialogRef.close(null);\r\n    };\r\n\r\n    vm.relations = function() {\r\n        return vm.editEntityFormGroup.get('relations');\r\n    };\r\n\r\n    vm.oldRelations = function() {\r\n        return vm.editEntityFormGroup.get('oldRelations');\r\n    };\r\n\r\n    vm.addRelation = function() {\r\n        vm.relations().push(vm.fb.group({\r\n            relatedEntity: [null, [vm.validators.required]],\r\n            relationType: [\"Contains\", [vm.validators.required]],\r\n            direction: [\"FROM\", [vm.validators.required]]\r\n        }));\r\n    };\r\n\r\n    function addOldRelation() {\r\n        vm.oldRelations().push(vm.fb.group({\r\n            relatedEntity: [{value: null, disabled: true}, [vm.validators.required]],\r\n            relationType: [{value: null, disabled: true}, [vm.validators.required]],\r\n            direction: [{value: null, disabled: true}, [vm.validators.required]]\r\n        }));\r\n    }\r\n\r\n    vm.removeRelation = function(index) {\r\n        vm.relations().removeAt(index);\r\n        vm.relations().markAsDirty();\r\n    };\r\n\r\n    vm.removeOldRelation = function(index) {\r\n        vm.oldRelations().removeAt(index);\r\n        vm.relationsToDelete.push(vm.oldRelationsData[index]);\r\n        vm.oldRelations().markAsDirty();\r\n    };\r\n\r\n    vm.save = function() {\r\n        vm.editEntityFormGroup.markAsPristine();\r\n        let respId = vm.editEntityFormGroup.get('attributes').value.responsibleId;\r\n        let userObservable = widgetContext.userService.getUser(respId);\r\n        userObservable.toPromise().then(function(userResponse) {\r\n            vm.editEntityFormGroup.get('attributes').value.responsibleEmail = userResponse.email;\r\n            vm.editEntityFormGroup.get('attributes').value.responsibleFullName = userResponse.firstName +' '+ userResponse.lastName;\r\n        })\r\n        .catch(function(e){\r\n            console.log(e);\r\n        });\r\n        widgetContext.rxjs.forkJoin([\r\n            saveAttributes(entityId),\r\n            saveRelations(entityId),\r\n            saveEntity()\r\n        ]).subscribe(\r\n            function () {\r\n                widgetContext.updateAliases();\r\n                vm.dialogRef.close(null);\r\n            }\r\n        );\r\n    };\r\n\r\n    function getEntityAttributes(attributes) {\r\n        for (var i = 0; i < attributes.length; i++) {\r\n            vm.attributes[attributes[i].key] = attributes[i].value;\r\n        }\r\n    }\r\n\r\n    function getEntityRelations(relations) {\r\n        let relationsFrom = relations[0];\r\n        let relationsTo = relations[1];\r\n        for (let i=0; i < relationsFrom.length; i++) {\r\n            let relation = {\r\n                direction: 'FROM',\r\n                relationType: relationsFrom[i].type,\r\n                relatedEntity: relationsFrom[i].to\r\n            };\r\n            vm.oldRelationsData.push(relation);\r\n            addOldRelation();\r\n        }\r\n        for (let i=0; i < relationsTo.length; i++) {\r\n            let relation = {\r\n                direction: 'TO',\r\n                relationType: relationsTo[i].type,\r\n                relatedEntity: relationsTo[i].from\r\n            };\r\n            vm.oldRelationsData.push(relation);\r\n            addOldRelation();\r\n        }\r\n    }\r\n\r\n    function getEntityInfo() {\r\n        widgetContext.rxjs.forkJoin([\r\n            entityRelationService.findInfoByFrom(entityId),\r\n            entityRelationService.findInfoByTo(entityId),\r\n            attributeService.getEntityAttributes(entityId, 'SERVER_SCOPE'),\r\n            entityService.getEntity(entityId.entityType, entityId.id)\r\n        ]).subscribe(\r\n            function (data) {\r\n                getEntityRelations(data.slice(0,2));\r\n                getEntityAttributes(data[2]);\r\n                vm.entity = data[3];\r\n                vm.editEntityFormGroup.patchValue({\r\n                    entityName: vm.entity.name,\r\n                    entityType: vm.entityType,\r\n                    entityLabel: vm.entity.label,\r\n                    type: vm.entity.type,\r\n                    attributes: vm.attributes,\r\n                    oldRelations: vm.oldRelationsData\r\n                }, {emitEvent: false});\r\n            }\r\n        );\r\n    }\r\n\r\n    function saveEntity() {\r\n        const formValues = vm.editEntityFormGroup.value;\r\n        if (vm.entity.label !== formValues.entityLabel){\r\n            vm.entity.label = formValues.entityLabel;\r\n            if (formValues.entityType == 'ASSET') {\r\n                return assetService.saveAsset(vm.entity);\r\n            } else if (formValues.entityType == 'DEVICE') {\r\n                return deviceService.saveDevice(vm.entity);\r\n            }\r\n        }\r\n        return widgetContext.rxjs.of([]);\r\n    }\r\n\r\n    function saveAttributes(entityId) {\r\n        let attributes = vm.editEntityFormGroup.get('attributes').value;\r\n        let attributesArray = [];\r\n        for (let key in attributes) {\r\n            if (attributes[key] !== vm.attributes[key]) {\r\n                attributesArray.push({key: key, value: attributes[key]});\r\n            }\r\n        }\r\n        if (attributesArray.length > 0) {\r\n            return attributeService.saveEntityAttributes(entityId, \"SERVER_SCOPE\", attributesArray);\r\n        }\r\n        return widgetContext.rxjs.of([]);\r\n    }\r\n\r\n    function saveRelations(entityId) {\r\n        let relations = vm.editEntityFormGroup.get('relations').value;\r\n        let tasks = [];\r\n        for(let i=0; i < relations.length; i++) {\r\n            let relation = {\r\n                type: relations[i].relationType,\r\n                typeGroup: 'COMMON'\r\n            };\r\n            if (relations[i].direction == 'FROM') {\r\n                relation.to = relations[i].relatedEntity;\r\n                relation.from = entityId;\r\n            } else {\r\n                relation.to = entityId;\r\n                relation.from = relations[i].relatedEntity;\r\n            }\r\n            tasks.push(entityRelationService.saveRelation(relation));\r\n        }\r\n        for (let i=0; i < vm.relationsToDelete.length; i++) {\r\n            let relation = {\r\n                type: vm.relationsToDelete[i].relationType\r\n            };\r\n            if (vm.relationsToDelete[i].direction == 'FROM') {\r\n                relation.to = vm.relationsToDelete[i].relatedEntity;\r\n                relation.from = entityId;\r\n            } else {\r\n                relation.to = entityId;\r\n                relation.from = vm.relationsToDelete[i].relatedEntity;\r\n            }\r\n            tasks.push(entityRelationService.deleteRelation(relation.from, relation.type, relation.to));\r\n        }\r\n        if (tasks.length > 0) {\r\n            return widgetContext.rxjs.forkJoin(tasks);\r\n        }\r\n        return widgetContext.rxjs.of([]);\r\n    }\r\n}",
                "customResources" : [ ],
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "93931e52-5d7c-903e-67aa-b9435df44ff4"
              } ],
              "rowClick" : [ {
                "name" : "move to asset db",
                "icon" : "more_horiz",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "openDashboardState",
                "targetDashboardStateId" : "asset_details",
                "setEntityId" : true,
                "stateEntityParamName" : null,
                "openRightLayout" : false,
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "71edb4de-3724-59b4-41ff-b6b8262f0faa"
              } ]
            }
          },
          "row" : 0,
          "col" : 0,
          "id" : "4acc2be0-a2dc-b0af-bf48-c8fb6b1b2984"
        },
        "67e3a186-1e6b-44a2-61c8-653d1f1867ad" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_value_card",
          "type" : "latest",
          "title" : "New widget",
          "image" : null,
          "description" : null,
          "sizeX" : 7.5,
          "sizeY" : 3,
          "config" : {
            "datasources" : [ {
              "type" : "entity",
              "name" : null,
              "entityAliasId" : "f53edd68-75ef-2b98-c000-679877dd583c",
              "filterId" : null,
              "dataKeys" : [ {
                "name" : "pump1.alarm",
                "type" : "timeseries",
                "label" : "pump1.alarm",
                "color" : "#2196f3",
                "settings" : { },
                "_hash" : 0.3591764872674157
              }, {
                "name" : "pump1.status",
                "type" : "timeseries",
                "label" : "pump1.status",
                "color" : "#4caf50",
                "settings" : { },
                "_hash" : 0.8817564263535786
              }, {
                "name" : "pump2.alarm",
                "type" : "timeseries",
                "label" : "pump2.alarm",
                "color" : "#f44336",
                "settings" : { },
                "_hash" : 0.6367192386103586
              }, {
                "name" : "pump2.status",
                "type" : "timeseries",
                "label" : "pump2.status",
                "color" : "#ffc107",
                "settings" : { },
                "_hash" : 0.12665061784866438
              }, {
                "name" : "pump3.alarm",
                "type" : "timeseries",
                "label" : "pump3.alarm",
                "color" : "#607d8b",
                "settings" : { },
                "_hash" : 0.36777685456578224
              }, {
                "name" : "pump3.status",
                "type" : "timeseries",
                "label" : "pump3.status",
                "color" : "#9c27b0",
                "settings" : { },
                "_hash" : 0.6503826194493028
              }, {
                "name" : "pump4.alarm",
                "type" : "timeseries",
                "label" : "pump4.alarm",
                "color" : "#8bc34a",
                "settings" : { },
                "_hash" : 0.08641397127692452
              }, {
                "name" : "pump4.status",
                "type" : "timeseries",
                "label" : "pump4.status",
                "color" : "#3f51b5",
                "settings" : { },
                "_hash" : 0.23403162301365854
              }, {
                "name" : "pump5.alarm",
                "type" : "timeseries",
                "label" : "pump5.alarm",
                "color" : "#e91e63",
                "settings" : { },
                "_hash" : 0.268428136248793
              }, {
                "name" : "pump5.status",
                "type" : "timeseries",
                "label" : "pump5.status",
                "color" : "#ffeb3b",
                "settings" : { },
                "_hash" : 0.6487979708643634
              }, {
                "name" : "pump6.alarm",
                "type" : "timeseries",
                "label" : "pump6.alarm",
                "color" : "#03a9f4",
                "settings" : { },
                "_hash" : 0.6900349045290193
              }, {
                "name" : "pump6.status",
                "type" : "timeseries",
                "label" : "pump6.status",
                "color" : "#ff9800",
                "settings" : { },
                "_hash" : 0.8516307830392262
              } ]
            } ],
            "timewindow" : {
              "displayValue" : "",
              "selectedTab" : 0,
              "realtime" : {
                "realtimeType" : 1,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "quickInterval" : "CURRENT_DAY"
              },
              "history" : {
                "historyType" : 0,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "fixedTimewindow" : {
                  "startTimeMs" : 1684409450985,
                  "endTimeMs" : 1684495850985
                },
                "quickInterval" : "CURRENT_DAY"
              },
              "aggregation" : {
                "type" : "AVG",
                "limit" : 25000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "#fff",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0px",
            "settings" : {
              "cardHtml" : "<script>\r\n    var firstAlarm = document.getElementById(\"firstAlarm\");\r\n    var secondAlarm = document.getElementById(\"secondAlarm\");\r\n    var thirdAlarm = document.getElementById(\"thirdAlarm\");\r\n    var fourthAlarm = document.getElementById(\"fourthAlarm\");\r\n    var fifthAlarm = document.getElementById(\"fifthAlarm\");\r\n    var sixthAlarm = document.getElementById(\"sixthAlarm\");\r\n    \r\n    var firstStatus = document.getElementById(\"firstStatus\");\r\n    var secondStatus = document.getElementById(\"secondStatus\");\r\n    var thirdStatus = document.getElementById(\"thirdStatus\");\r\n    var fourthStatus = document.getElementById(\"fourthStatus\");\r\n    var fifthStatus = document.getElementById(\"fifthStatus\");\r\n    var sixthStatus = document.getElementById(\"sixthStatus\");\r\n    \r\n    var isThird = (new Boolean(thirdAlarm.innerText)).toString();\r\n    var isFourth = (new Boolean(fourthAlarm.innerText)).toString();\r\n    var isFifth = (new Boolean(fifthAlarm.innerText)).toString();\r\n    var isSixth = (new Boolean(sixthAlarm.innerText)).toString();\r\n\r\n\r\n    if(isThird == \"false\") {\r\n        document.getElementById(\"pump3Cont\").style.display = \"none\";\r\n    }\r\n    if(isFourth == \"false\") {\r\n        document.getElementById(\"pump4Cont\").style.display = \"none\";\r\n    }\r\n    if(isFifth == \"false\") {\r\n        document.getElementById(\"pump5Cont\").style.display = \"none\";\r\n    }\r\n    if(isSixth == \"false\") {\r\n        document.getElementById(\"pump6Cont\").style.display = \"none\";\r\n    }\r\n    function changeColor(content,value){\r\n        switch(value) {\r\n            case \"ok\":\r\n                content.style.backgroundColor = \"#DFFFD8\";\r\n                content.style.color = \"#5D9C59\";\r\n                break;\r\n            case \"failure\":\r\n                content.style.backgroundColor = \"#F7A4A4\";\r\n                content.style.color = \"#EA5455\"\r\n                break;\r\n            case \"warning\":\r\n                content.style.backgroundColor = \"#FDF7C3\";\r\n                content.style.color = \"#EBB02D\";\r\n            default:\r\n                break;\r\n        }\r\n        content.style.textShadow = \"-1px 0 white, 0 1px white, 1px 0 white, 0 -1px white\";\r\n    }\r\n    function addImage(content,value){\r\n        let image = document.createElement(\"img\");\r\n        switch(value){\r\n            case \"idle\":\r\n                image.src = \"https://cdn4.iconfinder.com/data/icons/user-interface-737/32/Wall_Clock-512.png\";\r\n                break;\r\n            case \"working\":\r\n                image.src = \"https://icon-library.com/images/loading-icon-animated-gif/loading-icon-animated-gif-3.jpg\";\r\n                break;\r\n            case \"disconnected\":\r\n                image.src = \"https://ugokawaii.com/wp-content/uploads/2022/06/cross.gif\";\r\n                break;\r\n            default:\r\n            break;\r\n        }\r\n    content.style.textAlign = \"start\";\r\n    content.appendChild(image);\r\n    }\r\n    changeColor(firstAlarm, firstAlarm.innerText);\r\n    changeColor(secondAlarm, secondAlarm.innerText);\r\n    changeColor(thirdAlarm,thirdAlarm.innerText);\r\n    changeColor(fourthAlarm,fourthAlarm.innerText);\r\n    changeColor(fifthAlarm,fifthAlarm.innerText);\r\n    changeColor(sixthAlarm,sixthAlarm.innerText);\r\n    \r\n    addImage(firstStatus,firstStatus.innerText);\r\n    addImage(secondStatus,secondStatus.innerText);\r\n    addImage(thirdStatus,thirdStatus.innerText);\r\n    addImage(fourthStatus,fourthStatus.innerText);\r\n    addImage(fifthStatus,fifthStatus.innerText);\r\n    addImage(sixthStatus,sixthStatus.innerText);\r\n</script>\r\n<div class='card'>\r\n    <h1>${entityName}</h1>\r\n    <table class=\"table\">\r\n        <thead>\r\n            <tr>\r\n                <th>Name</th>\r\n                <th>Alarm</th>\r\n                <th>Status</th>\r\n                <th>Go to data</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            <tr id=\"pump1Cont\">\r\n                <td>MPM1</td>\r\n                <td id=\"firstAlarm\">${pump1.alarm}</td>\r\n                <td id=\"firstStatus\">${pump1.status}</td>\r\n                <td>\r\n                    <button id=\"pump1\">\r\n                        Details\r\n                    </button>\r\n                </td>\r\n            </tr>\r\n            <tr id=\"pump2Cont\">\r\n                <td>MPM2</td>\r\n                <td id=\"secondAlarm\">${pump2.alarm}</td>\r\n                <td id=\"secondStatus\">${pump2.status}</td>\r\n                <td>\r\n                    <button id=\"pump2\">\r\n                        Details\r\n                    </button>\r\n                </td>\r\n            </tr>\r\n            <tr id=\"pump3Cont\">\r\n                <td>MPM3</td>\r\n                <td id=\"thirdAlarm\">${pump3.alarm}</td>\r\n                <td id=\"thirdStatus\">${pump3.status}</td>\r\n                <td>\r\n                    <button id=\"pump3\">\r\n                        Details\r\n                    </button>\r\n                </td>\r\n            </tr>\r\n            <tr id=\"pump4Cont\">\r\n                <td>MPM4</td>\r\n                <td id=\"fourthAlarm\">${pump4.alarm}</td>\r\n                <td id=\"fourthStatus\">${pump4.status}</td>\r\n                <td>\r\n                    <button id=\"pump4\">\r\n                        Details\r\n                    </button>\r\n                </td>\r\n            </tr>\r\n            <tr id=\"pump5Cont\">\r\n                <td>MPM5</td>\r\n                <td id=\"fifthAlarm\">${pump5.alarm}</td>\r\n                <td id=\"fifthStatus\">${pump5.status}</td>\r\n                <td>\r\n                    <button id=\"pump5\">\r\n                        Details\r\n                    </button>\r\n                </td>\r\n            </tr>\r\n            <tr id=\"pump6Cont\">\r\n                <td>MPM6</td>\r\n                <td id=\"sixthAlarm\">${pump6.alarm}</td>\r\n                <td id=\"sixthStatus\">${pump6.status}</td>\r\n                <td>\r\n                    <button id=\"pump6\">\r\n                        Details\r\n                    </button>\r\n                </td>\r\n            </tr>\r\n        </tbody>\r\n    </table>\r\n</div>",
              "cardCss" : ".card {\r\n    width: 100%;\r\n    height: 100%;\r\n    border: 2px solid #ccc;\r\n    box-sizing: border-box;\r\n}\r\nh1{\r\n    font-size: 28px;\r\n    line-height: 28px;\r\n    margin: 5px;\r\n    padding: 0;\r\n}\r\n\r\n.table {\r\n  width: 100%;\r\n  border: 1px solid #dddddd;\r\n  border-collapse: collapse; \r\n}\r\n.table th {\r\n  font-weight: bold;\r\n  padding: 5px;\r\n  background: #efefef;\r\n  border: 1px solid #dddddd;\r\n}\r\n.table td {\r\n    font-weight: 400;\r\n    position: relative;\r\n    vertical-align: baseline;\r\n    text-align: center;\r\n  border: 1px solid #dddddd;\r\n  padding: 3px;\r\n}\r\n\r\nimg {\r\n    position: absolute;\r\n    right: 5px;\r\n    width: 20px;\r\n}"
            },
            "title" : "New HTML Value Card",
            "dropShadow" : false,
            "enableFullscreen" : true,
            "widgetStyle" : { },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "name" : "pump1",
                "icon" : "more_horiz",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "openDashboardState",
                "targetDashboardStateId" : "pump1",
                "setEntityId" : true,
                "stateEntityParamName" : null,
                "openRightLayout" : false,
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "c34f1089-ae3c-2ddb-ef90-2e9ee2b735ee"
              }, {
                "name" : "pump2",
                "icon" : "more_horiz",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "openDashboardState",
                "targetDashboardStateId" : "pump2",
                "setEntityId" : true,
                "stateEntityParamName" : null,
                "openRightLayout" : false,
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "4fbd8c3e-60c5-7e6e-ca08-4b677a2bea88"
              }, {
                "name" : "pump3",
                "icon" : "more_horiz",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "openDashboardState",
                "targetDashboardStateId" : "pump3",
                "setEntityId" : true,
                "stateEntityParamName" : null,
                "openRightLayout" : false,
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "d036562f-11b6-ab17-23ad-7554e60a5c69"
              }, {
                "name" : "pump4",
                "icon" : "more_horiz",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "openDashboardState",
                "targetDashboardStateId" : "pump4",
                "setEntityId" : true,
                "stateEntityParamName" : null,
                "openRightLayout" : false,
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "ce9ec3ae-b621-63f1-08d4-79af6fc8fc81"
              }, {
                "name" : "pump5",
                "icon" : "more_horiz",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "openDashboardState",
                "targetDashboardStateId" : "pump5",
                "setEntityId" : true,
                "stateEntityParamName" : null,
                "openRightLayout" : false,
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "69c47ef1-1c7c-5d7b-043a-71fc51bc3fed"
              }, {
                "name" : "pump6",
                "icon" : "more_horiz",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "openDashboardState",
                "targetDashboardStateId" : "pump6",
                "setEntityId" : true,
                "stateEntityParamName" : null,
                "openRightLayout" : false,
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "afc00324-ff3a-8d44-037c-deae30a0247c"
              } ]
            }
          },
          "row" : 0,
          "col" : 0,
          "id" : "67e3a186-1e6b-44a2-61c8-653d1f1867ad"
        },
        "50014ca7-922b-2021-e55c-92d433a6f99a" : {
          "isSystemType" : true,
          "bundleAlias" : "charts",
          "typeAlias" : "basic_timeseries",
          "type" : "timeseries",
          "title" : "New widget",
          "image" : null,
          "description" : null,
          "sizeX" : 8,
          "sizeY" : 5,
          "config" : {
            "datasources" : [ {
              "type" : "entity",
              "name" : null,
              "entityAliasId" : "2754dd92-28a3-a689-d65c-ab9001a86f73",
              "filterId" : null,
              "dataKeys" : [ {
                "name" : "power",
                "type" : "timeseries",
                "label" : "Power",
                "color" : "#2196f3",
                "settings" : { },
                "_hash" : 0.6313966133755187,
                "aggregationType" : null,
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : null,
                "postFuncBody" : null
              } ],
              "latestDataKeys" : [ ]
            } ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : true,
            "backgroundColor" : "#fff",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "8px",
            "settings" : {
              "shadowSize" : 4,
              "fontColor" : "#545454",
              "fontSize" : 10,
              "xaxis" : {
                "showLabels" : true,
                "color" : "#545454"
              },
              "yaxis" : {
                "showLabels" : true,
                "color" : "#545454"
              },
              "grid" : {
                "color" : "#545454",
                "tickColor" : "#DDDDDD",
                "verticalLines" : true,
                "horizontalLines" : true,
                "outlineWidth" : 1
              },
              "legend" : {
                "show" : true,
                "position" : "nw",
                "backgroundColor" : "#f0f0f0",
                "backgroundOpacity" : 0.85,
                "labelBoxBorderColor" : "rgba(1, 1, 1, 0.45)"
              },
              "decimals" : 1,
              "stack" : false,
              "tooltipIndividual" : false
            },
            "title" : "New Timeseries Line Chart",
            "dropShadow" : true,
            "enableFullscreen" : true,
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true
          },
          "row" : 0,
          "col" : 0,
          "id" : "50014ca7-922b-2021-e55c-92d433a6f99a"
        },
        "90a47608-7bee-e509-a0b1-8c623d6ed64e" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "image" : null,
          "description" : null,
          "sizeX" : 7.5,
          "sizeY" : 3,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"assets\">\n        <div class='description' id=\"assets\">\n            Assets\n        </div>\n    </div>\n</div>",
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n"
            },
            "title" : "Navigation: Assets",
            "dropShadow" : false,
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "widgetCss" : "",
            "pageSize" : 1024,
            "noDataDisplayMessage" : "",
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "name" : "assets",
                "icon" : "more_horiz",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "updateDashboardState",
                "targetDashboardStateId" : "assets",
                "setEntityId" : false,
                "stateEntityParamName" : null,
                "openRightLayout" : false,
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "50d09535-2ff6-589d-8b64-01b87e056a59"
              } ]
            }
          },
          "row" : 0,
          "col" : 0,
          "id" : "90a47608-7bee-e509-a0b1-8c623d6ed64e"
        },
        "84583b96-2696-bddd-de2e-c855e7ff2d8e" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"analytics\">\n        <div class='description' id=\"analytics\">\n            Analytics\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Analytics",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "analytics",
                "icon" : "more_horiz",
                "type" : "custom",
                "customFunction" : "var stateIndex = widgetContext.stateController\n        .getStateIndex();\nwhile (stateIndex > 0) {\n    stateIndex -= 1;\n    backToPrevState(stateIndex);\n}\nopenDashboardState('analytics');\n\nfunction backToPrevState(stateIndex) {\n    widgetContext.stateController.navigatePrevState(\n        stateIndex);\n}\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}"
              } ]
            }
          },
          "id" : "84583b96-2696-bddd-de2e-c855e7ff2d8e"
        },
        "e035c706-86e8-4c90-e5ba-426b0a03114b" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "image" : null,
          "description" : null,
          "sizeX" : 7.5,
          "sizeY" : 3,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"assets\">\n        <div class='description' id=\"assets\">\n            Assets\n        </div>\n    </div>\n</div>",
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n"
            },
            "title" : "Navigation: Assets",
            "dropShadow" : false,
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "widgetCss" : "",
            "pageSize" : 1024,
            "noDataDisplayMessage" : "",
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "name" : "assets",
                "icon" : "more_horiz",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "custom",
                "customFunction" : "var stateIndex = widgetContext.stateController\n        .getStateIndex();\nwhile (stateIndex > 0) {\n    stateIndex -= 1;\n    backToPrevState(stateIndex);\n}\nopenDashboardState('assets');\n\nfunction backToPrevState(stateIndex) {\n    widgetContext.stateController.navigatePrevState(\n        stateIndex);\n}\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "50d09535-2ff6-589d-8b64-01b87e056a59"
              } ]
            }
          },
          "row" : 0,
          "col" : 0,
          "id" : "e035c706-86e8-4c90-e5ba-426b0a03114b"
        },
        "57b214ba-d5f4-fb98-5a4e-2780cc8cd40f" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"devices\">\n        <div class='description' id=\"devices\">\n            Devices\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Devices",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "devices",
                "icon" : "more_horiz",
                "type" : "custom",
                "customFunction" : "var stateIndex = widgetContext.stateController\n        .getStateIndex();\nwhile (stateIndex > 0) {\n    stateIndex -= 1;\n    backToPrevState(stateIndex);\n}\nopenDashboardState('devices');\n\nfunction backToPrevState(stateIndex) {\n    widgetContext.stateController.navigatePrevState(\n        stateIndex);\n}\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}"
              } ]
            }
          },
          "id" : "57b214ba-d5f4-fb98-5a4e-2780cc8cd40f"
        },
        "e53b33f9-4411-0e3b-266d-145fe4c22412" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id='users'>\n        <div class='description' id='users'>\n            Users\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Users",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "users",
                "icon" : "more_horiz",
                "type" : "custom",
                "customFunction" : "var stateIndex = widgetContext.stateController\n        .getStateIndex();\nwhile (stateIndex > 0) {\n    stateIndex -= 1;\n    backToPrevState(stateIndex);\n}\nopenDashboardState('users');\n\nfunction backToPrevState(stateIndex) {\n    widgetContext.stateController.navigatePrevState(\n        stateIndex);\n}\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}"
              } ]
            }
          },
          "id" : "e53b33f9-4411-0e3b-266d-145fe4c22412"
        },
        "e653317f-1270-26e2-3469-6c20bb752f84" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"alarms\">\n        <div class='description' id=\"alarms\">\n            Alarms\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Alarms",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "alarms",
                "icon" : "more_horiz",
                "type" : "custom",
                "customFunction" : "var stateIndex = widgetContext.stateController\n        .getStateIndex();\nwhile (stateIndex > 0) {\n    stateIndex -= 1;\n    backToPrevState(stateIndex);\n}\nopenDashboardState('alarms');\n\nfunction backToPrevState(stateIndex) {\n    widgetContext.stateController.navigatePrevState(\n        stateIndex);\n}\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}"
              } ]
            }
          },
          "id" : "e653317f-1270-26e2-3469-6c20bb752f84"
        },
        "39c8e8df-cb3e-6450-6637-15acd1629a8e" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"settings\">\n        <div class='description' id=\"settings\">\n            Settings\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Settings",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "settings",
                "icon" : "more_horiz",
                "type" : "custom",
                "customFunction" : "var stateIndex = widgetContext.stateController\n        .getStateIndex();\nwhile (stateIndex > 0) {\n    stateIndex -= 1;\n    backToPrevState(stateIndex);\n}\nopenDashboardState('settings');\n\nfunction backToPrevState(stateIndex) {\n    widgetContext.stateController.navigatePrevState(\n        stateIndex);\n}\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}"
              } ]
            }
          },
          "id" : "39c8e8df-cb3e-6450-6637-15acd1629a8e"
        },
        "60cd14a5-d458-0ef5-2233-42fc9e3d3a13" : {
          "isSystemType" : true,
          "bundleAlias" : "control_widgets",
          "typeAlias" : "knob_control",
          "type" : "rpc",
          "title" : "New widget",
          "image" : null,
          "description" : null,
          "sizeX" : 5,
          "sizeY" : 4.5,
          "config" : {
            "targetDeviceAliases" : [ ],
            "showTitle" : false,
            "backgroundColor" : "#e6e7e8",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0px",
            "settings" : {
              "title" : "Knob control",
              "initialValue" : 50,
              "minValue" : 0,
              "maxValue" : 100,
              "getValueMethod" : "getPressure",
              "setValueMethod" : "setPressure",
              "requestTimeout" : 500,
              "requestPersistent" : false
            },
            "title" : "New Knob Control",
            "dropShadow" : true,
            "enableFullscreen" : false,
            "widgetStyle" : { },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "showLegend" : false,
            "actions" : { },
            "decimals" : 2,
            "datasources" : [ ],
            "targetDeviceAliasIds" : [ "f53edd68-75ef-2b98-c000-679877dd583c" ]
          },
          "row" : 0,
          "col" : 0,
          "id" : "60cd14a5-d458-0ef5-2233-42fc9e3d3a13"
        },
        "273c143a-fa52-e3c3-f1d9-702cb3254795" : {
          "isSystemType" : true,
          "bundleAlias" : "alarm_widgets",
          "typeAlias" : "alarms_table",
          "type" : "alarm",
          "title" : "New widget",
          "image" : null,
          "description" : null,
          "sizeX" : 10.5,
          "sizeY" : 6.5,
          "config" : {
            "timewindow" : {
              "realtime" : {
                "interval" : 1000,
                "timewindowMs" : 86400000
              },
              "aggregation" : {
                "type" : "NONE",
                "limit" : 200
              }
            },
            "showTitle" : true,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "4px",
            "settings" : {
              "enableSelection" : true,
              "enableSearch" : true,
              "displayDetails" : true,
              "allowAcknowledgment" : true,
              "allowClear" : true,
              "displayPagination" : true,
              "defaultPageSize" : 10,
              "defaultSortOrder" : "-createdTime",
              "enableSelectColumnDisplay" : true,
              "enableStickyAction" : false,
              "enableFilter" : true
            },
            "title" : "New Alarms table",
            "dropShadow" : true,
            "enableFullscreen" : true,
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400,
              "padding" : "5px 10px 5px 10px"
            },
            "useDashboardTimewindow" : false,
            "showLegend" : false,
            "alarmSource" : {
              "type" : "entity",
              "name" : null,
              "entityAliasId" : "2754dd92-28a3-a689-d65c-ab9001a86f73",
              "filterId" : null,
              "dataKeys" : [ {
                "name" : "createdTime",
                "type" : "alarm",
                "label" : "Created time",
                "color" : "#2196f3",
                "settings" : {
                  "useCellStyleFunction" : false,
                  "cellStyleFunction" : "",
                  "useCellContentFunction" : false,
                  "cellContentFunction" : ""
                },
                "_hash" : 0.021092237451093787
              }, {
                "name" : "originator",
                "type" : "alarm",
                "label" : "Originator",
                "color" : "#4caf50",
                "settings" : {
                  "useCellStyleFunction" : false,
                  "cellStyleFunction" : "",
                  "useCellContentFunction" : false,
                  "cellContentFunction" : ""
                },
                "_hash" : 0.2780007688856758
              }, {
                "name" : "type",
                "type" : "alarm",
                "label" : "Type",
                "color" : "#f44336",
                "settings" : {
                  "useCellStyleFunction" : false,
                  "cellStyleFunction" : "",
                  "useCellContentFunction" : false,
                  "cellContentFunction" : ""
                },
                "_hash" : 0.7323586880398418
              }, {
                "name" : "severity",
                "type" : "alarm",
                "label" : "Severity",
                "color" : "#ffc107",
                "settings" : {
                  "useCellStyleFunction" : false,
                  "useCellContentFunction" : false
                },
                "_hash" : 0.09927019860088193
              }, {
                "name" : "status",
                "type" : "alarm",
                "label" : "Status",
                "color" : "#607d8b",
                "settings" : {
                  "useCellStyleFunction" : false,
                  "cellStyleFunction" : "",
                  "useCellContentFunction" : false,
                  "cellContentFunction" : ""
                },
                "_hash" : 0.6588418951443418
              } ]
            },
            "alarmSearchStatus" : "ANY",
            "alarmsPollingInterval" : 5,
            "showTitleIcon" : false,
            "titleIcon" : "more_horiz",
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "widgetStyle" : { },
            "displayTimewindow" : true,
            "actions" : { },
            "alarmStatusList" : [ ],
            "alarmSeverityList" : [ ],
            "alarmTypeList" : [ ],
            "searchPropagatedAlarms" : false,
            "datasources" : [ ]
          },
          "row" : 0,
          "col" : 0,
          "id" : "273c143a-fa52-e3c3-f1d9-702cb3254795"
        },
        "2d51dc1b-842e-e944-a683-8cfdd48a9906" : {
          "isSystemType" : false,
          "bundleAlias" : "collibellex",
          "typeAlias" : "switch_2",
          "type" : "rpc",
          "title" : "New widget",
          "image" : null,
          "description" : null,
          "sizeX" : 6.5,
          "sizeY" : 4.5,
          "config" : {
            "targetDeviceAliases" : [ ],
            "showTitle" : false,
            "backgroundColor" : "#e6e7e8",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0px",
            "settings" : {
              "requestTimeout" : 500,
              "retrieveValueMethod" : "Call RPC get value method",
              "updateValueKey" : "value",
              "statusRequestMethod" : "getSwitch",
              "changeRequestMethod" : "setSwitch",
              "convertStatusRequestMethod" : "return data ? true : false;",
              "convertStatusChangeMethod" : "return value;"
            },
            "title" : "New Switch 2",
            "datasources" : [ ],
            "targetDeviceAliasIds" : [ "f53edd68-75ef-2b98-c000-679877dd583c" ],
            "showTitleIcon" : false,
            "dropShadow" : false,
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : { },
            "widgetCss" : "",
            "pageSize" : 1024,
            "noDataDisplayMessage" : "",
            "showLegend" : false
          },
          "row" : 0,
          "col" : 0,
          "id" : "2d51dc1b-842e-e944-a683-8cfdd48a9906"
        },
        "0568d1c0-dd44-c6b6-cd6e-24c9c32afe0d" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_value_card",
          "type" : "latest",
          "title" : "New widget",
          "sizeX" : 8,
          "sizeY" : 6,
          "config" : {
            "datasources" : [ {
              "type" : "entity",
              "name" : null,
              "entityAliasId" : "2754dd92-28a3-a689-d65c-ab9001a86f73",
              "filterId" : null,
              "dataKeys" : [ {
                "name" : "active",
                "type" : "attribute",
                "label" : "active",
                "color" : "#4caf50",
                "settings" : { },
                "_hash" : 0.9421613144570329,
                "postFuncBody" : "if (value === 'false') {\n    return 'Inactive';\n} else {\n    return 'Active';\n}"
              }, {
                "name" : "installationDate",
                "type" : "attribute",
                "label" : "installationDate",
                "color" : "#607d8b",
                "settings" : { },
                "_hash" : 0.2099158296476744,
                "postFuncBody" : "if (value) {\n    return moment(value).format(\"LL\");\n} else {\n    return 'Not set';\n}",
                "usePostProcessing" : true,
                "units" : null,
                "decimals" : null,
                "funcBody" : null
              }, {
                "name" : "comment",
                "type" : "attribute",
                "label" : "comment",
                "color" : "#f44336",
                "settings" : { },
                "_hash" : 0.6098255626823976
              } ]
            } ],
            "timewindow" : {
              "displayValue" : "",
              "selectedTab" : 0,
              "realtime" : {
                "realtimeType" : 1,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "quickInterval" : "CURRENT_DAY"
              },
              "history" : {
                "historyType" : 0,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "fixedTimewindow" : {
                  "startTimeMs" : 1684409450985,
                  "endTimeMs" : 1684495850985
                },
                "quickInterval" : "CURRENT_DAY"
              },
              "aggregation" : {
                "type" : "AVG",
                "limit" : 25000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "#fff",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0px",
            "settings" : {
              "cardHtml" : "<div class='card'>\n    <div class=\"header\">\n        <span>Інформація</span>\n    </div>\n    <div class='content'>\n        <div class=\"row\">\n            <span class='description'>Серійний номер:</span>\n            <span class='value'>${entityName:0}</span> \n        </div>\n        <div class=\"row\">\n            <span class='description'>Статус:</span>\n            <span class='value'>${status}</span> \n        </div>\n        <div class=\"row\">\n            <span class='description'>Дата виробництва:</span>\n            <span class='value'>${manufactDate}</span> \n        </div>\n        <div class=\"divider\"></div>\n        <div class=\"row\">\n            <span class='description'>Коментар:</span>\n            <span class='value'>${comment}</span> \n        </div>\n    </div>\n</div>",
              "cardCss" : ".card {\n    width: 100%;\n    height: 100%;\n    border-top: 1px solid #E0E0E0;\n    box-sizing: border-box;\n    display: flex;\n    flex-direction: column;\n}\n\n.card .header {\n  font-size: 1.15em;\n  font-weight: 600;\n  padding: 10px 10px 5px 10px;\n  border-bottom: 1px solid #E0E0E0\n}\n\n.card .content {\n   padding: 0 12px 10px 12px;\n   display: flex;\n   flex-direction: column;\n   /*align-items: stretch;*/\n   justify-content: flex-start;\n   height: 100%;\n   overflow-y: auto;\n   box-sizing: border-box;\n}\n\n.card .row {\n    display: flex;\n    align-items: flex-end;\n    justify-content: space-between;\n    padding: 8px 5px 8px 0;\n}\n\n.card .divider {\n    border: 1px solid #F2F2F2;\n    margin: 5px -5px;\n}\n\n.card .value {\n    font-size: 1em;\n    line-height: 1.5;\n    color: #333333;\n    text-align: right;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    text-transform: uppercase;\n    color: #333333;\n}\n\n@media (min-width: 960px) and (max-width: 1200px) {\n    .card .header {\n        font-size: 0.9em;\n    }\n    .card .value {\n        font-size: 0.7em;\n        line-height: 1;\n    }\n    .card .description {\n        font-size: 0.6em;\n        line-height: 1;\n    }\n}"
            },
            "title" : "Info",
            "dropShadow" : false,
            "enableFullscreen" : false,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "18px",
              "fontWeight" : 600,
              "padding" : "5px 10px 5px 5px"
            },
            "useDashboardTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "headerButton" : [ {
                "name" : "Edit Info",
                "icon" : "edit",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "customPretty",
                "customHtml" : "<form #editDeviceForm=\"ngForm\" [formGroup]=\"editDeviceFormGroup\"\n      (ngSubmit)=\"save()\" style=\"width: 480px;\">\n  <mat-toolbar fxLayout=\"row\" color=\"primary\">\n    <h2>Редагувати данні</h2>\n    <span fxFlex></span>\n    <button mat-button mat-icon-button\n            (click)=\"cancel()\"\n            type=\"button\">\n      <mat-icon class=\"material-icons\">close</mat-icon>\n    </button>\n  </mat-toolbar>\n  <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\">\n  </mat-progress-bar>\n  <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\n  <div mat-dialog-content>\n      <div class=\"mat-padding\" fxLayout=\"column\">\n            <mat-form-field class=\"mat-block\">\n                <mat-label>Серійний номер</mat-label>\n                <input matInput formControlName=\"deviceName\" required readonly=\"\">\n            </mat-form-field>\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\">\n                <tb-entity-subtype-autocomplete\n                    fxFlex=\"50\"\n                    formControlName=\"deviceType\"\n                    [required]=\"true\"\n                    [entityType]=\"'DEVICE'\"\n                ></tb-entity-subtype-autocomplete>\n            </div>\n            <div formGroupName=\"attributes\" fxLayout=\"row\" fxLayoutGap=\"8px\">\n                <mat-form-field fxFlex=\"100\" class=\"mat-block\">\n                    <mat-label>Коментар</mat-label>\n                    <input matInput formControlName=\"comment\">\n                </mat-form-field>\n            </div>\n      </div>  \n  </div>\n  <div mat-dialog-actions fxLayout=\"row\">\n    <span fxFlex></span>\n    <button mat-button color=\"primary\"\n            type=\"button\"\n            [disabled]=\"(isLoading$ | async)\"\n            (click)=\"cancel()\" cdkFocusInitial>\n      Закрити\n    </button>\n    <button mat-button mat-raised-button color=\"primary\"\n            style=\"margin-right: 20px;\"\n            type=\"submit\"\n            [disabled]=\"(isLoading$ | async) || editDeviceForm.invalid || !editDeviceForm.dirty\">\n      Оновити\n    </button>\n  </div>\n</form>\n",
                "customCss" : ".edit-device-form mat-toolbar.edit-device-form-toolbar {\n    background-color: #ffffff;\n    color: #333333;\n}\n.edit-device-form .edit-device-form-actions button[mat-button][color=\"primary\"] {\n    border: 1px solid #E0E0E0;\n}",
                "customFunction" : "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog'));\nlet deviceService = $injector.get(widgetContext.servicesMap.get('deviceService'));\nlet attributeService = $injector.get(widgetContext.servicesMap.get('attributeService'));\n\nopenEditDeviceDialog();\n\nfunction openEditDeviceDialog() {\n    customDialog.customDialog(htmlTemplate, EditDeviceDialogController).subscribe();\n}\n\nfunction EditDeviceDialogController(instance) {\n    let vm = instance;\n    \n    vm.device = null;\n    vm.attributes = {};\n    \n    vm.editDeviceFormGroup = vm.fb.group({\n      deviceName: ['', [vm.validators.required]],\n      deviceType: ['', [vm.validators.required]],\n      attributes: vm.fb.group({\n          comment: [null]\n      })      \n    });\n    \n    vm.cancel = function() {\n        vm.dialogRef.close(null);\n    };\n    \n    vm.save = function() {\n        vm.editDeviceFormGroup.markAsPristine();\n        if (vm.editDeviceFormGroup.get('deviceType').value !== vm.device.type) {\n            delete vm.device.deviceProfileId;\n        }\n        vm.device.name = vm.editDeviceFormGroup.get('deviceName').value,\n        vm.device.type = vm.editDeviceFormGroup.get('deviceType').value\n        deviceService.saveDevice(vm.device).subscribe(\n            function () {\n                saveAttributes().subscribe(\n                    function () {\n                        widgetContext.updateAliases();\n                        vm.dialogRef.close(null);\n                    }\n                );\n            }\n        );\n    };\n    \n    getEntityInfo();\n    \n    function getEntityInfo() {\n        deviceService.getDevice(entityId.id).subscribe(\n            function (device) {\n                attributeService.getEntityAttributes(entityId, 'SERVER_SCOPE',\n                                                    ['comment']).subscribe(\n                   function (attributes) {\n                        for (let i = 0; i < attributes.length; i++) {\n                            vm.attributes[attributes[i].key] = attributes[i].value; \n                        }\n                        vm.device = device;\n                        vm.editDeviceFormGroup.patchValue(\n                            {\n                                deviceName: vm.device.name,\n                                deviceType: vm.device.type,\n                                attributes: {\n                                    comment: vm.attributes.comment,\n                                }\n                            }, {emitEvent: false}\n                        );\n                   } \n                );\n            }\n        );    \n    }\n    \n    function saveAttributes() {\n        let attributes = vm.editDeviceFormGroup.get('attributes').value;\n        let attributesArray = [];\n        for (let key in attributes) {\n            attributesArray.push({key: key, value: attributes[key]});\n        }\n        if (attributesArray.length > 0) {\n            return attributeService.saveEntityAttributes(entityId, 'SERVER_SCOPE', attributesArray);\n        } else {\n            return widgetContext.rxjs.of([]);\n        }\n    }\n}",
                "customResources" : [ ],
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "eae3f520-d7a8-e886-e8ae-ec42f497286e"
              } ]
            },
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableDataExport" : false,
            "displayTimewindow" : true,
            "widgetCss" : "",
            "pageSize" : 1024,
            "noDataDisplayMessage" : ""
          },
          "id" : "0568d1c0-dd44-c6b6-cd6e-24c9c32afe0d"
        },
        "d37c6ef3-fb64-dd10-8abe-fb2668aa1a0e" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"analytics\">\n        <div class='description' id=\"analytics\">\n            Analytics\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Analytics",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "analytics",
                "icon" : "more_horiz",
                "type" : "custom",
                "customFunction" : "var stateIndex = widgetContext.stateController\n        .getStateIndex();\nwhile (stateIndex > 0) {\n    stateIndex -= 1;\n    backToPrevState(stateIndex);\n}\nopenDashboardState('analytics');\n\nfunction backToPrevState(stateIndex) {\n    widgetContext.stateController.navigatePrevState(\n        stateIndex);\n}\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}"
              } ]
            }
          },
          "id" : "d37c6ef3-fb64-dd10-8abe-fb2668aa1a0e"
        },
        "8b325b4b-65bb-a033-e3cd-3bba8d1271bc" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "image" : null,
          "description" : null,
          "sizeX" : 7.5,
          "sizeY" : 3,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"assets\">\n        <div class='description' id=\"assets\">\n            Assets\n        </div>\n    </div>\n</div>",
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n"
            },
            "title" : "Navigation: Assets",
            "dropShadow" : false,
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "widgetCss" : "",
            "pageSize" : 1024,
            "noDataDisplayMessage" : "",
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "name" : "assets",
                "icon" : "more_horiz",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "custom",
                "customFunction" : "var stateIndex = widgetContext.stateController\n        .getStateIndex();\nwhile (stateIndex > 0) {\n    stateIndex -= 1;\n    backToPrevState(stateIndex);\n}\nopenDashboardState('assets');\n\nfunction backToPrevState(stateIndex) {\n    widgetContext.stateController.navigatePrevState(\n        stateIndex);\n}\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "50d09535-2ff6-589d-8b64-01b87e056a59"
              } ]
            }
          },
          "row" : 0,
          "col" : 0,
          "id" : "8b325b4b-65bb-a033-e3cd-3bba8d1271bc"
        },
        "17dad4ce-7893-27e1-8079-02c60fa9858f" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"devices\">\n        <div class='description' id=\"devices\">\n            Devices\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Devices",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "devices",
                "icon" : "more_horiz",
                "type" : "custom",
                "customFunction" : "var stateIndex = widgetContext.stateController\n        .getStateIndex();\nwhile (stateIndex > 0) {\n    stateIndex -= 1;\n    backToPrevState(stateIndex);\n}\nopenDashboardState('devices');\n\nfunction backToPrevState(stateIndex) {\n    widgetContext.stateController.navigatePrevState(\n        stateIndex);\n}\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}"
              } ]
            }
          },
          "id" : "17dad4ce-7893-27e1-8079-02c60fa9858f"
        },
        "ca326bbf-b5e9-80fe-ece1-85401ef0cf09" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id='users'>\n        <div class='description' id='users'>\n            Users\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Users",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "users",
                "icon" : "more_horiz",
                "type" : "custom",
                "customFunction" : "var stateIndex = widgetContext.stateController\n        .getStateIndex();\nwhile (stateIndex > 0) {\n    stateIndex -= 1;\n    backToPrevState(stateIndex);\n}\nopenDashboardState('users');\n\nfunction backToPrevState(stateIndex) {\n    widgetContext.stateController.navigatePrevState(\n        stateIndex);\n}\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}"
              } ]
            }
          },
          "id" : "ca326bbf-b5e9-80fe-ece1-85401ef0cf09"
        },
        "a410a1f9-f744-09e5-17c7-03fd3b243e3f" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"alarms\">\n        <div class='description' id=\"alarms\">\n            Alarms\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Alarms",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "alarms",
                "icon" : "more_horiz",
                "type" : "custom",
                "customFunction" : "var stateIndex = widgetContext.stateController\n        .getStateIndex();\nwhile (stateIndex > 0) {\n    stateIndex -= 1;\n    backToPrevState(stateIndex);\n}\nopenDashboardState('alarms');\n\nfunction backToPrevState(stateIndex) {\n    widgetContext.stateController.navigatePrevState(\n        stateIndex);\n}\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}"
              } ]
            }
          },
          "id" : "a410a1f9-f744-09e5-17c7-03fd3b243e3f"
        },
        "62cb849d-9f84-c425-66cc-e86ec40478b4" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"settings\">\n        <div class='description' id=\"settings\">\n            Settings\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Settings",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "settings",
                "icon" : "more_horiz",
                "type" : "custom",
                "customFunction" : "var stateIndex = widgetContext.stateController\n        .getStateIndex();\nwhile (stateIndex > 0) {\n    stateIndex -= 1;\n    backToPrevState(stateIndex);\n}\nopenDashboardState('settings');\n\nfunction backToPrevState(stateIndex) {\n    widgetContext.stateController.navigatePrevState(\n        stateIndex);\n}\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}"
              } ]
            }
          },
          "id" : "62cb849d-9f84-c425-66cc-e86ec40478b4"
        },
        "8e2aec72-97c8-bb54-603a-b60496a367bc" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"setted_devices\">\n        <div class='description' id=\"setted_devices\">\n            Встановленні станції\n        </div>\n    </div>\n</div>",
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n"
            },
            "title" : "Setted Devices",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "name" : "setted_devices",
                "icon" : "more_horiz",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "updateDashboardState",
                "targetDashboardStateId" : "setted_devices",
                "setEntityId" : false,
                "stateEntityParamName" : null,
                "openRightLayout" : null,
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207"
              } ]
            },
            "widgetCss" : "",
            "pageSize" : 1024,
            "noDataDisplayMessage" : ""
          },
          "id" : "8e2aec72-97c8-bb54-603a-b60496a367bc"
        },
        "151666a4-6997-f1ba-304e-4308d794fbf9" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"unsetted_devices\">\n        <div class='description' id=\"unsetted_devices\">\n            Нестановленні станції\n        </div>\n    </div>\n</div>",
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n"
            },
            "title" : "Unetted Devices",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "name" : "unsetted_devices",
                "icon" : "more_horiz",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "updateDashboardState",
                "targetDashboardStateId" : "unsetted_devices",
                "setEntityId" : false,
                "stateEntityParamName" : null,
                "openRightLayout" : null,
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207"
              } ]
            },
            "widgetCss" : "",
            "pageSize" : 1024,
            "noDataDisplayMessage" : ""
          },
          "id" : "151666a4-6997-f1ba-304e-4308d794fbf9"
        },
        "042e4749-080d-0a0d-270f-697e0957140a" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "image" : null,
          "description" : null,
          "sizeX" : 7.5,
          "sizeY" : 3,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"assets\">\n        <div class='description' id=\"assets\">\n            Assets\n        </div>\n    </div>\n</div>",
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n"
            },
            "title" : "Navigation: Assets",
            "dropShadow" : false,
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "widgetCss" : "",
            "pageSize" : 1024,
            "noDataDisplayMessage" : "",
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "name" : "assets",
                "icon" : "more_horiz",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "updateDashboardState",
                "targetDashboardStateId" : "assets",
                "setEntityId" : false,
                "stateEntityParamName" : null,
                "openRightLayout" : false,
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "50d09535-2ff6-589d-8b64-01b87e056a59"
              } ]
            }
          },
          "row" : 0,
          "col" : 0,
          "id" : "042e4749-080d-0a0d-270f-697e0957140a"
        },
        "370dfb48-0139-8e06-cda4-f95e75d282fb" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"devices\">\n        <div class='description' id=\"devices\">\n            Devices\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Devices",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "devices",
                "icon" : "more_horiz",
                "type" : "updateDashboardState",
                "targetDashboardStateId" : "devices",
                "setEntityId" : false
              } ]
            }
          },
          "id" : "370dfb48-0139-8e06-cda4-f95e75d282fb"
        },
        "5f39ff37-b950-5932-06d7-4918e02e0f81" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"setted_devices\">\n        <div class='description' id=\"setted_devices\">\n            Встановленні станції\n        </div>\n    </div>\n</div>",
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n    opacity: 0.5;\n}\n"
            },
            "title" : "Setted Devices",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "name" : "setted_devices",
                "icon" : "more_horiz",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "updateDashboardState",
                "targetDashboardStateId" : "setted_devices",
                "setEntityId" : false,
                "stateEntityParamName" : null,
                "openRightLayout" : null,
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207"
              } ]
            },
            "widgetCss" : "",
            "pageSize" : 1024,
            "noDataDisplayMessage" : ""
          },
          "id" : "5f39ff37-b950-5932-06d7-4918e02e0f81"
        },
        "c2bb937d-da86-40ac-2d85-fcb9256bae91" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"unsetted_devices\">\n        <div class='description' id=\"unsetted_devices\">\n            Нестановленні станції\n        </div>\n    </div>\n</div>",
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n"
            },
            "title" : "Unetted Devices",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "name" : "unsetted_devices",
                "icon" : "more_horiz",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "updateDashboardState",
                "targetDashboardStateId" : "unsetted_devices",
                "setEntityId" : false,
                "stateEntityParamName" : null,
                "openRightLayout" : null,
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207"
              } ]
            },
            "widgetCss" : "",
            "pageSize" : 1024,
            "noDataDisplayMessage" : ""
          },
          "id" : "c2bb937d-da86-40ac-2d85-fcb9256bae91"
        },
        "93168a0d-6c69-4a1c-bca6-7229074d88a9" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "image" : null,
          "description" : null,
          "sizeX" : 7.5,
          "sizeY" : 3,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"assets\">\n        <div class='description' id=\"assets\">\n            Assets\n        </div>\n    </div>\n</div>",
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n"
            },
            "title" : "Navigation: Assets",
            "dropShadow" : false,
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "widgetCss" : "",
            "pageSize" : 1024,
            "noDataDisplayMessage" : "",
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "name" : "assets",
                "icon" : "more_horiz",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "updateDashboardState",
                "targetDashboardStateId" : "assets",
                "setEntityId" : false,
                "stateEntityParamName" : null,
                "openRightLayout" : false,
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "50d09535-2ff6-589d-8b64-01b87e056a59"
              } ]
            }
          },
          "row" : 0,
          "col" : 0,
          "id" : "93168a0d-6c69-4a1c-bca6-7229074d88a9"
        },
        "fb4f4c6c-7033-7330-870a-553699de8d9c" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"devices\">\n        <div class='description' id=\"devices\">\n            Devices\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Devices",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "devices",
                "icon" : "more_horiz",
                "type" : "updateDashboardState",
                "targetDashboardStateId" : "devices",
                "setEntityId" : false
              } ]
            }
          },
          "id" : "fb4f4c6c-7033-7330-870a-553699de8d9c"
        },
        "ed2ab648-b789-0ee9-1b4b-26127955708f" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"setted_devices\">\n        <div class='description' id=\"setted_devices\">\n            Встановленні станції\n        </div>\n    </div>\n</div>",
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n"
            },
            "title" : "Setted Devices",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "name" : "setted_devices",
                "icon" : "more_horiz",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "updateDashboardState",
                "targetDashboardStateId" : "setted_devices",
                "setEntityId" : false,
                "stateEntityParamName" : null,
                "openRightLayout" : null,
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207"
              } ]
            },
            "widgetCss" : "",
            "pageSize" : 1024,
            "noDataDisplayMessage" : ""
          },
          "id" : "ed2ab648-b789-0ee9-1b4b-26127955708f"
        },
        "2d70e2eb-a8a1-5a7c-9fe1-f26b3658eee6" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardHtml" : "<div class='card'>\n    <div class='content' id=\"unsetted_devices\">\n        <div class='description' id=\"unsetted_devices\">\n            Нестановленні станції\n        </div>\n    </div>\n</div>",
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n    opacity: 0.5;\n}\n"
            },
            "title" : "Unetted Devices",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "name" : "unsetted_devices",
                "icon" : "more_horiz",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "updateDashboardState",
                "targetDashboardStateId" : "unsetted_devices",
                "setEntityId" : false,
                "stateEntityParamName" : null,
                "openRightLayout" : null,
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207"
              } ]
            },
            "widgetCss" : "",
            "pageSize" : 1024,
            "noDataDisplayMessage" : ""
          },
          "id" : "2d70e2eb-a8a1-5a7c-9fe1-f26b3658eee6"
        },
        "e64d5304-eae9-3d22-a284-98f94967baa8" : {
          "isSystemType" : true,
          "bundleAlias" : "cards",
          "typeAlias" : "html_card",
          "type" : "static",
          "title" : "New widget",
          "sizeX" : 4,
          "sizeY" : 1,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "realtime" : {
                "timewindowMs" : 60000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0",
            "settings" : {
              "cardCss" : ".card {\n   width: 100%;\n   height: 100%;\n   box-sizing: border-box;\n}\n\n.card .content {\n   padding: 5px;\n   display: flex;\n   flex-direction: column;\n   align-items: center;\n   justify-content: center;\n   height: 100%;\n   box-sizing: border-box;\n   transition: background-color 0.5s;\n}\n\n.card .content:hover {\n    background-color: #ddd;\n}\n\n.card .description {\n    font-size: 0.75em;\n    font-weight: normal;\n    line-height: 2;\n    color: #333333;\n    text-transform: uppercase;\n}\n",
              "cardHtml" : "<div class='card'>\n    <div class='content' id='users'>\n        <div class='description' id='users'>\n            Users\n        </div>\n    </div>\n</div>"
            },
            "title" : "Navigation:  Users",
            "dropShadow" : false,
            "showTitleIcon" : false,
            "titleIcon" : null,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "enableFullscreen" : false,
            "enableDataExport" : true,
            "widgetStyle" : {
              "border" : "1px solid #E0E0E0"
            },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "displayTimewindow" : true,
            "showLegend" : false,
            "actions" : {
              "elementClick" : [ {
                "id" : "b5eba137-4ca4-ec3d-f9a0-8b59e2d98207",
                "name" : "users",
                "icon" : "more_horiz",
                "type" : "updateDashboardState",
                "targetDashboardStateId" : "users",
                "setEntityId" : false
              } ]
            }
          },
          "id" : "e64d5304-eae9-3d22-a284-98f94967baa8"
        }
      },
      "states" : {
        "analytics" : {
          "name" : "Analytics",
          "root" : false,
          "layouts" : {
            "main" : {
              "widgets" : {
                "ccc94584-ce53-cdfc-ea3b-ecd21fa19abf" : {
                  "sizeX" : 18,
                  "sizeY" : 15,
                  "mobileHeight" : 3,
                  "row" : 1,
                  "col" : 0,
                  "mobileOrder" : 11
                },
                "ee542aaf-7305-9baa-3022-34a9da7b45ed" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "mobileOrder" : 2,
                  "mobileHeight" : 1,
                  "row" : 0,
                  "col" : 9
                },
                "d3ea68cf-4dd0-a261-a04f-7008b3d2eed4" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "mobileOrder" : 3,
                  "mobileHeight" : 1,
                  "row" : 0,
                  "col" : 3
                },
                "117490c6-fa7f-34cf-1de9-dfbc6068bbdb" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "mobileOrder" : 5,
                  "mobileHeight" : 1,
                  "row" : 0,
                  "col" : 12
                },
                "66e7a232-0011-b462-e359-c5d99a2a9c56" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "mobileOrder" : 6,
                  "mobileHeight" : 1,
                  "row" : 0,
                  "col" : 15
                },
                "b790fdaa-727a-2572-b2a2-c72a55444cbc" : {
                  "sizeX" : 12,
                  "sizeY" : 16,
                  "row" : 0,
                  "col" : 18
                },
                "90a47608-7bee-e509-a0b1-8c623d6ed64e" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 0
                },
                "e64d5304-eae9-3d22-a284-98f94967baa8" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 6
                }
              },
              "gridSettings" : {
                "backgroundColor" : "#f2f2f2",
                "color" : "rgba(0,0,0,0.870588)",
                "columns" : 30,
                "backgroundSizeMode" : "100%",
                "autoFillHeight" : true,
                "mobileAutoFillHeight" : false,
                "mobileRowHeight" : 70,
                "margin" : 8,
                "backgroundImageUrl" : null
              }
            }
          }
        },
        "devices" : {
          "name" : "Devices",
          "root" : false,
          "layouts" : {
            "main" : {
              "widgets" : {
                "1b2ee163-50d8-ae49-46ba-9b616bc63631" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "mobileOrder" : 2,
                  "mobileHeight" : 1,
                  "row" : 0,
                  "col" : 9
                },
                "7bf92548-b95f-2874-92c4-6675571878ad" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "mobileOrder" : 3,
                  "mobileHeight" : 1,
                  "row" : 0,
                  "col" : 3
                },
                "ecd0367e-5d49-f736-545c-f32ea25a4728" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "mobileOrder" : 4,
                  "mobileHeight" : 1,
                  "row" : 0,
                  "col" : 6
                },
                "e91e4167-68c3-5d5d-efc5-a19ec8fb999c" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "mobileOrder" : 5,
                  "mobileHeight" : 1,
                  "row" : 0,
                  "col" : 12
                },
                "be3eb9bd-21f7-250c-ccf5-1d2dd67b73e2" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "mobileOrder" : 6,
                  "mobileHeight" : 1,
                  "row" : 0,
                  "col" : 15
                },
                "291ab4b2-f371-9897-6856-385e5745f430" : {
                  "sizeX" : 18,
                  "sizeY" : 16,
                  "mobileOrder" : 7,
                  "mobileHeight" : 5,
                  "row" : 1,
                  "col" : 0
                },
                "c33ce26b-a96e-4de0-ae3b-7ddf92cf6555" : {
                  "sizeX" : 12,
                  "sizeY" : 15,
                  "mobileOrder" : 8,
                  "mobileHeight" : 5,
                  "row" : 2,
                  "col" : 18
                },
                "fe8202be-4e1c-cb21-ec6f-f1fb22860084" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 0
                },
                "8e2aec72-97c8-bb54-603a-b60496a367bc" : {
                  "sizeX" : 6,
                  "sizeY" : 2,
                  "row" : 0,
                  "col" : 18
                },
                "151666a4-6997-f1ba-304e-4308d794fbf9" : {
                  "sizeX" : 6,
                  "sizeY" : 2,
                  "row" : 0,
                  "col" : 24
                }
              },
              "gridSettings" : {
                "backgroundColor" : "#f2f2f2",
                "color" : "rgba(0,0,0,0.870588)",
                "columns" : 30,
                "backgroundSizeMode" : "100%",
                "autoFillHeight" : true,
                "mobileAutoFillHeight" : false,
                "mobileRowHeight" : 70,
                "margin" : 8,
                "backgroundImageUrl" : null
              }
            }
          }
        },
        "users" : {
          "name" : "Users",
          "root" : false,
          "layouts" : {
            "main" : {
              "widgets" : {
                "18a3998c-c567-1d8a-c4fe-07446dfe110a" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 9,
                  "mobileOrder" : 2,
                  "mobileHeight" : 1
                },
                "dd79b0d6-e583-1efc-6d26-07ce088e5f14" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 3,
                  "mobileOrder" : 3,
                  "mobileHeight" : 1
                },
                "3131e211-a6bb-212b-b75e-2051aecdc686" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 6,
                  "mobileOrder" : 4,
                  "mobileHeight" : 1
                },
                "10ac8f78-44fe-f83c-2a4c-193a9d749a86" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 12,
                  "mobileOrder" : 5,
                  "mobileHeight" : 1
                },
                "aeed3b02-dbcd-32d5-b503-1f878e389cfb" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 15,
                  "mobileOrder" : 6,
                  "mobileHeight" : 1
                },
                "82c48e08-7015-1a8f-0091-d396abd59009" : {
                  "sizeX" : 18,
                  "sizeY" : 15,
                  "row" : 1,
                  "col" : 0
                },
                "ba85a457-1ac5-5ba0-c5a8-9b30430e099a" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 0
                }
              },
              "gridSettings" : {
                "backgroundColor" : "#f2f2f2",
                "color" : "rgba(0,0,0,0.870588)",
                "columns" : 30,
                "backgroundSizeMode" : "100%",
                "autoFillHeight" : true,
                "mobileAutoFillHeight" : false,
                "mobileRowHeight" : 70,
                "margin" : 8,
                "backgroundImageUrl" : null
              }
            }
          }
        },
        "alarms" : {
          "name" : "Alarms",
          "root" : false,
          "layouts" : {
            "main" : {
              "widgets" : {
                "efc2c22c-ece5-bcfe-d5f1-1b15125b7f01" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 9,
                  "mobileOrder" : 2,
                  "mobileHeight" : 1
                },
                "5a352e8c-34bd-d93b-2fb3-c41905cf9e3a" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 3,
                  "mobileOrder" : 3,
                  "mobileHeight" : 1
                },
                "4ab2e7c3-dbe0-dc48-7ecb-0df1f16916d4" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 6,
                  "mobileOrder" : 4,
                  "mobileHeight" : 1
                },
                "6727afe1-7b86-7c58-5873-a9700a83edec" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 12,
                  "mobileOrder" : 5,
                  "mobileHeight" : 1
                },
                "9ac96f6f-ed61-67b2-5695-3fe61064b7f8" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 15,
                  "mobileOrder" : 6,
                  "mobileHeight" : 1
                },
                "c2bdcb20-9d23-3ef4-34fd-950d8e322152" : {
                  "sizeX" : 12,
                  "sizeY" : 15,
                  "mobileOrder" : 8,
                  "mobileHeight" : 4,
                  "row" : 0,
                  "col" : 18
                },
                "db53f985-2418-e36d-6b5d-c51eb80c6264" : {
                  "sizeX" : 18,
                  "sizeY" : 14,
                  "mobileOrder" : 7,
                  "mobileHeight" : 4,
                  "row" : 1,
                  "col" : 0
                },
                "c9f00afe-352d-279c-0900-111f4ef6172c" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 0
                }
              },
              "gridSettings" : {
                "backgroundColor" : "#f2f2f2",
                "color" : "rgba(0,0,0,0.870588)",
                "columns" : 30,
                "backgroundSizeMode" : "100%",
                "autoFillHeight" : true,
                "mobileAutoFillHeight" : false,
                "mobileRowHeight" : 70,
                "margin" : 8,
                "backgroundImageUrl" : null
              }
            }
          }
        },
        "settings" : {
          "name" : "Settings",
          "root" : false,
          "layouts" : {
            "main" : {
              "widgets" : {
                "6c91bf1f-bdf6-6af7-de49-079b89bee211" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 9,
                  "mobileOrder" : 2,
                  "mobileHeight" : 1
                },
                "05cb8c19-3d4f-b147-a377-8ab72aa3057d" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 3,
                  "mobileOrder" : 3,
                  "mobileHeight" : 1
                },
                "9545737b-2035-0a32-b682-0e7bc61ea940" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 6,
                  "mobileOrder" : 4,
                  "mobileHeight" : 1
                },
                "70b3ca21-cc98-46ea-1676-16d3edea2a65" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 12,
                  "mobileOrder" : 5,
                  "mobileHeight" : 1
                },
                "936cf52c-f762-628e-00e8-363b53e1af4f" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 15,
                  "mobileOrder" : 6,
                  "mobileHeight" : 1
                },
                "1b26a5b1-61be-945c-b7a7-85edc3e219cf" : {
                  "sizeX" : 9,
                  "sizeY" : 15,
                  "row" : 1,
                  "col" : 0,
                  "mobileOrder" : 7,
                  "mobileHeight" : 10
                },
                "e5602f65-3248-dc60-799c-0d8b413e3604" : {
                  "sizeX" : 9,
                  "sizeY" : 15,
                  "row" : 1,
                  "col" : 9,
                  "mobileOrder" : 8,
                  "mobileHeight" : 5
                },
                "2b036a6f-052f-46fe-14c6-6dc59416704f" : {
                  "sizeX" : 12,
                  "sizeY" : 16,
                  "row" : 0,
                  "col" : 18,
                  "mobileOrder" : 9,
                  "mobileHeight" : 5
                },
                "f8e06d1f-9f8b-5e6a-6d14-6b35e8a3d0a4" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 0
                }
              },
              "gridSettings" : {
                "backgroundColor" : "#f2f2f2",
                "color" : "rgba(0,0,0,0.870588)",
                "columns" : 30,
                "backgroundSizeMode" : "100%",
                "autoFillHeight" : true,
                "mobileAutoFillHeight" : false,
                "mobileRowHeight" : 70,
                "margin" : 8,
                "backgroundImageUrl" : null
              }
            }
          }
        },
        "device_alarms" : {
          "name" : "${entityName} Alarms",
          "root" : false,
          "layouts" : {
            "main" : {
              "widgets" : {
                "fd0cad3c-cb76-a2c5-446a-4bc280adfee1" : {
                  "sizeX" : 32,
                  "sizeY" : 14,
                  "row" : 0,
                  "col" : 0
                }
              },
              "gridSettings" : {
                "backgroundColor" : "#f2f2f2",
                "color" : "rgba(0,0,0,0.870588)",
                "columns" : 32,
                "backgroundSizeMode" : "100%",
                "autoFillHeight" : true,
                "mobileAutoFillHeight" : false,
                "mobileRowHeight" : 70,
                "margin" : 8
              }
            }
          }
        },
        "set-location" : {
          "name" : "${entityName}: Edit location parameters",
          "root" : false,
          "layouts" : {
            "main" : {
              "widgets" : {
                "629dcd1a-9569-ba67-0ffd-638051f4ea97" : {
                  "sizeX" : 48,
                  "sizeY" : 19,
                  "row" : 0,
                  "col" : 0
                }
              },
              "gridSettings" : {
                "backgroundColor" : "#eeeeee",
                "color" : "rgba(0,0,0,0.870588)",
                "columns" : 48,
                "margin" : 0,
                "backgroundSizeMode" : "100%",
                "autoFillHeight" : true,
                "backgroundImageUrl" : null,
                "mobileAutoFillHeight" : false,
                "mobileRowHeight" : 70
              }
            }
          }
        },
        "assets" : {
          "name" : "Assets",
          "root" : true,
          "layouts" : {
            "main" : {
              "widgets" : {
                "20e020b4-4030-4f44-b4fd-a755f80c7655" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 3
                },
                "2e77d135-dfd4-10c3-e15b-31a26375e552" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 0
                },
                "3584d7a9-2c01-2225-1824-b6e19a17a134" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 9
                },
                "024efb1a-ba5b-dcae-909c-819797bf9846" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 6
                },
                "8b56ea37-eab0-19ad-571e-9c595853a983" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 12
                },
                "9ce483d5-4b81-1660-84c9-e7ed3ab2b10c" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 15
                },
                "f3be2b72-af24-d31b-5a90-4f644aac1049" : {
                  "sizeX" : 12,
                  "sizeY" : 9,
                  "row" : 0,
                  "col" : 18
                },
                "f350f4ba-f6c4-6d67-4d09-90c9d7f7c5bd" : {
                  "sizeX" : 12,
                  "sizeY" : 8,
                  "row" : 9,
                  "col" : 18
                },
                "4acc2be0-a2dc-b0af-bf48-c8fb6b1b2984" : {
                  "sizeX" : 18,
                  "sizeY" : 16,
                  "row" : 1,
                  "col" : 0
                }
              },
              "gridSettings" : {
                "backgroundColor" : "#f2f2f2",
                "columns" : 30,
                "margin" : 8,
                "backgroundSizeMode" : "100%",
                "autoFillHeight" : true,
                "backgroundImageUrl" : null,
                "mobileAutoFillHeight" : false,
                "mobileRowHeight" : 70
              }
            }
          }
        },
        "asset_details" : {
          "name" : "${entityName}",
          "root" : false,
          "layouts" : {
            "main" : {
              "widgets" : {
                "6f23568a-5ed0-db6d-ce47-bf6ba1683e6c" : {
                  "sizeX" : 4,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 0,
                  "mobileOrder" : 1,
                  "mobileHeight" : 1
                },
                "391e3afb-9cd1-6d1c-e6e6-ddc788d6bef2" : {
                  "sizeX" : 4,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 4,
                  "mobileOrder" : 2,
                  "mobileHeight" : 1
                },
                "8838c3d4-e8d7-05b9-f97f-a79ff9a03d3b" : {
                  "sizeX" : 4,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 12,
                  "mobileOrder" : 3,
                  "mobileHeight" : 1
                },
                "74a4f4ed-d830-538b-9ee0-27ffd4c4b66c" : {
                  "sizeX" : 4,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 16,
                  "mobileOrder" : 4,
                  "mobileHeight" : 1
                },
                "04a5ced4-7ce0-ec3a-fb79-a6a8e47e0d7e" : {
                  "sizeX" : 4,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 20,
                  "mobileOrder" : 5,
                  "mobileHeight" : 1
                },
                "2dc142e5-6fa4-263c-0f42-1e67db568682" : {
                  "sizeX" : 4,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 24,
                  "mobileOrder" : 6,
                  "mobileHeight" : 1
                },
                "1bfaeb7d-8b3c-d7cb-20bb-3cb9bcca4b7c" : {
                  "sizeX" : 13,
                  "sizeY" : 7,
                  "row" : 9,
                  "col" : 19,
                  "mobileOrder" : 12,
                  "mobileHeight" : 4
                },
                "6fb621cb-94da-2f0e-1561-83699315ee3e" : {
                  "sizeX" : 19,
                  "sizeY" : 7,
                  "mobileHeight" : 3,
                  "row" : 9,
                  "col" : 0,
                  "mobileOrder" : 11
                },
                "51f6f10f-c491-9e27-04d5-a235ca4fc16c" : {
                  "sizeX" : 13,
                  "sizeY" : 8,
                  "mobileOrder" : 15,
                  "mobileHeight" : 5,
                  "row" : 1,
                  "col" : 19
                },
                "1ff2db71-0541-b3b7-e71c-e3d719a56cfc" : {
                  "sizeX" : 19,
                  "sizeY" : 8,
                  "row" : 1,
                  "col" : 0
                },
                "ef6f101c-5ec2-204e-0490-cd94f90b0ce6" : {
                  "sizeX" : 4,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 8
                }
              },
              "gridSettings" : {
                "backgroundColor" : "#f2f2f2",
                "color" : "rgba(0,0,0,0.870588)",
                "columns" : 32,
                "backgroundSizeMode" : "100%",
                "autoFillHeight" : false,
                "mobileAutoFillHeight" : false,
                "mobileRowHeight" : 70,
                "margin" : 8
              }
            }
          }
        },
        "device_typeOne" : {
          "name" : "${entityName}",
          "root" : false,
          "layouts" : {
            "main" : {
              "widgets" : {
                "50014ca7-922b-2021-e55c-92d433a6f99a" : {
                  "sizeX" : 18,
                  "sizeY" : 8,
                  "row" : 1,
                  "col" : 0
                },
                "84583b96-2696-bddd-de2e-c855e7ff2d8e" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 9
                },
                "e035c706-86e8-4c90-e5ba-426b0a03114b" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 0
                },
                "57b214ba-d5f4-fb98-5a4e-2780cc8cd40f" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 3
                },
                "e53b33f9-4411-0e3b-266d-145fe4c22412" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 6
                },
                "e653317f-1270-26e2-3469-6c20bb752f84" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 12
                },
                "39c8e8df-cb3e-6450-6637-15acd1629a8e" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 15
                },
                "60cd14a5-d458-0ef5-2233-42fc9e3d3a13" : {
                  "sizeX" : 6,
                  "sizeY" : 5,
                  "row" : 9,
                  "col" : 18
                },
                "273c143a-fa52-e3c3-f1d9-702cb3254795" : {
                  "sizeX" : 18,
                  "sizeY" : 8,
                  "row" : 9,
                  "col" : 0
                },
                "2d51dc1b-842e-e944-a683-8cfdd48a9906" : {
                  "sizeX" : 6,
                  "sizeY" : 5,
                  "row" : 9,
                  "col" : 24
                },
                "0568d1c0-dd44-c6b6-cd6e-24c9c32afe0d" : {
                  "sizeX" : 12,
                  "sizeY" : 9,
                  "row" : 0,
                  "col" : 18
                }
              },
              "gridSettings" : {
                "backgroundColor" : "#f2f2f2",
                "columns" : 30,
                "margin" : 8,
                "backgroundSizeMode" : "100%",
                "autoFillHeight" : true,
                "backgroundImageUrl" : null,
                "mobileAutoFillHeight" : false,
                "mobileRowHeight" : 70
              }
            }
          }
        },
        "device_typeSecond" : {
          "name" : "${entityName}",
          "root" : false,
          "layouts" : {
            "main" : {
              "widgets" : {
                "67e3a186-1e6b-44a2-61c8-653d1f1867ad" : {
                  "sizeX" : 18,
                  "sizeY" : 9,
                  "row" : 1,
                  "col" : 0
                },
                "d37c6ef3-fb64-dd10-8abe-fb2668aa1a0e" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 9
                },
                "8b325b4b-65bb-a033-e3cd-3bba8d1271bc" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 0
                },
                "17dad4ce-7893-27e1-8079-02c60fa9858f" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 3
                },
                "ca326bbf-b5e9-80fe-ece1-85401ef0cf09" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 6
                },
                "a410a1f9-f744-09e5-17c7-03fd3b243e3f" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 12
                },
                "62cb849d-9f84-c425-66cc-e86ec40478b4" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 15
                }
              },
              "gridSettings" : {
                "backgroundColor" : "#f2f2f2",
                "columns" : 30,
                "margin" : 8,
                "backgroundSizeMode" : "100%",
                "autoFillHeight" : false,
                "backgroundImageUrl" : null,
                "mobileAutoFillHeight" : false,
                "mobileRowHeight" : 70
              }
            }
          }
        },
        "setted_devices" : {
          "name" : "Встановлені станції",
          "root" : false,
          "layouts" : {
            "main" : {
              "widgets" : {
                "52c52dab-0a43-b1c4-e041-7b7490bf036c" : {
                  "sizeX" : 18,
                  "sizeY" : 15,
                  "row" : 1,
                  "col" : 0
                },
                "43bdfba2-255b-3336-6436-f4fdb18c5031" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 9
                },
                "9a3464ba-55c9-d247-487d-96671483e83d" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 6
                },
                "c424f0b7-e12e-9b48-e6d3-221aee944128" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 12
                },
                "f78dce47-3bca-e586-5d6f-b26db759e832" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 15
                },
                "d943b91b-4567-c2a1-222a-a3b45c09bb46" : {
                  "sizeX" : 12,
                  "sizeY" : 15,
                  "row" : 2,
                  "col" : 18
                },
                "042e4749-080d-0a0d-270f-697e0957140a" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 0
                },
                "370dfb48-0139-8e06-cda4-f95e75d282fb" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 3
                },
                "5f39ff37-b950-5932-06d7-4918e02e0f81" : {
                  "sizeX" : 6,
                  "sizeY" : 2,
                  "row" : 0,
                  "col" : 18
                },
                "c2bb937d-da86-40ac-2d85-fcb9256bae91" : {
                  "sizeX" : 6,
                  "sizeY" : 2,
                  "row" : 0,
                  "col" : 24
                }
              },
              "gridSettings" : {
                "backgroundColor" : "#eeeeee",
                "color" : "rgba(0,0,0,0.870588)",
                "columns" : 30,
                "margin" : 10,
                "backgroundSizeMode" : "100%",
                "autoFillHeight" : false,
                "backgroundImageUrl" : null,
                "mobileAutoFillHeight" : false,
                "mobileRowHeight" : 70
              }
            }
          }
        },
        "unsetted_devices" : {
          "name" : "Невстановлені станції",
          "root" : false,
          "layouts" : {
            "main" : {
              "widgets" : {
                "43bdfba2-255b-3336-6436-f4fdb18c5031" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 9
                },
                "9a3464ba-55c9-d247-487d-96671483e83d" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 6
                },
                "c424f0b7-e12e-9b48-e6d3-221aee944128" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 12
                },
                "f78dce47-3bca-e586-5d6f-b26db759e832" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 15
                },
                "71458d45-9faf-3da6-1312-f1f416913dc1" : {
                  "sizeX" : 18,
                  "sizeY" : 15,
                  "row" : 1,
                  "col" : 0
                },
                "9a8ff90e-c07e-3ae7-7119-fd08305da5cc" : {
                  "sizeX" : 12,
                  "sizeY" : 15,
                  "row" : 2,
                  "col" : 18
                },
                "93168a0d-6c69-4a1c-bca6-7229074d88a9" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 0
                },
                "fb4f4c6c-7033-7330-870a-553699de8d9c" : {
                  "sizeX" : 3,
                  "sizeY" : 1,
                  "row" : 0,
                  "col" : 3
                },
                "ed2ab648-b789-0ee9-1b4b-26127955708f" : {
                  "sizeX" : 6,
                  "sizeY" : 2,
                  "row" : 0,
                  "col" : 18
                },
                "2d70e2eb-a8a1-5a7c-9fe1-f26b3658eee6" : {
                  "sizeX" : 6,
                  "sizeY" : 2,
                  "row" : 0,
                  "col" : 24
                }
              },
              "gridSettings" : {
                "backgroundColor" : "#f2f2f2",
                "color" : "rgba(0,0,0,0.870588)",
                "columns" : 30,
                "margin" : 8,
                "backgroundSizeMode" : "100%",
                "autoFillHeight" : false,
                "backgroundImageUrl" : null,
                "mobileAutoFillHeight" : false,
                "mobileRowHeight" : 70
              }
            }
          }
        }
      },
      "entityAliases" : {
        "f7bed459-ea25-5a39-bfc1-a3bb8c941d8d" : {
          "id" : "f7bed459-ea25-5a39-bfc1-a3bb8c941d8d",
          "alias" : "AssetsObject",
          "filter" : {
            "type" : "assetType",
            "resolveMultiple" : true,
            "assetType" : "default",
            "assetNameFilter" : ""
          }
        },
        "9da9bd9c-a7cc-244f-16ac-3e2045cff5b1" : {
          "id" : "9da9bd9c-a7cc-244f-16ac-3e2045cff5b1",
          "alias" : "Tenant",
          "filter" : {
            "type" : "singleEntity",
            "resolveMultiple" : false,
            "singleEntity" : {
              "entityType" : "CURRENT_TENANT",
              "id" : "13814000-1dd2-11b2-8080-808080808080"
            }
          }
        },
        "2754dd92-28a3-a689-d65c-ab9001a86f73" : {
          "id" : "2754dd92-28a3-a689-d65c-ab9001a86f73",
          "alias" : "State",
          "filter" : {
            "type" : "stateEntity",
            "resolveMultiple" : false,
            "stateEntityParamName" : "",
            "defaultStateEntity" : {
              "entityType" : "CURRENT_TENANT",
              "id" : "13814000-1dd2-11b2-8080-808080808080"
            }
          }
        },
        "ff71fe5d-722e-fe0f-bf06-080b2b55cfae" : {
          "id" : "ff71fe5d-722e-fe0f-bf06-080b2b55cfae",
          "alias" : "Users",
          "filter" : {
            "type" : "entitiesByGroupName",
            "resolveMultiple" : true,
            "groupStateEntity" : false,
            "stateEntityParamName" : null,
            "groupType" : "USER",
            "entityGroupNameFilter" : "All"
          }
        },
        "e7bb2159-4857-ab22-921e-5290a8af4f4d" : {
          "id" : "e7bb2159-4857-ab22-921e-5290a8af4f4d",
          "alias" : "Customers",
          "filter" : {
            "type" : "entitiesByGroupName",
            "resolveMultiple" : true,
            "groupStateEntity" : false,
            "stateEntityParamName" : null,
            "groupType" : "CUSTOMER",
            "entityGroupNameFilter" : "All"
          }
        },
        "e8bf7353-e2d4-1343-d6d7-32e74bd260db" : {
          "id" : "e8bf7353-e2d4-1343-d6d7-32e74bd260db",
          "alias" : "Selected Sensor",
          "filter" : {
            "type" : "stateEntity",
            "resolveMultiple" : false,
            "stateEntityParamName" : "device",
            "defaultStateEntity" : {
              "entityType" : "CURRENT_TENANT",
              "id" : "13814000-1dd2-11b2-8080-808080808080"
            }
          }
        },
        "e56b6bda-c865-20b2-b740-ba33356ab9cb" : {
          "id" : "e56b6bda-c865-20b2-b740-ba33356ab9cb",
          "alias" : "Customer Sensors",
          "filter" : {
            "type" : "deviceSearchQuery",
            "resolveMultiple" : true,
            "rootStateEntity" : true,
            "stateEntityParamName" : null,
            "defaultStateEntity" : null,
            "rootEntity" : null,
            "direction" : "FROM",
            "maxLevel" : 1,
            "fetchLastLevelOnly" : null,
            "relationType" : "Owns",
            "deviceTypes" : [ "Water Meter" ]
          }
        },
        "35c08d08-d6bf-2908-c93b-cd38837c4dfa" : {
          "id" : "35c08d08-d6bf-2908-c93b-cd38837c4dfa",
          "alias" : "Device Owner",
          "filter" : {
            "type" : "stateEntityOwner",
            "resolveMultiple" : false,
            "stateEntityParamName" : null,
            "defaultStateEntity" : null
          }
        },
        "b728b6a2-28e1-7003-4162-d19220a211e8" : {
          "id" : "b728b6a2-28e1-7003-4162-d19220a211e8",
          "alias" : "Asset_Relations",
          "filter" : {
            "type" : "relationsQuery",
            "resolveMultiple" : true,
            "rootStateEntity" : true,
            "stateEntityParamName" : null,
            "defaultStateEntity" : null,
            "rootEntity" : null,
            "direction" : "FROM",
            "maxLevel" : 1,
            "fetchLastLevelOnly" : false,
            "filters" : [ ]
          }
        },
        "e47a3fcd-231c-662a-6126-f09fd8064eb2" : {
          "id" : "e47a3fcd-231c-662a-6126-f09fd8064eb2",
          "alias" : "Devices",
          "filter" : {
            "type" : "entityType",
            "resolveMultiple" : true,
            "entityType" : "DEVICE"
          }
        },
        "f53edd68-75ef-2b98-c000-679877dd583c" : {
          "id" : "f53edd68-75ef-2b98-c000-679877dd583c",
          "alias" : "st",
          "filter" : {
            "type" : "singleEntity",
            "resolveMultiple" : false,
            "singleEntity" : {
              "entityType" : "DEVICE",
              "id" : "39f7a500-d3ac-11ed-b747-3d2284eff4f2"
            }
          }
        }
      },
      "timewindow" : {
        "hideInterval" : false,
        "hideAggregation" : false,
        "hideAggInterval" : false,
        "hideTimezone" : false,
        "selectedTab" : 0,
        "realtime" : {
          "realtimeType" : 1,
          "timewindowMs" : 60000,
          "quickInterval" : "CURRENT_WEEK_ISO",
          "interval" : 86400000
        },
        "aggregation" : {
          "type" : "NONE",
          "limit" : 50000
        },
        "timezone" : "UTC"
      },
      "settings" : {
        "stateControllerId" : "entity",
        "showTitle" : false,
        "showDashboardsSelect" : false,
        "showEntitiesSelect" : false,
        "showDashboardTimewindow" : true,
        "showDashboardExport" : true,
        "toolbarAlwaysOpen" : true,
        "titleColor" : "rgba(0,0,0,0.870588)",
        "showFilters" : true
      },
      "filters" : {
        "f5f657e4-89f6-c90d-fd0f-16d0d3bb91ec" : {
          "id" : "f5f657e4-89f6-c90d-fd0f-16d0d3bb91ec",
          "filter" : "settedDevicesFilter",
          "keyFilters" : [ {
            "key" : {
              "type" : "ATTRIBUTE",
              "key" : "setted"
            },
            "valueType" : "BOOLEAN",
            "predicates" : [ {
              "keyFilterPredicate" : {
                "operation" : "EQUAL",
                "value" : {
                  "defaultValue" : true,
                  "dynamicValue" : null
                },
                "type" : "BOOLEAN"
              },
              "userInfo" : {
                "editable" : true,
                "label" : "",
                "autogeneratedLabel" : true,
                "order" : 0
              }
            } ]
          } ],
          "editable" : false
        },
        "0f79c9b4-ffdb-f8fa-e860-a45095837597" : {
          "id" : "0f79c9b4-ffdb-f8fa-e860-a45095837597",
          "filter" : "unsettedDeviceFilter",
          "keyFilters" : [ {
            "key" : {
              "type" : "ATTRIBUTE",
              "key" : "setted"
            },
            "valueType" : "BOOLEAN",
            "predicates" : [ {
              "keyFilterPredicate" : {
                "type" : "BOOLEAN",
                "operation" : "EQUAL",
                "value" : {
                  "defaultValue" : false
                }
              },
              "userInfo" : {
                "editable" : true,
                "label" : "",
                "autogeneratedLabel" : true,
                "order" : 0
              }
            } ]
          } ],
          "editable" : false
        }
      }
    },
    "customerId" : null,
    "externalId" : null,
    "id" : {
      "entityType" : "DASHBOARD",
      "id" : "62233f50-eda4-11ed-8899-9ba30be05e76"
    },
    "image" : null,
    "mobileHide" : false,
    "mobileOrder" : null,
    "name" : "CustomerAdmin Dashboard",
    "ownerId" : null,
    "title" : "CustomerAdmin Dashboard"
  },
  "relations" : [ ],
  "attributes" : {
    "SERVER_SCOPE" : [ ]
  }
}